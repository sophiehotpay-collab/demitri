const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-CiTjZZwZ.js","assets/vendor-BfWiUekA.js","assets/mui-B2lBEHtV.js"])))=>i.map(i=>d[i]);
var Y1=Object.defineProperty;var Z1=(n,e,t)=>e in n?Y1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Or=(n,e,t)=>Z1(n,typeof e!="symbol"?e+"":e,t);import{c as X1,j as l,T as Q1,C as e0,u as t0,i as _t,a as Ia,b as bf,A as r0,d as n0,B as te,e as ge,f as Gt,g as Lt,I as yf,h as He,k as bn,l as yn,G as Ze,L as nd,D as La,P as Nr,m as Vt,n as sn,S as Rt,o as jo,p as Eo,q as ql,M as Zc,r as Xc,F as Ca,s as wf,t as xf,v as _f,w as ma,x as Sf,y as i0,z as Ol,E as Cu,H as s0,J as a0,K as id,N as sd,O as ad,Q as od,R as la,U as mr,V as ld,W as o0,X as l0,Y as Pu,Z as Iu,_ as Nu,$ as c0,a0 as jf,a1 as Af,a2 as Qc,a3 as u0,a4 as h0,a5 as d0,a6 as f0,a7 as p0,a8 as Pc,a9 as Xn,aa as Qn,ab as kf,ac as ei,ad as g0,ae as co,af as cd,ag as ud,ah as m0,ai as v0,aj as Dt,ak as Eu,al as b0,am as y0,an as w0,ao as x0}from"./mui-B2lBEHtV.js";import{c as _0,r as R,R as S0,g as Lf,d as Nn,a as yo}from"./vendor-BfWiUekA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Cf,hd=_0;Cf=hd.createRoot,hd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ao(){return Ao=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ao.apply(this,arguments)}var Yi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Yi||(Yi={}));const dd="popstate";function j0(n){n===void 0&&(n={});function e(i,s){let{pathname:a="/",search:u="",hash:c=""}=Ts(i.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),eu("",{pathname:a,search:u,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){let a=i.document.querySelector("base"),u="";if(a&&a.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");u=f===-1?c:c.slice(0,f)}return u+"#"+(typeof s=="string"?s:Fl(s))}function r(i,s){Tu(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return k0(e,t,r,n)}function ur(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Tu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function A0(){return Math.random().toString(36).substr(2,8)}function fd(n,e){return{usr:n.state,key:n.key,idx:e}}function eu(n,e,t,r){return t===void 0&&(t=null),Ao({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ts(e):e,{state:t,key:e&&e.key||r||A0()})}function Fl(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ts(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function k0(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u=Yi.Pop,c=null,f=g();f==null&&(f=0,a.replaceState(Ao({},a.state,{idx:f}),""));function g(){return(a.state||{idx:null}).idx}function m(){u=Yi.Pop;let k=g(),w=k==null?null:k-f;f=k,c&&c({action:u,location:x.location,delta:w})}function y(k,w){u=Yi.Push;let I=eu(x.location,k,w);t&&t(I,k),f=g()+1;let F=fd(I,f),Z=x.createHref(I);try{a.pushState(F,"",Z)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;i.location.assign(Z)}s&&c&&c({action:u,location:x.location,delta:1})}function v(k,w){u=Yi.Replace;let I=eu(x.location,k,w);t&&t(I,k),f=g();let F=fd(I,f),Z=x.createHref(I);a.replaceState(F,"",Z),s&&c&&c({action:u,location:x.location,delta:0})}function A(k){let w=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof k=="string"?k:Fl(k);return I=I.replace(/ $/,"%20"),ur(w,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,w)}let x={get action(){return u},get location(){return n(i,a)},listen(k){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(dd,m),c=k,()=>{i.removeEventListener(dd,m),c=null}},createHref(k){return e(i,k)},createURL:A,encodeLocation(k){let w=A(k);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:y,replace:v,go(k){return a.go(k)}};return x}var pd;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(pd||(pd={}));function L0(n,e,t){return t===void 0&&(t="/"),C0(n,e,t)}function C0(n,e,t,r){let i=typeof e=="string"?Ts(e):e,s=Ru(i.pathname||"/",t);if(s==null)return null;let a=Pf(n);P0(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let f=$0(s);u=M0(a[c],f)}return u}function Pf(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(ur(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=Xi([r,c.relativePath]),g=t.concat(c);s.children&&s.children.length>0&&(ur(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Pf(s.children,e,g,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:F0(f,s.index),routesMeta:g})};return n.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let c of If(s.path))i(s,a,c)}),e}function If(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=If(r.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...a),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function P0(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:D0(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const I0=/^:[\w-]+$/,N0=3,E0=2,T0=1,R0=10,O0=-2,gd=n=>n==="*";function F0(n,e){let t=n.split("/"),r=t.length;return t.some(gd)&&(r+=O0),e&&(r+=E0),t.filter(i=>!gd(i)).reduce((i,s)=>i+(I0.test(s)?N0:s===""?T0:R0),r)}function D0(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function M0(n,e,t){let{routesMeta:r}=n,i={},s="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,g=s==="/"?e:e.slice(s.length)||"/",m=B0({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},g),y=c.route;if(!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:Xi([s,m.pathname]),pathnameBase:V0(Xi([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=Xi([s,m.pathnameBase]))}return a}function B0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=U0(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,g,m)=>{let{paramName:y,isOptional:v}=g;if(y==="*"){let x=u[m]||"";a=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const A=u[m];return v&&!A?f[y]=void 0:f[y]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:n}}function U0(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Tu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function $0(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tu(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Ru(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function q0(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ts(n):n;return{pathname:t?t.startsWith("/")?t:z0(t,e):e,search:H0(r),hash:G0(i)}}function z0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Ic(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function W0(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ou(n,e){let t=W0(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Fu(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Ts(n):(i=Ao({},n),ur(!i.pathname||!i.pathname.includes("?"),Ic("?","pathname","search",i)),ur(!i.pathname||!i.pathname.includes("#"),Ic("#","pathname","hash",i)),ur(!i.search||!i.search.includes("#"),Ic("#","search","hash",i)));let s=n===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=t;else{let m=e.length-1;if(!r&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}u=m>=0?e[m]:"/"}let c=q0(i,u),f=a&&a!=="/"&&a.endsWith("/"),g=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||g)&&(c.pathname+="/"),c}const Xi=n=>n.join("/").replace(/\/\/+/g,"/"),V0=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),H0=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,G0=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function K0(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Nf=["post","put","patch","delete"];new Set(Nf);const J0=["get",...Nf];new Set(J0);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ko(){return ko=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ko.apply(this,arguments)}const Du=R.createContext(null),Y0=R.createContext(null),is=R.createContext(null),zl=R.createContext(null),Ai=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Ef=R.createContext(null);function Z0(n,e){let{relative:t}=e===void 0?{}:e;Na()||ur(!1);let{basename:r,navigator:i}=R.useContext(is),{hash:s,pathname:a,search:u}=Of(n,{relative:t}),c=a;return r!=="/"&&(c=a==="/"?r:Xi([r,a])),i.createHref({pathname:c,search:u,hash:s})}function Na(){return R.useContext(zl)!=null}function oi(){return Na()||ur(!1),R.useContext(zl).location}function Tf(n){R.useContext(is).static||R.useLayoutEffect(n)}function xn(){let{isDataRoute:n}=R.useContext(Ai);return n?u2():X0()}function X0(){Na()||ur(!1);let n=R.useContext(Du),{basename:e,future:t,navigator:r}=R.useContext(is),{matches:i}=R.useContext(Ai),{pathname:s}=oi(),a=JSON.stringify(Ou(i,t.v7_relativeSplatPath)),u=R.useRef(!1);return Tf(()=>{u.current=!0}),R.useCallback(function(f,g){if(g===void 0&&(g={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let m=Fu(f,JSON.parse(a),s,g.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Xi([e,m.pathname])),(g.replace?r.replace:r.push)(m,g.state,g)},[e,r,a,s,n])}function Rf(){let{matches:n}=R.useContext(Ai),e=n[n.length-1];return e?e.params:{}}function Of(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=R.useContext(is),{matches:i}=R.useContext(Ai),{pathname:s}=oi(),a=JSON.stringify(Ou(i,r.v7_relativeSplatPath));return R.useMemo(()=>Fu(n,JSON.parse(a),s,t==="path"),[n,a,s,t])}function Q0(n,e){return e2(n,e)}function e2(n,e,t,r){Na()||ur(!1);let{navigator:i,static:s}=R.useContext(is),{matches:a}=R.useContext(Ai),u=a[a.length-1],c=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let g=oi(),m;if(e){var y;let w=typeof e=="string"?Ts(e):e;f==="/"||(y=w.pathname)!=null&&y.startsWith(f)||ur(!1),m=w}else m=g;let v=m.pathname||"/",A=v;if(f!=="/"){let w=f.replace(/^\//,"").split("/");A="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=L0(n,{pathname:A}),k=s2(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Xi([f,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?f:Xi([f,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,t,r);return e&&k?R.createElement(zl.Provider,{value:{location:ko({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Yi.Pop}},k):k}function t2(){let n=c2(),e=K0(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:i},t):null,null)}const r2=R.createElement(t2,null);class n2 extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(Ai.Provider,{value:this.props.routeContext},R.createElement(Ef.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i2(n){let{routeContext:e,match:t,children:r}=n,i=R.useContext(Du);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(Ai.Provider,{value:e},r)}function s2(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=(i=t)==null?void 0:i.errors;if(u!=null){let g=a.findIndex(m=>m.route.id&&(u==null?void 0:u[m.route.id])!==void 0);g>=0||ur(!1),a=a.slice(0,Math.min(a.length,g+1))}let c=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let g=0;g<a.length;g++){let m=a[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=g),m.route.id){let{loaderData:y,errors:v}=t,A=m.route.loader&&y[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||A){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((g,m,y)=>{let v,A=!1,x=null,k=null;t&&(v=u&&m.route.id?u[m.route.id]:void 0,x=m.route.errorElement||r2,c&&(f<0&&y===0?(h2("route-fallback"),A=!0,k=null):f===y&&(A=!0,k=m.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,y+1)),I=()=>{let F;return v?F=x:A?F=k:m.route.Component?F=R.createElement(m.route.Component,null):m.route.element?F=m.route.element:F=g,R.createElement(i2,{match:m,routeContext:{outlet:g,matches:w,isDataRoute:t!=null},children:F})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?R.createElement(n2,{location:t.location,revalidation:t.revalidation,component:x,error:v,children:I(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):I()},null)}var Ff=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Ff||{}),Df=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Df||{});function a2(n){let e=R.useContext(Du);return e||ur(!1),e}function o2(n){let e=R.useContext(Y0);return e||ur(!1),e}function l2(n){let e=R.useContext(Ai);return e||ur(!1),e}function Mf(n){let e=l2(),t=e.matches[e.matches.length-1];return t.route.id||ur(!1),t.route.id}function c2(){var n;let e=R.useContext(Ef),t=o2(),r=Mf();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function u2(){let{router:n}=a2(Ff.UseNavigateStable),e=Mf(Df.UseNavigateStable),t=R.useRef(!1);return Tf(()=>{t.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,ko({fromRouteId:e},s)))},[n,e])}const md={};function h2(n,e,t){md[n]||(md[n]=!0)}function d2(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function f2(n){let{to:e,replace:t,state:r,relative:i}=n;Na()||ur(!1);let{future:s,static:a}=R.useContext(is),{matches:u}=R.useContext(Ai),{pathname:c}=oi(),f=xn(),g=Fu(e,Ou(u,s.v7_relativeSplatPath),c,i==="path"),m=JSON.stringify(g);return R.useEffect(()=>f(JSON.parse(m),{replace:t,state:r,relative:i}),[f,m,i,t,r]),null}function Gi(n){ur(!1)}function p2(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Yi.Pop,navigator:s,static:a=!1,future:u}=n;Na()&&ur(!1);let c=e.replace(/^\/*/,"/"),f=R.useMemo(()=>({basename:c,navigator:s,static:a,future:ko({v7_relativeSplatPath:!1},u)}),[c,u,s,a]);typeof r=="string"&&(r=Ts(r));let{pathname:g="/",search:m="",hash:y="",state:v=null,key:A="default"}=r,x=R.useMemo(()=>{let k=Ru(g,c);return k==null?null:{location:{pathname:k,search:m,hash:y,state:v,key:A},navigationType:i}},[c,g,m,y,v,A,i]);return x==null?null:R.createElement(is.Provider,{value:f},R.createElement(zl.Provider,{children:t,value:x}))}function g2(n){let{children:e,location:t}=n;return Q0(tu(e),t)}new Promise(()=>{});function tu(n,e){e===void 0&&(e=[]);let t=[];return R.Children.forEach(n,(r,i)=>{if(!R.isValidElement(r))return;let s=[...e,i];if(r.type===R.Fragment){t.push.apply(t,tu(r.props.children,s));return}r.type!==Gi&&ur(!1),!r.props.index||!r.props.children||ur(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=tu(r.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ru(){return ru=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ru.apply(this,arguments)}function m2(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function v2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function b2(n,e){return n.button===0&&(!e||e==="_self")&&!v2(n)}function nu(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function y2(n,e){let t=nu(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(s=>{t.append(i,s)})}),t}const w2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],x2="6";try{window.__reactRouterVersion=x2}catch{}const _2="startTransition",vd=S0[_2];function S2(n){let{basename:e,children:t,future:r,window:i}=n,s=R.useRef();s.current==null&&(s.current=j0({window:i,v5Compat:!0}));let a=s.current,[u,c]=R.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},g=R.useCallback(m=>{f&&vd?vd(()=>c(m)):c(m)},[c,f]);return R.useLayoutEffect(()=>a.listen(g),[a,g]),R.useEffect(()=>d2(r),[r]),R.createElement(p2,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:a,future:r})}const j2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mo=R.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:u,target:c,to:f,preventScrollReset:g,viewTransition:m}=e,y=m2(e,w2),{basename:v}=R.useContext(is),A,x=!1;if(typeof f=="string"&&A2.test(f)&&(A=f,j2))try{let F=new URL(window.location.href),Z=f.startsWith("//")?new URL(F.protocol+f):new URL(f),ae=Ru(Z.pathname,v);Z.origin===F.origin&&ae!=null?f=ae+Z.search+Z.hash:x=!0}catch{}let k=Z0(f,{relative:i}),w=k2(f,{replace:a,state:u,target:c,preventScrollReset:g,relative:i,viewTransition:m});function I(F){r&&r(F),F.defaultPrevented||w(F)}return R.createElement("a",ru({},y,{href:A||k,onClick:x||s?r:I,ref:t,target:c}))});var bd;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(bd||(bd={}));var yd;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(yd||(yd={}));function k2(n,e){let{target:t,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:u}=e===void 0?{}:e,c=xn(),f=oi(),g=Of(n,{relative:a});return R.useCallback(m=>{if(b2(m,t)){m.preventDefault();let y=r!==void 0?r:Fl(f)===Fl(g);c(n,{replace:y,state:i,preventScrollReset:s,relative:a,viewTransition:u})}},[f,c,g,r,i,t,n,s,a,u])}function Bf(n){let e=R.useRef(nu(n)),t=R.useRef(!1),r=oi(),i=R.useMemo(()=>y2(r.search,t.current?null:e.current),[r.search]),s=xn(),a=R.useCallback((u,c)=>{const f=nu(typeof u=="function"?u(i):u);t.current=!0,s("?"+f,c)},[s,i]);return[i,a]}const Uf=R.createContext({mode:"dark",toggleTheme:()=>{}}),L2=({children:n})=>{const[e,t]=R.useState("dark");R.useEffect(()=>{const s=localStorage.getItem("theme");s?t(s):localStorage.setItem("theme","dark")},[]),R.useEffect(()=>{localStorage.setItem("theme",e),document.body.className=e==="dark"?"dark-theme":"light-theme"},[e]);const r=()=>{t(s=>s==="dark"?"light":"dark")},i=X1({palette:{mode:e,primary:{main:"#8e24aa"},secondary:{main:"#6a1b9a"},background:{default:"#000000",paper:"#1a1a1a"},text:{primary:"#FFFFFF",secondary:"#8e24aa"},error:{main:"#FF0000"}},typography:{fontFamily:'"Montserrat", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:800,letterSpacing:"0.5px"},h2:{fontWeight:700,letterSpacing:"0.3px"},h3:{fontWeight:600},h4:{fontWeight:600},button:{fontWeight:600,textTransform:"none"}},components:{MuiButton:{styleOverrides:{root:{borderRadius:6,padding:"8px 20px",transition:"all 0.3s ease"},containedPrimary:{backgroundColor:"#8e24aa","&:hover":{backgroundColor:"#6a1b9a",transform:"scale(1.03)"}}}},MuiCard:{styleOverrides:{root:{borderRadius:8,transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease","&:hover":{transform:"scale(1.05)",zIndex:1,boxShadow:"0 10px 20px rgba(0,0,0,0.5)"}}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:"#1a1a1a",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"}}},MuiIconButton:{styleOverrides:{root:{"&:hover":{backgroundColor:"rgba(142, 36, 170, 0.1)"}}}}}});return l.jsx(Uf.Provider,{value:{mode:e,toggleTheme:r},children:l.jsxs(Q1,{theme:i,children:[l.jsx(e0,{}),n]})})},$f=R.createContext({user:null,loading:!1,error:null,login:async()=>{},logout:async()=>{},checkSession:async()=>{},isAuthenticated:!1,sessionCheckedAt:0}),wd=5*60*1e3,C2=({children:n})=>{const[e,t]=R.useState(null),[r,i]=R.useState(!0),[s,a]=R.useState(null),[u,c]=R.useState(!1),[f,g]=R.useState(0),[m,y]=R.useState(null),v=xn();R.useEffect(()=>{ae();const M=setInterval(()=>{m&&Date.now()-f>wd&&ae()},wd);return()=>clearInterval(M)},[]);const A="",x=async(M,z,W)=>{try{i(!0),a(null);const j=await fetch(`${A}/api/users/email/${encodeURIComponent(M)}`),E=j.ok?await j.json():null;if(!E){a("Usuário não encontrado. Verifique suas credenciais.");return}const V=await P2(z),U=E.password_hash||E.password||"";if(V!==U){a("Senha inválida. Tente novamente.");return}const X=await k(E.id);if(!X){a("Falha ao criar sessão. Tente novamente.");return}const ie={$id:E.id,email:E.email,name:E.name,password:E.password_hash||E.password||"",created_at:E.created_at||E.createdAt};t(ie),c(!0),y(X),g(Date.now()),W&&v(W,{replace:!0})}catch(j){console.error("Login error:",j),a("Erro ao fazer login. Tente novamente.")}finally{i(!1)}},k=async M=>{try{const z=re(),W=new Date;W.setHours(W.getHours()+24);const j={userId:M,token:z,userAgent:navigator.userAgent.substring(0,255),expiresAt:W.toISOString(),isActive:!0},E=await fetch(`${A}/api/sessions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),V=E.ok?await E.json():null;return localStorage.setItem("sessionToken",z),V}catch(z){return console.error("Error creating session:",z),null}},w=async()=>{try{if(i(!0),m)await I(m.id);else{const M=await F();M&&await I(M.id)}t(null),c(!1),y(null),g(Date.now()),v("/login")}catch(M){console.error("Logout error:",M),localStorage.removeItem("sessionToken"),t(null),c(!1),y(null),v("/login")}finally{i(!1)}},I=async M=>{try{await fetch(`${A}/api/sessions/${encodeURIComponent(M)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!1})}),localStorage.removeItem("sessionToken")}catch(z){console.error("Error deactivating session:",z)}},F=async()=>{const M=localStorage.getItem("sessionToken");return M?await Z(M):null},Z=async M=>{try{console.log("Validating session with token:",M.substring(0,10)+"...");const z=await fetch(`${A}/api/sessions/token/${encodeURIComponent(M)}`),W=z.ok?await z.json():null;if(!W)return console.log("No session found with this token"),null;if(console.log("Session found:",W.id,"for user:",W.userId),!W.isActive)return console.log("Session found, but is inactive"),null;const j=new Date(W.expiresAt),E=new Date;return console.log("Session expires at:",j,"Now:",E),j<E?(console.log("Session expired, deactivating"),await I(W.id),null):(console.log("Session valid and active"),W)}catch(z){return console.error("Error validating session:",z),null}},ae=async()=>{try{const M=Date.now();if(M-f<1e4)return;i(!0);const z=await F();if(y(z),g(M),!z){t(null),c(!1);return}try{const W=await fetch(`${A}/api/users/${encodeURIComponent(z.userId)}`),j=W.ok?await W.json():null;if(!j){await I(z.id),t(null),c(!1),y(null);return}const E={$id:j.id,email:j.email,name:j.name,password:j.password_hash||j.password||"",created_at:j.created_at||j.createdAt};t(E),c(!0)}catch(W){console.error("Error fetching user data:",W),t(null),c(!1),await I(z.id),y(null)}}catch(M){console.error("Session check error:",M),t(null),c(!1),y(null)}finally{i(!1)}},re=()=>{const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let z="";for(let W=0;W<64;W++)z+=M.charAt(Math.floor(Math.random()*M.length));return z},G={user:e,loading:r,error:s,login:x,logout:w,checkSession:ae,isAuthenticated:u,sessionCheckedAt:f};return l.jsx($f.Provider,{value:G,children:n})};async function P2(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map(s=>s.toString(16).padStart(2,"0")).join("")}const ss=()=>R.useContext($f);class I2{constructor(){Or(this,"config",null);Or(this,"isInitialized",!1)}async initialize(e){this.config=e,this.isInitialized=!0}async checkInitialized(){(!this.isInitialized||!this.config)&&await this.initializeWithDefaultConfig()}async initializeWithDefaultConfig(){try{const t=await fetch("/api/site-config");if(t.ok){const r=await t.json(),i=r.wasabiConfig||r.wasabi_config;if(i){const s={accessKey:i.accessKey||i.access_key||"",secretKey:i.secretKey||i.secret_key||"",region:i.region||"",bucket:i.bucket||"",endpoint:i.endpoint||""};await this.initialize(s);return}}}catch{console.warn("Could not load site config for Wasabi, using default config")}await this.initialize(N2)}async uploadFile(e,t="videos"){try{await this.checkInitialized();const r=new FormData;r.append("file",e);const i="",s=`/api/upload/${t}`,a=`${i}${s}`;console.log(`Uploading file to: ${a}`),console.log(`File: ${e.name}, Size: ${e.size}, Type: ${e.type}`);const u=await fetch(a,{method:"POST",body:r});if(u.ok){const c=await u.json();return{success:c.success,fileId:c.fileId,url:c.url}}else{const c=await u.json().catch(()=>({}));throw new Error(`Upload failed: ${u.status} ${u.statusText} - ${c.error||"Unknown error"}`)}}catch(r){return console.error("Error uploading file to Wasabi:",r),{success:!1,fileId:"",url:"",error:r instanceof Error?r.message:"Unknown error"}}}async getFileUrl(e){await this.checkInitialized();try{const t="",r=encodeURIComponent(e);console.log("Requesting signed URL for fileId:",e,"encoded:",r);const i=await fetch(`${t}/api/signed-url/${r}`);if(i.ok){const s=await i.json();if(s.success&&s.url)return console.log("Signed URL obtained:",s.url),s.url}else console.error("Failed to get signed URL:",i.status,i.statusText);console.warn("Failed to get signed URL, falling back to direct URL")}catch(t){console.warn("Error getting signed URL:",t)}return e.startsWith("videos/")||e.startsWith("thumbnails/")?`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/${e}`:`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/videos/${e}`}async getThumbnailUrl(e){await this.checkInitialized();try{const t="",r=encodeURIComponent(e);console.log("Requesting signed URL for thumbnailId:",e,"encoded:",r);const i=await fetch(`${t}/api/signed-url/${r}`);if(i.ok){const s=await i.json();if(s.success&&s.url)return console.log("Signed URL for thumbnail obtained:",s.url),s.url}else console.error("Failed to get signed URL for thumbnail:",i.status,i.statusText);console.warn("Failed to get signed URL for thumbnail, falling back to direct URL")}catch(t){console.warn("Error getting signed URL for thumbnail:",t)}return e.startsWith("thumbnails/")?`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/${e}`:`https://${this.config.bucket}.s3.${this.config.region}.wasabisys.com/thumbnails/${e}`}async deleteFile(e){await this.checkInitialized();try{const t="",r=encodeURIComponent(e),i=await fetch(`${t}/api/delete-file/${r}`,{method:"DELETE"});return i.ok?(await i.json()).success||!1:(console.error("Failed to delete file:",i.status,i.statusText),!1)}catch(t){return console.error("Error deleting file from Wasabi:",t),!1}}async fileExists(e){await this.checkInitialized();try{const t=await this.getFileUrl(e);return(await fetch(t,{method:"HEAD"})).ok}catch(t){return console.error("Error checking file existence:",t),!1}}async listFiles(e="videos"){await this.checkInitialized();try{return[]}catch(t){return console.error("Error listing files:",t),[]}}}const In=new I2,N2={accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""};class E2{constructor(){Or(this,"METADATA_KEY","metadata/videosplus-data.json");Or(this,"cache",null);Or(this,"cacheTimestamp",0);Or(this,"CACHE_DURATION",30*1e3)}isCacheValid(){return this.cache!==null&&this.cacheTimestamp>0&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION}clearCache(){this.cache=null,this.cacheTimestamp=0,console.log("Wasabi metadata cache cleared")}async loadDataFromWasabi(){try{console.log("Loading metadata from Wasabi..."),await In.initialize({accessKey:"DFE7LMSWPMT594QBP91X",secretKey:"SrqQIih5TI4tEBu9zINeFDyBuvwrMDtLJCSmY9at",region:"eu-central-2",bucket:"videos3d",endpoint:"https://s3.eu-central-2.wasabisys.com"});const e=await In.getFileUrl(this.METADATA_KEY),t=await fetch(e);if(!t.ok)throw new Error(`Failed to load metadata: ${t.status}`);const r=await t.json();return console.log("Metadata loaded from Wasabi:",r),this.cache=r,this.cacheTimestamp=Date.now(),r}catch(e){console.error("Error loading metadata from Wasabi:",e);const t={videos:[],users:[],sessions:[],siteConfig:{siteName:"VideosPlus",paypalClientId:"",paypalMeUsername:"",stripePublishableKey:"",stripeSecretKey:"",telegramUsername:"",videoListTitle:"Available Videos",crypto:[],emailHost:"smtp.gmail.com",emailPort:"587",emailSecure:!1,emailUser:"",emailPass:"",emailFrom:"",wasabiConfig:{accessKey:"DFE7LMSWPMT594QBP91X",secretKey:"SrqQIih5TI4tEBu9zINeFDyBuvwrMDtLJCSmY9at",region:"eu-central-2",bucket:"videos3d",endpoint:"https://s3.eu-central-2.wasabisys.com"}}};return this.cache=t,this.cacheTimestamp=Date.now(),t}}async saveDataToWasabi(e){try{console.log("Saving metadata to Wasabi..."),await In.initialize({accessKey:"DFE7LMSWPMT594QBP91X",secretKey:"SrqQIih5TI4tEBu9zINeFDyBuvwrMDtLJCSmY9at",region:"eu-central-2",bucket:"videos3d",endpoint:"https://s3.eu-central-2.wasabisys.com"});const t=JSON.stringify(e,null,2),r=new FormData,i=new Blob([t],{type:"application/json"});r.append("file",i,"videosplus-data.json");const a=await fetch("/api/upload/metadata",{method:"POST",body:r});if(!a.ok)throw new Error(`Failed to save metadata: ${a.status}`);console.log("Metadata saved to Wasabi successfully"),this.cache=e,this.cacheTimestamp=Date.now()}catch(t){throw console.error("Error saving metadata to Wasabi:",t),t}}async getData(){return this.isCacheValid()?(console.log("Using cached metadata"),this.cache):await this.loadDataFromWasabi()}async getAllVideos(){return(await this.getData()).videos||[]}async getVideo(e){return(await this.getAllVideos()).find(r=>r.id===e)||null}async createVideo(e){const t=await this.loadDataFromWasabi(),r={...e,id:this.generateId(),createdAt:new Date().toISOString(),views:0};return t.videos||(t.videos=[]),t.videos.push(r),await this.saveDataToWasabi(t),r}async updateVideo(e,t){const r=await this.loadDataFromWasabi();if(!r.videos)return null;const i=r.videos.findIndex(s=>s.id===e);return i===-1?null:(r.videos[i]={...r.videos[i],...t},await this.saveDataToWasabi(r),r.videos[i])}async deleteVideo(e){const t=await this.loadDataFromWasabi();if(!t.videos)return!1;const r=t.videos.findIndex(i=>i.id===e);return r===-1?!1:(t.videos.splice(r,1),await this.saveDataToWasabi(t),!0)}async incrementVideoViews(e){const t=await this.loadDataFromWasabi();if(!t.videos)return;const r=t.videos.find(i=>i.id===e);r&&(r.views=(r.views||0)+1,await this.saveDataToWasabi(t))}async getAllUsers(){return(await this.getData()).users||[]}async getUser(e){return(await this.getAllUsers()).find(r=>r.id===e)||null}async getUserByEmail(e){return(await this.getAllUsers()).find(r=>r.email===e)||null}async createUser(e){const t=await this.loadDataFromWasabi(),r={...e,id:this.generateId(),createdAt:new Date().toISOString()};return t.users||(t.users=[]),t.users.push(r),await this.saveDataToWasabi(t),r}async updateUser(e,t){const r=await this.loadDataFromWasabi();if(!r.users)return null;const i=r.users.findIndex(s=>s.id===e);return i===-1?null:(r.users[i]={...r.users[i],...t},await this.saveDataToWasabi(r),r.users[i])}async deleteUser(e){const t=await this.loadDataFromWasabi();if(!t.users)return!1;const r=t.users.findIndex(i=>i.id===e);return r===-1?!1:(t.users.splice(r,1),await this.saveDataToWasabi(t),!0)}async getAllSessions(){return(await this.getData()).sessions||[]}async getSessionByToken(e){return(await this.getAllSessions()).find(r=>r.token===e&&r.isActive)||null}async createSession(e){const t=await this.loadDataFromWasabi(),r={...e,id:this.generateId(),createdAt:new Date().toISOString()};return t.sessions||(t.sessions=[]),t.sessions.push(r),await this.saveDataToWasabi(t),r}async updateSession(e,t){const r=await this.loadDataFromWasabi();if(!r.sessions)return null;const i=r.sessions.findIndex(s=>s.id===e);return i===-1?null:(r.sessions[i]={...r.sessions[i],...t},await this.saveDataToWasabi(r),r.sessions[i])}async deleteSession(e){const t=await this.loadDataFromWasabi();if(!t.sessions)return!1;const r=t.sessions.findIndex(i=>i.id===e);return r===-1?!1:(t.sessions.splice(r,1),await this.saveDataToWasabi(t),!0)}async getSiteConfig(){return(await this.getData()).siteConfig||null}async updateSiteConfig(e){const t=await this.loadDataFromWasabi();return t.siteConfig={...t.siteConfig,...e},await this.saveDataToWasabi(t),t.siteConfig}generateId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}clearCachePublic(){this.clearCache()}}const jr=new E2;class T2{constructor(){Or(this,"isInitialized",!1)}async initialize(){this.isInitialized=!0}async checkInitialized(){this.isInitialized||await this.initialize()}async getAllVideos(){return await this.checkInitialized(),await jr.getAllVideos()}async getVideo(e){return await this.checkInitialized(),await jr.getVideo(e)}async createVideo(e){return await this.checkInitialized(),await jr.createVideo(e)}async updateVideo(e,t){return await this.checkInitialized(),await jr.updateVideo(e,t)}async deleteVideo(e){return await this.checkInitialized(),await jr.deleteVideo(e)}async incrementVideoViews(e){return await this.checkInitialized(),await jr.incrementVideoViews(e)}async getAllUsers(){return await this.checkInitialized(),await jr.getAllUsers()}async getUser(e){return await this.checkInitialized(),await jr.getUser(e)}async getUserByEmail(e){return await this.checkInitialized(),await jr.getUserByEmail(e)}async createUser(e){return await this.checkInitialized(),await jr.createUser(e)}async updateUser(e,t){return await this.checkInitialized(),await jr.updateUser(e,t)}async deleteUser(e){return await this.checkInitialized(),await jr.deleteUser(e)}async createSession(e){return await this.checkInitialized(),await jr.createSession(e)}async getSessionByToken(e){return await this.checkInitialized(),await jr.getSessionByToken(e)}async updateSession(e,t){return await this.checkInitialized(),await jr.updateSession(e,t)}async deleteSession(e){return await this.checkInitialized(),await jr.deleteSession(e)}async getSiteConfig(){return await this.checkInitialized(),await jr.getSiteConfig()}async updateSiteConfig(e){return await this.checkInitialized(),await jr.updateSiteConfig(e)}async healthCheck(){try{return await this.checkInitialized(),!0}catch(e){return console.error("Health check failed:",e),!1}}}const xd=new T2,R2="modulepreload",O2=function(n){return"/"+n},_d={},es=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=O2(c),c in _d)return;_d[c]=!0;const f=c.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":R2,f||(m.as="script"),m.crossOrigin="",m.href=c,u&&m.setAttribute("nonce",u),document.head.appendChild(m),f)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})},F2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>es(async()=>{const{default:r}=await Promise.resolve().then(()=>Ea);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Mu extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class D2 extends Mu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Sd extends Mu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class jd extends Mu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var iu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(iu||(iu={}));var M2=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(g){try{f(r.next(g))}catch(m){a(m)}}function c(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(u,c)}f((r=r.apply(n,e||[])).next())})};class B2{constructor(e,{headers:t={},customFetch:r,region:i=iu.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=F2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return M2(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=t;let u={},{region:c}=t;c||(c=this.region);const f=new URL(`${this.url}/${e}`);c&&c!=="any"&&(u["x-region"]=c,f.searchParams.set("forceFunctionRegion",c));let g;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",g=a):typeof a=="string"?(u["Content-Type"]="text/plain",g=a):typeof FormData<"u"&&a instanceof FormData?g=a:(u["Content-Type"]="application/json",g=JSON.stringify(a)));const m=yield this.fetch(f.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:g}).catch(x=>{throw new D2(x)}),y=m.headers.get("x-relay-error");if(y&&y==="true")throw new Sd(m);if(!m.ok)throw new jd(m);let v=((r=m.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),A;return v==="application/json"?A=yield m.json():v==="application/octet-stream"?A=yield m.blob():v==="text/event-stream"?A=m:v==="multipart/form-data"?A=yield m.formData():A=yield m.text(),{data:A,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof jd||i instanceof Sd?i.context:void 0}}})}}var nn={},Bu={},Wl={},To={},Vl={},Hl={},U2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pa=U2();const $2=Pa.fetch,qf=Pa.fetch.bind(Pa),zf=Pa.Headers,q2=Pa.Request,z2=Pa.Response,Ea=Object.freeze(Object.defineProperty({__proto__:null,Headers:zf,Request:q2,Response:z2,default:qf,fetch:$2},Symbol.toStringTag,{value:"Module"})),W2=Lf(Ea);var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});let V2=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Gl.default=V2;var Wf=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hl,"__esModule",{value:!0});const H2=Wf(W2),G2=Wf(Gl);let K2=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=H2.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,u,c,f;let g=null,m=null,y=null,v=s.status,A=s.statusText;if(s.ok){if(this.method!=="HEAD"){const I=await s.text();I===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?m=I:m=JSON.parse(I))}const k=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),w=(c=s.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");k&&w&&w.length>1&&(y=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(g={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,y=null,v=406,A="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const k=await s.text();try{g=JSON.parse(k),Array.isArray(g)&&s.status===404&&(m=[],g=null,v=200,A="OK")}catch{s.status===404&&k===""?(v=204,A="No Content"):g={message:k}}if(g&&this.isMaybeSingle&&(!((f=g==null?void 0:g.details)===null||f===void 0)&&f.includes("0 rows"))&&(g=null,v=200,A="OK"),g&&this.shouldThrowOnError)throw new G2.default(g)}return{error:g,data:m,count:y,status:v,statusText:A}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,u,c;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(u=s==null?void 0:s.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};Hl.default=K2;var J2=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vl,"__esModule",{value:!0});const Y2=J2(Hl);let Z2=class extends Y2.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",u=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${u?`${u},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var u;const c=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${f}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Vl.default=Z2;var X2=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(To,"__esModule",{value:!0});const Q2=X2(Vl);let eg=class extends Q2.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};To.default=eg;var tg=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Wl,"__esModule",{value:!0});const uo=tg(To);let rg=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(u=>/\s/.test(u)&&!s?"":(u==='"'&&(s=!s),u)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new uo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(a.length>0){const u=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new uo.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var a;const u="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(c.length>0){const f=[...new Set(c)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new uo.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new uo.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new uo.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Wl.default=rg;var Vf=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Bu,"__esModule",{value:!0});const ng=Vf(Wl),ig=Vf(To);let sg=class Hf{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new ng.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Hf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var a;let u;const c=new URL(`${this.url}/rpc/${e}`);let f;r||i?(u=r?"HEAD":"GET",Object.entries(t).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{c.searchParams.append(m,y)})):(u="POST",f=t);const g=new Headers(this.headers);return s&&g.set("Prefer",`count=${s}`),new ig.default({method:u,url:c,headers:g,schema:this.schemaName,body:f,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};Bu.default=sg;var Ta=Nn&&Nn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(nn,"__esModule",{value:!0});nn.PostgrestError=nn.PostgrestBuilder=nn.PostgrestTransformBuilder=nn.PostgrestFilterBuilder=nn.PostgrestQueryBuilder=nn.PostgrestClient=void 0;const Gf=Ta(Bu);nn.PostgrestClient=Gf.default;const Kf=Ta(Wl);nn.PostgrestQueryBuilder=Kf.default;const Jf=Ta(To);nn.PostgrestFilterBuilder=Jf.default;const Yf=Ta(Vl);nn.PostgrestTransformBuilder=Yf.default;const Zf=Ta(Hl);nn.PostgrestBuilder=Zf.default;const Xf=Ta(Gl);nn.PostgrestError=Xf.default;var ag=nn.default={PostgrestClient:Gf.default,PostgrestQueryBuilder:Kf.default,PostgrestFilterBuilder:Jf.default,PostgrestTransformBuilder:Yf.default,PostgrestBuilder:Zf.default,PostgrestError:Xf.default};const{PostgrestClient:og,PostgrestQueryBuilder:yw,PostgrestFilterBuilder:ww,PostgrestTransformBuilder:xw,PostgrestBuilder:_w,PostgrestError:Sw}=ag;class lg{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const cg="2.15.5",ug=`realtime-js/${cg}`,hg="1.0.0",su=1e4,dg=1e3,fg=100;var wo;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(wo||(wo={}));var yr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(yr||(yr={}));var zn;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(zn||(zn={}));var au;(function(n){n.websocket="websocket"})(au||(au={}));var Ls;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ls||(Ls={}));class pg{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const u=r.decode(e.slice(a,a+i));a=a+i;const c=r.decode(e.slice(a,a+s));a=a+s;const f=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:u,event:c,payload:f}}}class Qf{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ut;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ut||(Ut={}));const Ad=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,a)=>(s[a]=gg(a,n,e,i),s),{})},gg=(n,e,t,r)=>{const i=e.find(u=>u.name===n),s=i==null?void 0:i.type,a=t[n];return s&&!r.includes(s)?ep(s,a):ou(a)},ep=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return yg(e,t)}switch(n){case Ut.bool:return mg(e);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return vg(e);case Ut.json:case Ut.jsonb:return bg(e);case Ut.timestamp:return wg(e);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return ou(e);default:return ou(e)}},ou=n=>n,mg=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},vg=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},bg=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},yg=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const a=n.slice(1,t);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(u=>ep(e,u))}return n},wg=n=>typeof n=="string"?n.replace(" ","T"):n,tp=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Nc{constructor(e,t,r={},i=su){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var kd;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(kd||(kd={}));class xo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xo.syncState(this.state,i,s,a),this.pendingDiffs.forEach(c=>{this.state=xo.syncDiff(this.state,c,s,a)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=xo.syncDiff(this.state,i,s,a),u())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),a=this.transformState(t),u={},c={};return this.map(s,(f,g)=>{a[f]||(c[f]=g)}),this.map(a,(f,g)=>{const m=s[f];if(m){const y=g.map(k=>k.presence_ref),v=m.map(k=>k.presence_ref),A=g.filter(k=>v.indexOf(k.presence_ref)<0),x=m.filter(k=>y.indexOf(k.presence_ref)<0);A.length>0&&(u[f]=A),x.length>0&&(c[f]=x)}else u[f]=g}),this.syncDiff(s,{joins:u,leaves:c},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(u,c)=>{var f;const g=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(c),g.length>0){const m=e[u].map(v=>v.presence_ref),y=g.filter(v=>m.indexOf(v.presence_ref)<0);e[u].unshift(...y)}r(u,g,c)}),this.map(a,(u,c)=>{let f=e[u];if(!f)return;const g=c.map(m=>m.presence_ref);f=f.filter(m=>g.indexOf(m.presence_ref)<0),e[u]=f,i(u,f,c),f.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ld;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Ld||(Ld={}));var _o;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(_o||(_o={}));var Si;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Si||(Si={}));class Uu{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=yr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Nc(this,zn.join,this.params,this.timeout),this.rejoinTimer=new Qf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yr.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=yr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=yr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zn.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new xo(this),this.broadcastEndpointURL=tp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==yr.closed){const{config:{broadcast:a,presence:u,private:c}}=this.params,f=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[_o.PRESENCE]&&this.bindings[_o.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,m={},y={broadcast:a,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:f,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(Si.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(Si.CLOSED)),this.updateJoinPayload(Object.assign({config:y},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:v})=>{var A;if(this.socket.setAuth(),v===void 0){e==null||e(Si.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,k=(A=x==null?void 0:x.length)!==null&&A!==void 0?A:0,w=[];for(let I=0;I<k;I++){const F=x[I],{filter:{event:Z,schema:ae,table:re,filter:G}}=F,M=v&&v[I];if(M&&M.event===Z&&M.schema===ae&&M.table===re&&M.filter===G)w.push(Object.assign(Object.assign({},F),{id:M.id}));else{this.unsubscribe(),this.state=yr.errored,e==null||e(Si.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(Si.SUBSCRIBED);return}}).receive("error",v=>{this.state=yr.errored,e==null||e(Si.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Si.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===yr.joined&&e===_o.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,u,c;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),f.receive("ok",()=>s("ok")),f.receive("error",()=>s("error")),f.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=yr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Nc(this,zn.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yr.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Nc(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>fg){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const a=e.toLocaleLowerCase(),{close:u,error:c,leave:f,join:g}=zn;if(r&&[u,c,f,g].indexOf(a)>=0&&r!==this._joinRef())return;let y=this._onMessage(a,t,r);if(t&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var A,x,k;return((A=v.filter)===null||A===void 0?void 0:A.event)==="*"||((k=(x=v.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===a}).map(v=>v.callback(y,r)):(s=this.bindings[a])===null||s===void 0||s.filter(v=>{var A,x,k,w,I,F;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const Z=v.id,ae=(A=v.filter)===null||A===void 0?void 0:A.event;return Z&&((x=t.ids)===null||x===void 0?void 0:x.includes(Z))&&(ae==="*"||(ae==null?void 0:ae.toLocaleLowerCase())===((k=t.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const Z=(I=(w=v==null?void 0:v.filter)===null||w===void 0?void 0:w.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return Z==="*"||Z===((F=t==null?void 0:t.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof y=="object"&&"ids"in y){const A=y.data,{schema:x,table:k,commit_timestamp:w,type:I,errors:F}=A;y=Object.assign(Object.assign({},{schema:x,table:k,commit_timestamp:w,eventType:I,new:{},old:{},errors:F}),this._getPayloadRecords(A))}v.callback(y,r)})}_isClosed(){return this.state===yr.closed}_isJoined(){return this.state===yr.joined}_isJoining(){return this.state===yr.joining}_isLeaving(){return this.state===yr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Uu.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(zn.close,{},e)}_onError(e){this._on(zn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ad(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ad(e.columns,e.old_record)),t}}const Ec=()=>{},ml={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},xg=[1e3,2e3,5e3,1e4],_g=1e4,Sg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jg{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=su,this.transport=null,this.heartbeatIntervalMs=ml.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ec,this.ref=0,this.reconnectTimer=null,this.logger=Ec,this.conn=null,this.sendBuffer=[],this.serializer=new pg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>es(async()=>{const{default:u}=await Promise.resolve().then(()=>Ea);return{default:u}},void 0).then(({default:u})=>u(...a)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${au.websocket}`,this.httpEndpoint=tp(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hg}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case wo.connecting:return Ls.Connecting;case wo.open:return Ls.Open;case wo.closing:return Ls.Closing;default:return Ls.Closed}}isConnected(){return this.connectionState()===Ls.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Uu(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(dg,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ml.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=t,u=a?`(${a})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${i} ${u}`.trim(),s),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(i,s,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(zn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Sg],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:ug};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(zn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Qf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ml.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,a,u,c,f,g;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:su,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:ml.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Ec,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>xg[m-1]||_g,this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(m,y)=>y(JSON.stringify(m)),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class $u extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function wr(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Ag extends $u{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class lu extends $u{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var kg=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(g){try{f(r.next(g))}catch(m){a(m)}}function c(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(u,c)}f((r=r.apply(n,e||[])).next())})};const rp=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>es(async()=>{const{default:r}=await Promise.resolve().then(()=>Ea);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Lg=()=>kg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield es(()=>Promise.resolve().then(()=>Ea),void 0)).Response:Response}),cu=n=>{if(Array.isArray(n))return n.map(t=>cu(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=cu(r)}),e},Cg=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Rs=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(g){try{f(r.next(g))}catch(m){a(m)}}function c(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(u,c)}f((r=r.apply(n,e||[])).next())})};const Tc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Pg=(n,e,t)=>Rs(void 0,void 0,void 0,function*(){const r=yield Lg();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new Ag(Tc(i),s,a))}).catch(i=>{e(new lu(Tc(i),i))}):e(new lu(Tc(n),n))}),Ig=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(Cg(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Ro(n,e,t,r,i,s){return Rs(this,void 0,void 0,function*(){return new Promise((a,u)=>{n(t,Ig(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Pg(c,u,r))})})}function Dl(n,e,t,r){return Rs(this,void 0,void 0,function*(){return Ro(n,"GET",e,t,r)})}function ri(n,e,t,r,i){return Rs(this,void 0,void 0,function*(){return Ro(n,"POST",e,r,i,t)})}function uu(n,e,t,r,i){return Rs(this,void 0,void 0,function*(){return Ro(n,"PUT",e,r,i,t)})}function Ng(n,e,t,r){return Rs(this,void 0,void 0,function*(){return Ro(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function np(n,e,t,r,i){return Rs(this,void 0,void 0,function*(){return Ro(n,"DELETE",e,r,i,t)})}var Vr=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(g){try{f(r.next(g))}catch(m){a(m)}}function c(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(u,c)}f((r=r.apply(n,e||[])).next())})};const Eg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Tg{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=rp(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return Vr(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Cd),i);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const f=this._removeEmptyFolders(t),g=this._getFinalPath(f),m=yield(e=="PUT"?uu:ri)(this.fetch,`${this.url}/object/${g}`,s,Object.assign({headers:u},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:m.Id,fullPath:m.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wr(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Vr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Vr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),u=new URL(this.url+`/object/upload/sign/${a}`);u.searchParams.set("token",t);try{let c;const f=Object.assign({upsert:Cd.upsert},i),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",f.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",f.cacheControl)):(c=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const m=yield uu(this.fetch,u.toString(),c,{headers:g});return{data:{path:s,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(wr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Vr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield ri(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),u=a.searchParams.get("token");if(!u)throw new $u("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}update(e,t,r){return Vr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Vr(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Vr(this,void 0,void 0,function*(){try{return{data:{path:(yield ri(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Vr(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield ri(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Vr(this,void 0,void 0,function*(){try{const i=yield ri(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}download(e,t){return Vr(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Dl(this.fetch,`${this.url}/${i}/${u}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(wr(u))return{data:null,error:u};throw u}})}info(e){return Vr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Dl(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:cu(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}exists(e){return Vr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Ng(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r)&&r instanceof lu){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const u=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(e){return Vr(this,void 0,void 0,function*(){try{return{data:yield np(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(wr(t))return{data:null,error:t};throw t}})}list(e,t,r){return Vr(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Eg),t),{prefix:e||""});return{data:yield ri(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wr(i))return{data:null,error:i};throw i}})}listV2(e,t){return Vr(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ri(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Rg="2.12.1",Og={"X-Client-Info":`storage-js/${Rg}`};var ca=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(g){try{f(r.next(g))}catch(m){a(m)}}function c(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(u,c)}f((r=r.apply(n,e||[])).next())})};class Fg{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},Og),t),this.fetch=rp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ca(this,void 0,void 0,function*(){try{return{data:yield Dl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(wr(e))return{data:null,error:e};throw e}})}getBucket(e){return ca(this,void 0,void 0,function*(){try{return{data:yield Dl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(wr(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ca(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ca(this,void 0,void 0,function*(){try{return{data:yield uu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ca(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(wr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ca(this,void 0,void 0,function*(){try{return{data:yield np(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(wr(t))return{data:null,error:t};throw t}})}}class Dg extends Fg{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new Tg(this.url,this.headers,e,this.fetch)}}const Mg="2.57.4";let vo="";typeof Deno<"u"?vo="deno":typeof document<"u"?vo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vo="react-native":vo="node";const Bg={"X-Client-Info":`supabase-js-${vo}/${Mg}`},Ug={headers:Bg},$g={schema:"public"},qg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zg={};var Wg=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(g){try{f(r.next(g))}catch(m){a(m)}}function c(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(u,c)}f((r=r.apply(n,e||[])).next())})};const Vg=n=>{let e;return n?e=n:typeof fetch>"u"?e=qf:e=fetch,(...t)=>e(...t)},Hg=()=>typeof Headers>"u"?zf:Headers,Gg=(n,e,t)=>{const r=Vg(t),i=Hg();return(s,a)=>Wg(void 0,void 0,void 0,function*(){var u;const c=(u=yield e())!==null&&u!==void 0?u:n;let f=new i(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},a),{headers:f}))})};var Kg=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(g){try{f(r.next(g))}catch(m){a(m)}}function c(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(u,c)}f((r=r.apply(n,e||[])).next())})};function Jg(n){return n.endsWith("/")?n:n+"/"}function Yg(n,e){var t,r;const{db:i,auth:s,realtime:a,global:u}=n,{db:c,auth:f,realtime:g,global:m}=e,y={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},f),s),realtime:Object.assign(Object.assign({},g),a),storage:{},global:Object.assign(Object.assign(Object.assign({},m),u),{headers:Object.assign(Object.assign({},(t=m==null?void 0:m.headers)!==null&&t!==void 0?t:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Kg(this,void 0,void 0,function*(){return""})};return n.accessToken?y.accessToken=n.accessToken:delete y.accessToken,y}function Zg(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Jg(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ip="2.71.1",va=30*1e3,hu=3,Rc=hu*va,Xg="http://localhost:9999",Qg="supabase.auth.token",em={"X-Client-Info":`gotrue-js/${ip}`},du="X-Supabase-Api-Version",sp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tm=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rm=10*60*1e3;class qu extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function gt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class nm extends qu{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function im(n){return gt(n)&&n.name==="AuthApiError"}class ap extends qu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class as extends qu{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class Ki extends as{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sm(n){return gt(n)&&n.name==="AuthSessionMissingError"}class vl extends as{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bl extends as{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class yl extends as{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function am(n){return gt(n)&&n.name==="AuthImplicitGrantRedirectError"}class Pd extends as{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fu extends as{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Oc(n){return gt(n)&&n.name==="AuthRetryableFetchError"}class Id extends as{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class pu extends as{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ml="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nd=` 	
\r=`.split(""),om=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Nd.length;e+=1)n[Nd[e].charCodeAt(0)]=-2;for(let e=0;e<Ml.length;e+=1)n[Ml[e].charCodeAt(0)]=e;return n})();function Ed(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Ml[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Ml[r]),e.queuedBits-=6}}function op(n,e,t){const r=om[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Td(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{um(a,r,t)};for(let a=0;a<n.length;a+=1)op(n.charCodeAt(a),i,s);return e.join("")}function lm(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function cm(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}lm(r,e)}}function um(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function hm(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)op(n.charCodeAt(i),t,r);return new Uint8Array(e)}function dm(n){const e=[];return cm(n,t=>e.push(t)),new Uint8Array(e)}function fm(n){const e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};return n.forEach(i=>Ed(i,t,r)),Ed(null,t,r),e.join("")}function pm(n){return Math.round(Date.now()/1e3)+n}function gm(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const $n=()=>typeof window<"u"&&typeof document<"u",Ss={tested:!1,writable:!1},lp=()=>{if(!$n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ss.tested)return Ss.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ss.tested=!0,Ss.writable=!0}catch{Ss.tested=!0,Ss.writable=!1}return Ss.writable};function mm(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}const cp=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>es(async()=>{const{default:r}=await Promise.resolve().then(()=>Ea);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},vm=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",ba=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},js=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Wi=async(n,e)=>{await n.removeItem(e)};class Kl{constructor(){this.promise=new Kl.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Kl.promiseConstructor=Promise;function Fc(n){const e=n.split(".");if(e.length!==3)throw new pu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!tm.test(e[r]))throw new pu("JWT not in base64url format");return{header:JSON.parse(Td(e[0])),payload:JSON.parse(Td(e[1])),signature:hm(e[2]),raw:{header:e[0],payload:e[1]}}}async function bm(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function ym(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await n(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function wm(n){return("0"+n.toString(16)).substr(-2)}function xm(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,wm).join("")}async function _m(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Sm(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await _m(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ua(n,e,t=!1){const r=xm();let i=r;t&&(i+="/PASSWORD_RECOVERY"),await ba(n,`${e}-code-verifier`,i);const s=await Sm(r);return[s,r===s?"plain":"s256"]}const jm=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Am(n){const e=n.headers.get(du);if(!e||!e.match(jm))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function km(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function Lm(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Cm=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ha(n){if(!Cm.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Dc(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Rd(n){return JSON.parse(JSON.stringify(n))}var Pm=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const As=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Im=[502,503,504];async function Od(n){var e;if(!vm(n))throw new fu(As(n),0);if(Im.includes(n.status))throw new fu(As(n),n.status);let t;try{t=await n.json()}catch(s){throw new ap(As(s),s)}let r;const i=Am(n);if(i&&i.getTime()>=sp["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Id(As(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ki}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Id(As(t),n.status,t.weak_password.reasons);throw new nm(As(t),n.status||500,r)}const Nm=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function bt(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[du]||(s[du]=sp["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Em(n,e,t+u,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Em(n,e,t,r,i,s){const a=Nm(e,r,i,s);let u;try{u=await n(t,Object.assign({},a))}catch(c){throw console.error(c),new fu(As(c),0)}if(u.ok||await Od(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await Od(c)}}function _i(n){var e;let t=null;Fm(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=pm(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Fd(n){const e=_i(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Ji(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Tm(n){return{data:n,error:null}}function Rm(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,a=Pm(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},a);return{data:{properties:u,user:c},error:null}}function Om(n){return n}function Fm(n){return n.access_token&&n.refresh_token&&n.expires_in}const Mc=["global","local","others"];var Dm=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class Mm{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=cp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Mc[0]){if(Mc.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mc.join(", ")}`);try{return await bt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(gt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await bt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ji})}catch(r){if(gt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Dm(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await bt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Rm,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(gt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await bt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ji})}catch(t){if(gt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,a,u,c;try{const f={nextPage:null,lastPage:0,total:0},g=await bt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Om});if(g.error)throw g.error;const m=await g.json(),y=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(c=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(A=>{const x=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(A.split(";")[1].split("=")[1]);f[`${k}Page`]=x}),f.total=parseInt(y)),{data:Object.assign(Object.assign({},m),f),error:null}}catch(f){if(gt(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){ha(e);try{return await bt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ji})}catch(t){if(gt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ha(e);try{return await bt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ji})}catch(r){if(gt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){ha(e);try{return await bt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ji})}catch(r){if(gt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ha(e.userId);try{const{data:t,error:r}=await bt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ha(e.userId),ha(e.id);try{return{data:await bt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(gt(t))return{data:null,error:t};throw t}}}function Dd(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Bm(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const da={debug:!!(globalThis&&lp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class up extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Um extends up{}async function $m(n,e,t){da.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),da.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){da.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return await t()}finally{da.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw da.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Um(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(da.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Bm();const qm={url:Xg,storageKey:Qg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:em,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Md(n,e,t){return await t()}const fa={};class Lo{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Lo.nextInstanceID,Lo.nextInstanceID+=1,this.instanceID>0&&$n()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},qm),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Mm({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=cp(i.fetch),this.lock=i.lock||Md,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:$n()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=$m:this.lock=Md,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:lp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dd(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Dd(this.memoryStorage)),$n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=fa[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){fa[this.storageKey]=Object.assign(Object.assign({},fa[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=fa[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){fa[this.storageKey]=Object.assign(Object.assign({},fa[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ip}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=mm(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),$n()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),am(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return gt(t)?{error:t}:{error:new ap("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{const s=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:_i}),{data:a,error:u}=s;if(u||!a)return{data:{user:null,session:null},error:u};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(gt(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,r,i;try{let s;if("email"in e){const{email:g,password:m,options:y}=e;let v=null,A=null;this.flowType==="pkce"&&([v,A]=await ua(this.storage,this.storageKey)),s=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:g,password:m,data:(t=y==null?void 0:y.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:A},xform:_i})}else if("phone"in e){const{phone:g,password:m,options:y}=e;s=await bt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:m,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:_i})}else throw new bl("You must provide either an email or phone number and a password");const{data:a,error:u}=s;if(u||!a)return{data:{user:null,session:null},error:u};const c=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(s){if(gt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:a,options:u}=e;t=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Fd})}else if("phone"in e){const{phone:s,password:a,options:u}=e;t=await bt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Fd})}else throw new bl("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new vl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,i,s,a,u,c,f,g,m,y,v;let A,x;if("message"in e)A=e.message,x=e.signature;else{const{chain:k,wallet:w,statement:I,options:F}=e;let Z;if($n())if(typeof w=="object")Z=w;else{const re=window;if("solana"in re&&typeof re.solana=="object"&&("signIn"in re.solana&&typeof re.solana.signIn=="function"||"signMessage"in re.solana&&typeof re.solana.signMessage=="function"))Z=re.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(F!=null&&F.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Z=w}const ae=new URL((t=F==null?void 0:F.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in Z&&Z.signIn){const re=await Z.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F==null?void 0:F.signInWithSolana),{version:"1",domain:ae.host,uri:ae.href}),I?{statement:I}:null));let G;if(Array.isArray(re)&&re[0]&&typeof re[0]=="object")G=re[0];else if(re&&typeof re=="object"&&"signedMessage"in re&&"signature"in re)G=re;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)A=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),x=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Z)||typeof Z.signMessage!="function"||!("publicKey"in Z)||typeof Z!="object"||!Z.publicKey||!("toBase58"in Z.publicKey)||typeof Z.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${ae.host} wants you to sign in with your Solana account:`,Z.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${ae.href}`,`Issued At: ${(i=(r=F==null?void 0:F.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=F==null?void 0:F.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((a=F==null?void 0:F.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((u=F==null?void 0:F.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((c=F==null?void 0:F.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((f=F==null?void 0:F.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((m=(g=F==null?void 0:F.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||m===void 0)&&m.length?["Resources",...F.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const re=await Z.signMessage(new TextEncoder().encode(A),"utf8");if(!re||!(re instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=re}}try{const{data:k,error:w}=await bt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:fm(x)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:_i});if(w)throw w;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new vl}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:w})}catch(k){if(gt(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const t=await js(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(t??"").split("/");try{const{data:s,error:a}=await bt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:_i});if(await Wi(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new vl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(gt(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:i,access_token:s,nonce:a}=e,u=await bt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:_i}),{data:c,error:f}=u;return f?{data:{user:null,session:null},error:f}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new vl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:f})}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,a;try{if("email"in e){const{email:u,options:c}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await ua(this.storage,this.storageKey));const{error:m}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:u,options:c}=e,{data:f,error:g}=await bt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new bl("You must provide either an email or phone number.")}catch(u){if(gt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:u}=await bt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:_i});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,f=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:f,session:c},error:null}}catch(i){if(gt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await ua(this.storage,this.storageKey)),await bt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Tm})}catch(s){if(gt(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Ki;const{error:i}=await bt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(gt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await bt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:u}=await bt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:u}}throw new bl("You must provide either an email or phone number and a type")}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await js(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Rc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await js(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Dc()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,f,g)=>(!a&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,f,g))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ji}):await this._useSession(async t=>{var r,i,s;const{data:a,error:u}=t;if(u)throw u;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ki}:await bt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ji})})}catch(t){if(gt(t))return sm(t)&&(await this._removeSession(),await Wi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Ki;const a=i.session;let u=null,c=null;this.flowType==="pkce"&&e.email!=null&&([u,c]=await ua(this.storage,this.storageKey));const{data:f,error:g}=await bt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:c}),jwt:a.access_token,xform:Ji});if(g)throw g;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(gt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ki;const t=Date.now()/1e3;let r=t,i=!0,s=null;const{payload:a}=Fc(e.access_token);if(a.exp&&(r=a.exp,i=r<=t),i){const{session:u,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(gt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:u}=t;if(u)throw u;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ki;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(gt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!$n())throw new yl("No browser detected.");if(e.error||e.error_description||e.error_code)throw new yl(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Pd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yl("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Pd("No code detected.");const{data:I,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const Z=new URL(window.location.href);return Z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Z.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:u,expires_at:c,token_type:f}=e;if(!s||!u||!a||!f)throw new yl("No session defined in URL");const g=Math.round(Date.now()/1e3),m=parseInt(u);let y=g+m;c&&(y=parseInt(c));const v=y-g;v*1e3<=va&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${m}s`);const A=y-m;g-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,y,g):g-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,y,g);const{data:x,error:k}=await this._getUser(s);if(k)throw k;const w={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:y,refresh_token:a,token_type:f,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(gt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await js(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:u}=await this.admin.signOut(a,e);if(u&&!(im(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Wi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=gm(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ua(this.storage,this.storageKey,!0));try{return await bt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(gt(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(gt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:i}=await this._useSession(async s=>{var a,u,c,f,g;const{data:m,error:y}=s;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await bt(this.fetch,"GET",v,{headers:this.headers,jwt:(g=(f=m.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return $n()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(gt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)throw a;return await bt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await ym(async i=>(i>0&&await bm(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await bt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_i})),(i,s)=>{const a=200*Math.pow(2,i);return s&&Oc(s)&&Date.now()+a-r<va})}catch(r){if(this._debug(t,"error",r),gt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),$n()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await js(this.storage,this.storageKey);if(i&&this.userStorage){let a=await js(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await ba(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Dc()}else if(i&&!i.user&&!i.user){const a=await js(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Wi(this.storage,this.storageKey+"-user"),await ba(this.storage,this.storageKey,i)):i.user=Dc()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Rc;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Rc}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),Oc(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:u}=await this._getUser(i.access_token);!u&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Ki;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Kl;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Ki;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={session:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(i,"error",s),gt(s)){const a={session:null,error:s};return Oc(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(c){s.push(c)}});if(await Promise.all(a),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await ba(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=Rd(i);await ba(this.storage,this.storageKey,s)}else{const i=Rd(t);await ba(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Wi(this.storage,this.storageKey),await Wi(this.storage,this.storageKey+"-code-verifier"),await Wi(this.storage,this.storageKey+"-user"),this.userStorage&&await Wi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$n()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),va);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/va);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${va}ms, refresh threshold is ${hu} ticks`),i<=hu&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof up)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$n()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const i=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await ua(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await bt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:a}=t;if(a)return{data:null,error:a};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:f}=await bt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(gt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:a,error:u}=await bt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:u})})}catch(t){if(gt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await bt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(gt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),s=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Fc(i.access_token);let u=null;a.aal&&(u=a.aal);let c=u;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const g=a.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+rm>i)return r;const{data:s,error:a}=await bt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:v,error:A}=await this.getSession();if(A||!v.session)return{data:null,error:A};r=v.session.access_token}const{header:i,payload:s,signature:a,raw:{header:u,payload:c}}=Fc(r);t!=null&&t.allowExpired||km(s.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!f){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:s,header:i,signature:a},error:null}}const g=Lm(i.alg),m=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,m,a,dm(`${u}.${c}`)))throw new pu("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(gt(r))return{data:null,error:r};throw r}}}Lo.nextInstanceID=0;const zm=Lo;class Wm extends zm{constructor(e){super(e)}}var Vm=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(g){try{f(r.next(g))}catch(m){a(m)}}function c(g){try{f(r.throw(g))}catch(m){a(m)}}function f(g){g.done?s(g.value):i(g.value).then(u,c)}f((r=r.apply(n,e||[])).next())})};class Hm{constructor(e,t,r){var i,s,a;this.supabaseUrl=e,this.supabaseKey=t;const u=Zg(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,f={db:$g,realtime:zg,auth:Object.assign(Object.assign({},qg),{storageKey:c}),global:Ug},g=Yg(r??{},f);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=g.global.headers)!==null&&s!==void 0?s:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=g.auth)!==null&&a!==void 0?a:{},this.headers,g.global.fetch),this.fetch=Gg(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new og(new URL("rest/v1",u).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new Dg(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new B2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Vm(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:u,lock:c,debug:f},g,m){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Wm({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),g),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:u,lock:c,debug:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new jg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Gm=(n,e,t)=>new Hm(n,e,t);function Km(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Km()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");class nr{static isConfigured(){return!0}static getClient(){if(!this.client){const e="https://twmvkaybwgdeqkojtrul.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR3bXZrYXlid2dkZXFrb2p0cnVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5NTE4NDksImV4cCI6MjA3NTUyNzg0OX0.JJmw0YdaLUDe6fyDicimpRHdA1wRxV1sX798dYfkugs";this.client=Gm(e,t,{auth:{persistSession:!1}})}return this.client}static async listVideos(){const{data:e,error:t}=await this.getClient().from("videos").select("*").eq("is_active",!0).order("created_at",{ascending:!1});if(t)throw t;return e||[]}static async listVideoSources(e){const{data:t,error:r}=await this.getClient().from("video_sources").select("id,video_id,source_file_id,thumbnail_file_id,position").eq("video_id",e).order("position",{ascending:!0});if(r)throw r;return t||[]}static async addVideoSource(e,t,r,i=1){const{data:s,error:a}=await this.getClient().from("video_sources").insert({video_id:e,source_file_id:t,thumbnail_file_id:r||null,position:i}).select("*").single();if(a)throw a;return s}static async updateVideoSource(e,t){const{data:r,error:i}=await this.getClient().from("video_sources").update(t).eq("id",e).select("*").single();if(i)throw i;return r}static async deleteVideoSource(e){const{error:t}=await this.getClient().from("video_sources").delete().eq("id",e);if(t)throw t;return!0}static async getVideo(e){const{data:t,error:r}=await this.getClient().from("videos").select("*").eq("id",e).maybeSingle();if(r)throw r;return t??null}static async incrementViews(e){var r;const{error:t}=await this.getClient().rpc("increment",{table_name:"videos",row_id:e,column_name:"views"});t&&await this.getClient().from("videos").update({views:((r=await this.getVideo(e))==null?void 0:r.views)+1}).eq("id",e)}static async createVideo(e){const{data:t,error:r}=await this.getClient().from("videos").insert(e).select("*").single();if(r)throw r;return t}static async updateVideo(e,t){const{data:r,error:i}=await this.getClient().from("videos").update(t).eq("id",e).select("*").single();if(i)throw i;return r}static async deleteVideo(e){const{error:t}=await this.getClient().from("videos").delete().eq("id",e);if(t)throw t;return!0}static async getRelatedVideoIds(e){const{data:t,error:r}=await this.getClient().from("video_relations").select("related_video_id").eq("video_id",e);if(r)throw r;return(t||[]).map(i=>i.related_video_id)}static async setRelatedVideos(e,t){const r=this.getClient(),{error:i}=await r.from("video_relations").delete().eq("video_id",e);if(i)throw i;if(t.length===0)return;const s=t.map(u=>({video_id:e,related_video_id:u})),{error:a}=await r.from("video_relations").insert(s);if(a)throw a}static async getSiteConfig(){const{data:e,error:t}=await this.getClient().from("site_config").select("*").limit(1).maybeSingle();if(t)throw t;return e??null}static async updateSiteConfig(e){const t=this.getClient(),r=await this.getSiteConfig();if(r){const{error:i}=await t.from("site_config").update({...e,updated_at:new Date().toISOString()}).eq("id",r.id);if(i)throw i}else{const{error:i}=await t.from("site_config").insert({...e,updated_at:new Date().toISOString()});if(i)throw i}}static async listUsers(){const{data:e,error:t}=await this.getClient().from("users").select("id,email,name,role,created_at").order("created_at",{ascending:!1});if(t)throw t;return e||[]}static async createUser(e){const{error:t}=await this.getClient().from("users").insert({...e,role:e.role||"admin"});if(t)throw t}static async updateUser(e,t){const{error:r}=await this.getClient().from("users").update(t).eq("id",e);if(r)throw r}static async deleteUser(e){const{error:t}=await this.getClient().from("users").delete().eq("id",e);if(t)throw t}}Or(nr,"client",null);const hp=R.createContext({siteName:"VideosPlus",paypalClientId:"",paypalMeUsername:"",stripePublishableKey:"",stripeSecretKey:"",telegramUsername:"",videoListTitle:"Available Videos",cryptoWallets:[],emailHost:"smtp.gmail.com",emailPort:"587",emailSecure:!1,emailUser:"",emailPass:"",emailFrom:"",wasabiConfig:{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""},siteConfig:null,loading:!1,error:null,refreshConfig:async()=>{},updateConfig:async()=>{}}),Jm=({children:n})=>{const[e,t]=R.useState(null),[r,i]=R.useState(!0),[s,a]=R.useState(null),u=m=>({$id:"site-config",site_name:m.siteName,paypal_client_id:m.paypalClientId,paypal_me_username:m.paypalMeUsername,stripe_publishable_key:m.stripePublishableKey,stripe_secret_key:m.stripeSecretKey,telegram_username:m.telegramUsername,video_list_title:m.videoListTitle,crypto:m.crypto,email_host:m.emailHost,email_port:m.emailPort,email_secure:m.emailSecure,email_user:m.emailUser,email_pass:m.emailPass,email_from:m.emailFrom,wasabi_config:m.wasabiConfig}),c=async()=>{var m,y,v,A,x,k;try{i(!0),a(null);let w=null;if(nr.isConfigured())try{const I=await nr.getSiteConfig();I&&(w={siteName:I.site_name||"VideosPlus",paypalClientId:I.paypal_client_id||"",paypalMeUsername:I.paypal_me_username||"",stripePublishableKey:I.stripe_publishable_key||"",stripeSecretKey:I.stripe_secret_key||"",telegramUsername:I.telegram_username||"",videoListTitle:I.video_list_title||"Available Videos",crypto:I.crypto||[],emailHost:((m=I.email)==null?void 0:m.host)||"smtp.gmail.com",emailPort:((y=I.email)==null?void 0:y.port)||"587",emailSecure:((v=I.email)==null?void 0:v.secure)||!1,emailUser:((A=I.email)==null?void 0:A.user)||"",emailPass:((x=I.email)==null?void 0:x.pass)||"",emailFrom:((k=I.email)==null?void 0:k.from)||"",wasabiConfig:I.wasabi_config||{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""}})}catch(I){console.warn("Failed to load config from Supabase, falling back",I)}if(w){const I=u(w);t(I)}else t({$id:"site-config",site_name:"VideosPlus",paypal_client_id:"",paypal_me_username:"",stripe_publishable_key:"",stripe_secret_key:"",telegram_username:"",video_list_title:"Available Videos",crypto:[],email_host:"smtp.gmail.com",email_port:"587",email_secure:!1,email_user:"",email_pass:"",email_from:"",wasabi_config:{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""}})}catch(w){console.error("Error fetching site config:",w),a("Failed to load site configuration")}finally{i(!1)}},f=async m=>{try{if(i(!0),a(null),nr.isConfigured()){const y={site_name:m.siteName,paypal_client_id:m.paypalClientId,paypal_me_username:m.paypalMeUsername,stripe_publishable_key:m.stripePublishableKey,stripe_secret_key:m.stripeSecretKey,telegram_username:m.telegramUsername,video_list_title:m.videoListTitle,crypto:m.crypto,email:{host:m.emailHost,port:m.emailPort,secure:m.emailSecure,user:m.emailUser,pass:m.emailPass,from:m.emailFrom},wasabi_config:m.wasabiConfig};await nr.updateSiteConfig(y),await c()}else{const v={...await xd.getSiteConfig(),...m};await xd.updateSiteConfig(v);const A=u(v);t(A)}}catch(y){throw console.error("Error updating site config:",y),a("Failed to update site configuration"),y}finally{i(!1)}};R.useEffect(()=>{c()},[]);const g={siteName:(e==null?void 0:e.site_name)||"VideosPlus",paypalClientId:(e==null?void 0:e.paypal_client_id)||"",paypalMeUsername:(e==null?void 0:e.paypal_me_username)||"",stripePublishableKey:(e==null?void 0:e.stripe_publishable_key)||"",stripeSecretKey:(e==null?void 0:e.stripe_secret_key)||"",telegramUsername:(e==null?void 0:e.telegram_username)||"",videoListTitle:(e==null?void 0:e.video_list_title)||"Available Videos",cryptoWallets:(e==null?void 0:e.crypto)||[],emailHost:(e==null?void 0:e.email_host)||"smtp.gmail.com",emailPort:(e==null?void 0:e.email_port)||"587",emailSecure:(e==null?void 0:e.email_secure)||!1,emailUser:(e==null?void 0:e.email_user)||"",emailPass:(e==null?void 0:e.email_pass)||"",emailFrom:(e==null?void 0:e.email_from)||"",wasabiConfig:(e==null?void 0:e.wasabi_config)||{accessKey:"",secretKey:"",region:"",bucket:"",endpoint:""},siteConfig:e,loading:r,error:s,refreshConfig:c,updateConfig:f};return l.jsx(hp.Provider,{value:g,children:n})},En=()=>R.useContext(hp);var zu={},Bc={};const Ym=Lf(t0);var Bd;function St(){return Bd||(Bd=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=Ym}(Bc)),Bc}var Zm=_t;Object.defineProperty(zu,"__esModule",{value:!0});var Co=zu.default=void 0,Xm=Zm(St()),Qm=l;Co=zu.default=(0,Xm.default)((0,Qm.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var Wu={},e5=_t;Object.defineProperty(Wu,"__esModule",{value:!0});var dp=Wu.default=void 0,t5=e5(St()),r5=l;dp=Wu.default=(0,t5.default)((0,r5.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness4");var Vu={},n5=_t;Object.defineProperty(Vu,"__esModule",{value:!0});var fp=Vu.default=void 0,i5=n5(St()),s5=l;fp=Vu.default=(0,i5.default)((0,s5.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"Brightness7");var Hu={},a5=_t;Object.defineProperty(Hu,"__esModule",{value:!0});var pp=Hu.default=void 0,o5=a5(St()),l5=l;pp=Hu.default=(0,o5.default)((0,l5.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");var Gu={},c5=_t;Object.defineProperty(Gu,"__esModule",{value:!0});var gp=Gu.default=void 0,u5=c5(St()),h5=l;gp=Gu.default=(0,u5.default)((0,h5.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");const d5=()=>{const{mode:n,toggleTheme:e}=R.useContext(Uf),{user:t,logout:r,isAuthenticated:i}=ss(),{siteName:s}=En(),a=xn(),u=Ia(),c=bf(u.breakpoints.down("md")),[f,g]=R.useState(""),m=async()=>{try{await r()}catch(x){console.error("Error during logout:",x),localStorage.removeItem("sessionToken"),window.location.reload()}},y=x=>{x.preventDefault(),f.trim()&&a(`/videos?search=${encodeURIComponent(f.trim())}`)},v=x=>{g(x.target.value)},A=i&&t;return l.jsx(r0,{position:"sticky",sx:{bgcolor:n==="dark"?"#0A0A0A":"#121212",color:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:l.jsxs(n0,{children:[l.jsxs(te,{component:mo,to:"/",sx:{flexGrow:1,textDecoration:"none",color:"inherit",display:"flex",alignItems:"center"},children:[l.jsx(te,{sx:{display:"flex",alignItems:"center",background:"linear-gradient(to right, #8e24aa 0%, #6a1b9a 100%)",borderRadius:"8px",px:1.5,py:.5,mr:1,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},children:l.jsxs(ge,{variant:"h6",sx:{fontWeight:700,letterSpacing:"0.5px",fontFamily:"'Montserrat', sans-serif",fontSize:{xs:"0.9rem",sm:"1.1rem"},color:"white"},children:[s.split(" ")[0],l.jsx(te,{component:"span",sx:{color:"white",fontWeight:400,ml:.5},children:s.split(" ").slice(1).join(" ")})]})}),l.jsx(Gt,{label:"18+",size:"small",sx:{ml:1,bgcolor:"#8e24aa",color:"white",fontWeight:"bold",height:"22px",fontSize:"0.7rem"}})]}),!c&&l.jsx(te,{component:"form",onSubmit:y,sx:{display:"flex",alignItems:"center",mx:1,minWidth:"200px",maxWidth:"250px"},children:l.jsx(Lt,{placeholder:"Search...",size:"small",value:f,onChange:v,sx:{flexGrow:1,"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"#fff",height:"36px",fontSize:"0.85rem","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:"1px"},"&:hover fieldset":{borderColor:"rgba(142, 36, 170, 0.4)"},"&.Mui-focused fieldset":{borderColor:"#8e24aa",borderWidth:"1px"}},"& .MuiInputBase-input":{padding:"8px 12px","&::placeholder":{color:"rgba(255, 255, 255, 0.6)",opacity:1,fontSize:"0.85rem"}}},InputProps:{startAdornment:l.jsx(yf,{position:"start",sx:{ml:1},children:l.jsx(Co,{sx:{color:"rgba(255, 255, 255, 0.6)",fontSize:"18px"}})})}})}),l.jsxs(te,{sx:{display:"flex",alignItems:"center"},children:[l.jsx(He,{color:"inherit",component:mo,to:"/",sx:{mr:1,color:"#fff",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},children:"Home"}),l.jsx(He,{color:"inherit",component:mo,to:"/videos",sx:{mr:1,color:"#fff",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},children:"Videos"}),c&&l.jsx(bn,{color:"inherit",onClick:()=>a("/videos"),sx:{mr:1,color:"#fff","&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},"aria-label":"search",children:l.jsx(Co,{})}),A&&l.jsxs(l.Fragment,{children:[l.jsx(He,{color:"inherit",component:mo,to:"/admin",startIcon:l.jsx(gp,{}),sx:{mr:1,color:"#fff",fontWeight:600,"&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},children:"Admin"}),l.jsx(bn,{color:"inherit",onClick:m,sx:{color:"#fff","&:hover":{bgcolor:"rgba(255, 15, 80, 0.1)"}},"aria-label":"logout",children:l.jsx(pp,{})})]}),l.jsx(bn,{color:"inherit",onClick:e,sx:{ml:1,color:"#8e24aa","&:hover":{bgcolor:"rgba(142, 36, 170, 0.1)"}},"aria-label":"toggle theme",children:n==="dark"?l.jsx(fp,{}):l.jsx(dp,{})})]})]})})};var Ku={},f5=_t;Object.defineProperty(Ku,"__esModule",{value:!0});var Ju=Ku.default=void 0,p5=f5(St()),g5=l;Ju=Ku.default=(0,p5.default)((0,g5.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");var Yu={},m5=_t;Object.defineProperty(Yu,"__esModule",{value:!0});var mp=Yu.default=void 0,v5=m5(St()),b5=l;mp=Yu.default=(0,v5.default)((0,b5.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock");var Zu={},y5=_t;Object.defineProperty(Zu,"__esModule",{value:!0});var Po=Zu.default=void 0,w5=y5(St()),x5=l;Po=Zu.default=(0,w5.default)((0,x5.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const _5=()=>{const n=new Date().getFullYear(),e=Ia(),{siteName:t}=En(),r=xn(),[i,s]=R.useState(!1),[a,u]=R.useState({projectId:"",apiKey:""}),c=()=>{r("/login")};R.useEffect(()=>{const g=m=>{m.ctrlKey&&m.altKey&&m.key==="s"&&(s(!0),setTimeout(()=>s(!1),1e4))};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[]),R.useEffect(()=>{u({projectId:"",apiKey:""})},[]);const f=()=>{const g=prompt("Digite o Access Key do Wasabi:"),m=prompt("Digite a Secret Key do Wasabi:");g&&m&&(localStorage.setItem("wasabi-config",JSON.stringify({projectId:g,apiKey:m})),u({projectId:g,apiKey:m}),alert("Credenciais salvas com sucesso!"))};return l.jsxs(te,{component:"footer",sx:{py:5,bgcolor:e.palette.mode==="dark"?"#0A0A0A":"#121212",borderTop:`1px solid ${e.palette.mode==="dark"?"rgba(255,15,80,0.2)":"rgba(255,15,80,0.3)"}`,color:"#fff",mt:6},children:[l.jsxs(te,{sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",p:2,mb:4,borderRadius:1,display:"flex",alignItems:"center",maxWidth:1200,mx:"auto"},children:[l.jsx(Ju,{sx:{color:"#8e24aa",mr:2}}),l.jsxs(ge,{variant:"body2",sx:{color:"white"},children:[l.jsx("strong",{children:"AGE VERIFICATION NOTICE:"})," This website contains adult content and is intended for adults aged 18 years or older. By entering this site, you confirm that you are at least 18 years old and agree to our terms and conditions."]})]}),l.jsxs(yn,{children:[l.jsxs(Ze,{container:!0,spacing:4,children:[l.jsx(Ze,{item:!0,xs:12,md:4,children:l.jsxs(te,{sx:{mb:3},children:[l.jsx(ge,{variant:"h6",sx:{color:"#8e24aa",fontWeight:"bold",mb:2},children:t}),l.jsx(ge,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:"We offer exclusive premium adult content for our users. All videos are carefully selected to ensure the highest quality viewing experience for our 18+ audience."})]})}),l.jsxs(Ze,{item:!0,xs:12,md:4,children:[l.jsx(ge,{variant:"h6",sx:{color:"#8e24aa",fontWeight:"bold",mb:2},children:"Quick Links"}),l.jsxs(te,{sx:{display:"flex",flexDirection:"column"},children:[l.jsx(nd,{href:"/",underline:"hover",sx:{mb:1.5,color:"rgba(255,255,255,0.7)","&:hover":{color:"#8e24aa"}},children:"Home"}),l.jsx(nd,{href:"/videos",underline:"hover",sx:{mb:1.5,color:"rgba(255,255,255,0.7)","&:hover":{color:"#8e24aa"}},children:"Videos"}),l.jsx(te,{sx:{display:"flex",alignItems:"center",color:"#8e24aa",mt:1,background:"rgba(142,36,170,0.1)",px:1.5,py:.5,borderRadius:1,width:"fit-content"},children:l.jsx(ge,{variant:"body2",fontWeight:"bold",children:"18+ ADULTS ONLY"})})]})]}),l.jsxs(Ze,{item:!0,xs:12,md:4,children:[l.jsx(ge,{variant:"h6",sx:{color:"#8e24aa",fontWeight:"bold",mb:2},children:"Legal Information"}),l.jsx(ge,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},paragraph:!0,children:"This website contains adult-oriented material intended for individuals 18 years of age or older. All models appearing on this website were 18 years of age or older at the time of production."}),l.jsx(ge,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)"},paragraph:!0,children:"USC 2257 Record-Keeping Requirements Compliance Statement"})]})]}),l.jsx(La,{sx:{my:4,borderColor:"rgba(255,255,255,0.1)"}}),l.jsxs(te,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},alignItems:"center",justifyContent:"space-between"},children:[l.jsxs(ge,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)"},children:["© ",n," ",t,". All rights reserved. Adults only."]}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",mt:{xs:2,md:0}},children:[l.jsx(ge,{variant:"body2",sx:{color:"rgba(255,255,255,0.5)",mr:2},children:"By accessing this site you agree that you are at least 18 years old"}),l.jsx(He,{variant:"contained",size:"small",startIcon:l.jsx(mp,{}),onClick:c,sx:{bgcolor:"#8e24aa","&:hover":{bgcolor:"#6a1b9a"}},children:"Admin"}),i&&l.jsx(He,{variant:"outlined",size:"small",startIcon:l.jsx(Po,{}),onClick:f,sx:{ml:1,borderColor:"#8e24aa",color:"#8e24aa","&:hover":{borderColor:"#6a1b9a",color:"#6a1b9a"}},children:"Config"})]})]})]})]})},S5=()=>{var A;const[n,e]=R.useState(""),[t,r]=R.useState(""),i=Ia(),{login:s,loading:a,error:u,user:c,isAuthenticated:f}=ss(),g=xn(),y=((A=oi().state)==null?void 0:A.from)||"/admin";R.useEffect(()=>{f&&c&&g(y,{replace:!0})},[f,c,g,y]);const v=async x=>{x.preventDefault(),await s(n,t,y)};return l.jsx(yn,{maxWidth:"sm",sx:{py:8},children:l.jsxs(Nr,{elevation:3,sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center",bgcolor:i.palette.background.paper},children:[l.jsx(ge,{variant:"h4",component:"h1",gutterBottom:!0,children:"Login"}),u&&l.jsx(Vt,{severity:"error",sx:{width:"100%",mb:2},children:u}),l.jsxs(te,{component:"form",onSubmit:v,sx:{width:"100%"},children:[l.jsx(Lt,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",autoFocus:!0,value:n,onChange:x=>e(x.target.value),disabled:a}),l.jsx(Lt,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Senha",type:"password",id:"password",autoComplete:"current-password",value:t,onChange:x=>r(x.target.value),disabled:a}),l.jsx(He,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,mb:2},disabled:a,children:a?l.jsx(sn,{size:24}):"Entrar"})]})]})})},j5=({children:n})=>{const{user:e,loading:t,isAuthenticated:r,checkSession:i,sessionCheckedAt:s}=ss(),[a,u]=R.useState(!0),[c,f]=R.useState(null),g=oi();return R.useEffect(()=>{let m=!0;return(async()=>{if(m){u(!0),f(null);try{Date.now()-s>1e4&&await i()}catch(v){console.error("Error verifying session:",v),m&&f("Erro ao verificar autenticação. Por favor, faça login novamente.")}finally{m&&u(!1)}}})(),()=>{m=!1}},[g.pathname,i,s]),t||a?l.jsxs(te,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},children:[l.jsx(sn,{size:40}),l.jsx(ge,{variant:"body1",sx:{mt:2},children:"Verificando autenticação..."})]}):c?l.jsxs(te,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",p:2},children:[l.jsx(Vt,{severity:"error",sx:{mb:2,width:"100%",maxWidth:500},children:c}),l.jsx(He,{variant:"contained",color:"primary",onClick:()=>{localStorage.removeItem("sessionToken"),window.location.href="/login"},children:"Ir para login"})]}):!e||!r?l.jsx(f2,{to:"/login",replace:!0,state:{from:g.pathname}}):l.jsx(l.Fragment,{children:n})};var Xu={},A5=_t;Object.defineProperty(Xu,"__esModule",{value:!0});var vp=Xu.default=void 0,k5=A5(St()),L5=l;vp=Xu.default=(0,k5.default)((0,L5.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList");var Qu={},C5=_t;Object.defineProperty(Qu,"__esModule",{value:!0});var Ns=Qu.default=void 0,P5=C5(St()),I5=l;Ns=Qu.default=(0,P5.default)((0,I5.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility");var eh={},N5=_t;Object.defineProperty(eh,"__esModule",{value:!0});var Es=eh.default=void 0,E5=N5(St()),Ud=l;Es=eh.default=(0,E5.default)([(0,Ud.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,Ud.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");var th={},T5=_t;Object.defineProperty(th,"__esModule",{value:!0});var ts=th.default=void 0;F5(R);var R5=T5(St()),O5=l;function bp(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(bp=function(r){return r?t:e})(n)}function F5(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=bp(e);if(t&&t.has(n))return t.get(n);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in n)if(s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)){var a=i?Object.getOwnPropertyDescriptor(n,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=n[s]}return r.default=n,t&&t.set(n,r),r}ts=th.default=(0,R5.default)((0,O5.jsx)("path",{d:"M9.78 18.65l.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42z"}),"Telegram");var rh={},D5=_t;Object.defineProperty(rh,"__esModule",{value:!0});var nh=rh.default=void 0,M5=D5(St()),B5=l;nh=rh.default=(0,M5.default)((0,B5.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"CreditCard");var ji=(n=>(n.NEWEST="newest",n.PRICE_ASC="price_asc",n.PRICE_DESC="price_desc",n.VIEWS_DESC="views_desc",n.DURATION_DESC="duration_desc",n))(ji||{});class zt{static clearCache(){this.videosCache=null,this.cacheTimestamp=0,console.log("Video cache cleared")}static clearCachePublic(){this.clearCache()}static async forceRefreshCache(){return this.clearCache(),await this.getAllVideos()}static isCacheValid(){return this.videosCache!==null&&this.cacheTimestamp>0&&Date.now()-this.cacheTimestamp<this.CACHE_DURATION}static convertVideoData(e){let t="00:00";if(typeof e.duration=="string")t=e.duration;else if(typeof e.duration=="number"){const r=e.duration,i=Math.floor(r/60),s=r%60;if(i<60)t=`${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;else{const a=Math.floor(i/60),u=i%60;t=`${a.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}}return{$id:e.id,title:e.title,description:e.description,price:e.price,duration:t,videoFileId:e.videoFileId,video_id:e.videoFileId,thumbnailFileId:e.thumbnailFileId,thumbnail_id:e.thumbnailFileId,thumbnailUrl:e.thumbnailUrl,isPurchased:e.isPurchased||!1,createdAt:e.createdAt,views:e.views,product_link:e.productLink||""}}static async getVideoIds(e="newest"){try{console.log("Getting video IDs only (fast operation)");const r=(await nr.listVideos()).map(s=>({$id:s.id,title:s.title,price:Number(s.price||0),createdAt:s.created_at,views:s.views||0,duration:s.duration||"00:00"}));return this.sortVideos(r,e).map(s=>s.$id)}catch(t){return console.error("Error getting video IDs:",t),[]}}static async getAllVideos(e="newest",t=""){try{if(!t&&this.isCacheValid())return console.log("Usando cache de vídeos"),this.sortVideos([...this.videosCache],e);console.log("Buscando vídeos no Supabase (metadados)");let i=(await nr.listVideos()).map(s=>({$id:s.id,title:s.title,description:s.description||"",price:Number(s.price||0),duration:s.duration||"00:00",videoFileId:s.video_file_id||void 0,video_id:s.video_file_id||void 0,thumbnailFileId:s.thumbnail_file_id||void 0,thumbnail_id:s.thumbnail_file_id||void 0,thumbnailUrl:s.thumbnail_url||void 0,isPurchased:!1,createdAt:s.created_at,views:s.views||0,product_link:s.product_link||""}));if(t&&t.trim()!==""){const s=t.trim().toLowerCase();i=i.filter(a=>a.title.toLowerCase().includes(s)||a.description.toLowerCase().includes(s))}for(const s of i){const a=s.thumbnailFileId||s.thumbnail_id;if(a)try{s.thumbnailUrl=await In.getThumbnailUrl(a)}catch(u){console.error(`Erro ao obter miniatura para o vídeo ${s.$id}:`,u),s.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+"}else s.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+"}return t||(this.videosCache=[...i],this.cacheTimestamp=Date.now(),console.log("Cache atualizado com",i.length,"vídeos")),this.sortVideos(i,e)}catch(r){throw console.error("Erro ao obter vídeos:",r),r}}static sortVideos(e,t){switch(t){case"newest":return e.sort((r,i)=>new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime());case"price_asc":return e.sort((r,i)=>r.price-i.price);case"price_desc":return e.sort((r,i)=>i.price-r.price);case"views_desc":return e.sort((r,i)=>(i.views||0)-(r.views||0));case"duration_desc":return e.sort((r,i)=>{const s=a=>{try{const u=a.split(":").map(Number);if(u.length===2)return u[0]*60+u[1];if(u.length===3)return u[0]*3600+u[1]*60+u[2]}catch(u){console.error("Erro ao analisar duração:",u)}return 0};return s(i.duration)-s(r.duration)});default:return e}}static async getVideo(e){try{console.log(`Getting video ${e} from Supabase`);const t=await nr.getVideo(e);if(!t)return null;const r={$id:t.id,title:t.title,description:t.description||"",price:Number(t.price||0),duration:t.duration||"00:00",videoFileId:t.video_file_id||void 0,video_id:t.video_file_id||void 0,thumbnailFileId:t.thumbnail_file_id||void 0,thumbnail_id:t.thumbnail_file_id||void 0,thumbnailUrl:t.thumbnail_url||void 0,isPurchased:!1,createdAt:t.created_at,views:t.views||0,product_link:t.product_link||""};try{const s=await nr.listVideoSources(r.$id);r.previewSources=s.slice(0,3)}catch(s){console.warn("Could not load video sources for preview:",s)}const i=r.thumbnailFileId||r.thumbnail_id;return i&&In.getThumbnailUrl(i).then(s=>{r.thumbnailUrl=s,console.log(`Thumbnail loaded for video ${r.$id}`)}).catch(s=>{console.error(`Error getting thumbnail for video ${r.$id}:`,s),r.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+"}),r.thumbnailUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjE4MCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+",console.log(`Video ${e} loaded successfully`),r}catch(t){return console.error(`Error getting video ${e}:`,t),null}}static async incrementViews(e){try{await nr.incrementViews(e)}catch(t){console.error(`Error incrementing views for video ${e}:`,t)}}static async getVideosWithPagination(e=1,t=12,r="newest",i=""){try{const s=await this.getAllVideos(r,i),a=Math.ceil(s.length/t),u=(e-1)*t,c=u+t;return{videos:s.slice(u,c),totalPages:a}}catch(s){throw console.error("Error getting paginated videos:",s),s}}static async getVideoFileUrl(e){try{console.log(`Getting video file URL for video ${e}`);const t=await this.getVideo(e);if(!t)return console.error(`Video ${e} not found`),null;const r=t.video_id||t.videoFileId;if(!r)return console.error(`Video ${e} has no video file ID (checked both video_id and videoFileId)`),null;console.log(`Attempting to get file URL for video ID: ${r}`);try{const i=await In.getFileUrl(r);return console.log(`Video URL obtained: ${i}`),i}catch(i){return console.error("Error getting file URL:",i),console.error(`Video File ID: ${r}`),null}}catch(t){return console.error(`Error getting video file URL for ${e}:`,t),null}}static async getFileUrlById(e){try{return await In.getFileUrl(e)}catch(t){return console.error("Error getting file URL by id:",t),null}}static async getVideoSources(e){try{return await nr.listVideoSources(e)}catch(t){return console.error("Error getting video sources:",t),[]}}static async createVideo(e){try{this.clearCache();{const t=await nr.createVideo({title:e.title,description:e.description,price:e.price,duration:e.duration.toString(),video_file_id:e.videoFileId,thumbnail_file_id:e.thumbnailFileId,product_link:e.productLink||"",is_active:!0,views:0,thumbnail_url:null});return await this.forceRefreshCache(),{$id:t.id,title:t.title,description:t.description||"",price:Number(t.price||0),duration:t.duration||"00:00",videoFileId:t.video_file_id||void 0,video_id:t.video_file_id||void 0,thumbnailFileId:t.thumbnail_file_id||void 0,thumbnail_id:t.thumbnail_file_id||void 0,thumbnailUrl:t.thumbnail_url||void 0,isPurchased:!1,createdAt:t.created_at,views:t.views||0,product_link:t.product_link||""}}}catch(t){return console.error("Error creating video:",t),null}}static async updateVideo(e,t){try{this.clearCache();{const r={title:t.title,description:t.description,price:t.price,duration:t.duration?t.duration.toString():void 0,video_file_id:t.videoFileId,thumbnail_file_id:t.thumbnailFileId,product_link:t.productLink};Object.keys(r).forEach(s=>r[s]===void 0&&delete r[s]);const i=await nr.updateVideo(e,r);return await this.forceRefreshCache(),{$id:i.id,title:i.title,description:i.description||"",price:Number(i.price||0),duration:i.duration||"00:00",videoFileId:i.video_file_id||void 0,video_id:i.video_file_id||void 0,thumbnailFileId:i.thumbnail_file_id||void 0,thumbnail_id:i.thumbnail_file_id||void 0,thumbnailUrl:i.thumbnail_url||void 0,isPurchased:!1,createdAt:i.created_at,views:i.views||0,product_link:i.product_link||""}}}catch(r){return console.error("Error updating video:",r),null}}static async deleteVideo(e){try{this.clearCache();const t=await this.getVideo(e);if(t){const i=t.video_id||t.videoFileId,s=t.thumbnail_id||t.thumbnailFileId;i&&await In.deleteFile(i),s&&await In.deleteFile(s)}const r=await nr.deleteVideo(e);return r&&await this.forceRefreshCache(),r}catch(t){return console.error("Error deleting video:",t),!1}}}Or(zt,"videosCache",null),Or(zt,"cacheTimestamp",0),Or(zt,"CACHE_DURATION",30*1e3);var yp="basil",U5=function(e){return e===3?"v3":e},wp="https://js.stripe.com",$5="".concat(wp,"/").concat(yp,"/stripe.js"),q5=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,z5=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var W5=function(e){return q5.test(e)||z5.test(e)},V5=function(){for(var e=document.querySelectorAll('script[src^="'.concat(wp,'"]')),t=0;t<e.length;t++){var r=e[t];if(W5(r.src))return r}return null},$d=function(e){var t="",r=document.createElement("script");r.src="".concat($5).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},H5=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.4.0",startTime:t})},ho=null,wl=null,xl=null,G5=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},K5=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},J5=function(e){return ho!==null?ho:(ho=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var i=V5();if(!(i&&e)){if(!i)i=$d(e);else if(i&&xl!==null&&wl!==null){var s;i.removeEventListener("load",xl),i.removeEventListener("error",wl),(s=i.parentNode)===null||s===void 0||s.removeChild(i),i=$d(e)}}xl=K5(t,r),wl=G5(r),i.addEventListener("load",xl),i.addEventListener("error",wl)}catch(a){r(a);return}}),ho.catch(function(t){return ho=null,Promise.reject(t)}))},Y5=function(e,t,r){if(e===null)return null;var i=t[0],s=i.match(/^pk_test/),a=U5(e.version),u=yp;s&&a!==u&&console.warn("Stripe.js@".concat(a," was loaded on the page, but @stripe/stripe-js@").concat("7.4.0"," expected Stripe.js@").concat(u,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=e.apply(void 0,t);return H5(c,r),c},fo,xp=!1,_p=function(){return fo||(fo=J5(null).catch(function(e){return fo=null,Promise.reject(e)}),fo)};Promise.resolve().then(function(){return _p()}).catch(function(n){xp||console.warn(n)});var Z5=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];xp=!0;var i=Date.now();return _p().then(function(s){return Y5(s,t,i)})};const X5=()=>window.location.origin,qd=X5(),Q5=async(n,e="usd",t,r,i)=>{console.log("Creating Stripe checkout session:",{amount:Math.round(n*100),currency:e,name:t,success_url:r,cancel_url:i,apiUrl:qd});const s=`${qd}/api/create-checkout-session`;console.log("Making request to:",s);const a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Math.round(n*100),currency:e,name:t,success_url:r,cancel_url:i})});if(!a.ok){const u=await a.json().catch(()=>({}));throw console.error("Failed to create checkout session:",{status:a.status,statusText:a.statusText,errorData:u,url:s}),new Error(`Failed to create checkout session: ${a.status} ${a.statusText}`)}return a.json()};class si{static initStripe(e){return this.stripeInstance||(this.stripeInstance=Z5(e)),this.stripeInstance}static async createCheckoutSession(e,t="usd",r,i,s){try{return(await Q5(e,t,r,i,s)).sessionId}catch(a){throw console.error("Error creating checkout session:",a),a}}static async redirectToCheckout(e){const t=await this.stripeInstance;if(!t)throw new Error("Stripe has not been initialized");const{error:r}=await t.redirectToCheckout({sessionId:e});if(r)throw console.error("Error redirecting to checkout:",r),r}}Or(si,"stripeInstance",null);var ih={},ev=_t;Object.defineProperty(ih,"__esModule",{value:!0});var Sp=ih.default=void 0,tv=ev(St()),rv=l;Sp=ih.default=(0,tv.default)((0,rv.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");var sh={},nv=_t;Object.defineProperty(sh,"__esModule",{value:!0});var jp=sh.default=void 0,iv=nv(St()),sv=l;jp=sh.default=(0,iv.default)((0,sv.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");var ah={},av=_t;Object.defineProperty(ah,"__esModule",{value:!0});var Ap=ah.default=void 0,ov=av(St()),lv=l;Ap=ah.default=(0,ov.default)((0,lv.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow");const cv=({videos:n,onVideoClick:e,autoPlay:t=!1,showControls:r=!0})=>{const i=xn(),[s,a]=R.useState(0),[u,c]=R.useState(!0),[f,g]=R.useState(new Set);R.useEffect(()=>{if(t&&n.length>1){const k=setInterval(()=>{a(w=>(w+1)%n.length)},3e3);return()=>clearInterval(k)}},[t,n.length]),R.useEffect(()=>{(async()=>{c(!0);for(const w of n)if(w.thumbnailUrl&&!f.has(w.$id))try{const I=new Image;I.onload=()=>{g(F=>new Set([...F,w.$id]))},I.src=w.thumbnailUrl}catch(I){console.error("Error loading thumbnail:",I)}c(!1)})()},[n,f]);const m=async k=>{try{await zt.incrementViews(k.$id),e?e(k.$id):i(`/video/${k.$id}`)}catch(w){console.error("Error handling video click:",w),e?e(k.$id):i(`/video/${k.$id}`)}},y=()=>{a(k=>(k-1+n.length)%n.length)},v=()=>{a(k=>(k+1)%n.length)},A=k=>{if(k==null)return"00:00";if(typeof k=="number"){const w=Math.floor(k/60),I=Math.floor(k%60);return`${w}:${I.toString().padStart(2,"0")}`}return String(k)};if(n.length===0)return l.jsx(te,{sx:{width:"100%",height:"200px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#0A0A0A",borderRadius:1},children:l.jsx(ge,{color:"text.secondary",children:"No videos available"})});const x=n[s];return l.jsxs(te,{sx:{position:"relative",width:"100%",height:"100%"},children:[l.jsxs(te,{sx:{position:"relative",width:"100%",height:"100%",borderRadius:1,overflow:"hidden",cursor:"pointer"},onClick:()=>m(x),children:[u||!f.has(x.$id)?l.jsx(Rt,{variant:"rectangular",sx:{width:"100%",height:"100%",bgcolor:"#0A0A0A"},animation:"wave"}):l.jsx(jo,{component:"img",image:x.thumbnailUrl,alt:x.title,sx:{width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#0A0A0A",filter:"brightness(0.8)"}}),l.jsx(te,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.3)",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(0,0,0,0.5)"}},children:l.jsx(te,{sx:{width:"60px",height:"60px",borderRadius:"50%",backgroundColor:"rgba(255,15,80,0.9)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:l.jsx(Ap,{sx:{fontSize:30,color:"white"}})})}),l.jsxs(te,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",color:"white",p:2},children:[l.jsx(ge,{variant:"h6",sx:{fontWeight:"bold",mb:.5},children:x.title}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:1},children:[x.duration&&l.jsx(Gt,{label:A(x.duration),size:"small",sx:{backgroundColor:"rgba(0,0,0,0.8)",color:"white",height:"20px",fontSize:"0.7rem"},icon:l.jsx(Es,{sx:{color:"white",fontSize:"12px"}})}),l.jsxs(ge,{variant:"body2",sx:{color:"white"},children:["$",x.price.toFixed(2)]})]})]}),n.length>1&&l.jsx(Gt,{label:`${s+1}/${n.length}`,size:"small",sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(0,0,0,0.8)",color:"white",fontWeight:"bold",height:"24px"}})]}),r&&n.length>1&&l.jsxs(l.Fragment,{children:[l.jsx(bn,{onClick:y,sx:{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(0,0,0,0.7)",color:"white","&:hover":{backgroundColor:"rgba(0,0,0,0.9)"}},children:l.jsx(Sp,{})}),l.jsx(bn,{onClick:v,sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(0,0,0,0.7)",color:"white","&:hover":{backgroundColor:"rgba(0,0,0,0.9)"}},children:l.jsx(jp,{})})]}),n.length>1&&l.jsx(te,{sx:{display:"flex",gap:1,mt:1,overflowX:"auto","&::-webkit-scrollbar":{height:4},"&::-webkit-scrollbar-track":{bgcolor:"transparent"},"&::-webkit-scrollbar-thumb":{bgcolor:"rgba(255,255,255,0.3)",borderRadius:2}},children:n.map((k,w)=>l.jsx(te,{onClick:()=>a(w),sx:{minWidth:"60px",height:"40px",borderRadius:1,overflow:"hidden",cursor:"pointer",border:s===w?"2px solid #FF0F50":"2px solid transparent",opacity:s===w?1:.7,transition:"all 0.3s ease","&:hover":{opacity:1}},children:l.jsx(jo,{component:"img",image:k.thumbnailUrl,alt:k.title,sx:{width:"100%",height:"100%",objectFit:"cover"}})},k.$id))})]})},oh=({video:n})=>{const e=xn(),[t,r]=R.useState(!1),[i,s]=R.useState(!0),[a,u]=R.useState(!1),{telegramUsername:c,stripePublishableKey:f}=En(),[g,m]=R.useState(!1),y=async()=>{try{await zt.incrementViews(n.$id),e(`/video/${n.$id}`)}catch(re){console.error("Error handling video card click:",re),e(`/video/${n.$id}`)}},v=re=>{if(re==null)return"00:00";if(typeof re=="number"){const G=Math.floor(re/60),M=Math.floor(re%60);return`${G}min ${M}s`}if(typeof re=="string")try{const G=re.split(":");if(G.length===2)return`${G[0]}min ${G[1]}s`;if(G.length===3)return`${G[0]}h ${G[1]}m ${G[2]}s`}catch(G){return console.error("Error formatting duration:",G),re}return String(re)},A=re=>re===void 0?"0 views":re<1e3?`${re} views`:re<1e6?`${(re/1e3).toFixed(1)}K views`:`${(re/1e6).toFixed(1)}M views`,x=re=>{if(!re)return"";const G=new Date(re),z=Math.abs(new Date().getTime()-G.getTime()),W=Math.ceil(z/(1e3*60*60*24));return W===1?"Yesterday":W<7?`${W} days ago`:W<30?`${Math.floor(W/7)} weeks ago`:W<365?`${Math.floor(W/30)} months ago`:`${Math.floor(W/365)} years ago`},k=n.createdAt||n.created_at;R.useEffect(()=>{n.thumbnailUrl?(s(!0),u(!1)):s(!1)},[n.thumbnailUrl]);const w=()=>{s(!1)},I=()=>{s(!1),u(!0)},F=re=>{re.stopPropagation(),e(`/video/${n.$id}`)},Z=(()=>{if(!c)return"https://t.me/share/url";const re=z=>{const j=Math.abs(new Date().getTime()-z.getTime()),E=Math.ceil(j/(1e3*60*60*24));return E===1?"1 day ago":E<7?`${E} days ago`:E<30?`${Math.ceil(E/7)} weeks ago`:`${Math.ceil(E/30)} months ago`},G=`🎬 **${n.title}**

💰 **Price:** $${n.price.toFixed(2)}
⏱️ **Duration:** ${v(n.duration)}
👀 **Views:** ${A(n.views)}
📅 **Added:** ${re(new Date(n.createdAt||n.created_at||Date.now()))}

📝 **Description:**
${n.description||"No description available"}

Please let me know how to proceed with payment.`,M=encodeURIComponent(G);return`https://t.me/${c.replace("@","")}?text=${M}`})(),ae=async re=>{if(re.stopPropagation(),!!f)try{m(!0),await si.initStripe(f);const G="Video Access",M=`${window.location.origin}/payment-success?video_id=${n.$id}&session_id={CHECKOUT_SESSION_ID}&payment_method=stripe`,z=`${window.location.origin}/video/${n.$id}?payment_canceled=true`,W=await si.createCheckoutSession(n.price,"usd",G,M,z);await si.redirectToCheckout(W)}catch(G){console.error("Stripe payment error:",G)}finally{m(!1)}};return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}),l.jsxs(Eo,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease",borderRadius:"12px",overflow:"hidden",boxShadow:re=>`0 8px 20px ${re.palette.mode==="dark"?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.15)"}`,cursor:"pointer",backgroundColor:"#1a1a1a",border:"1px solid rgba(142,36,170,0.2)","&:hover":{transform:"translateY(-10px) scale(1.02)",boxShadow:"0 16px 30px rgba(142,36,170,0.3)",borderColor:"#8e24aa"}},onClick:y,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[l.jsxs(te,{sx:{position:"relative",paddingTop:"56.25%"},children:[n.previewSources&&n.previewSources.length>0?l.jsx(te,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:l.jsx(cv,{videos:[n.previewSources].flat().slice(0,3).map((re,G)=>({$id:`${n.$id}::${re.id}`,title:n.title,thumbnailUrl:re.thumbnail_file_id?void 0:n.thumbnailUrl,duration:n.duration,price:n.price})),onVideoClick:re=>e(`/video/${re}`),autoPlay:t,showControls:t})}):l.jsx(l.Fragment,{children:n.thumbnailUrl&&!a?l.jsx(jo,{component:"img",image:n.thumbnailUrl,alt:n.title,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",backgroundColor:"#0A0A0A",filter:"brightness(0.9)"},onLoad:w,onError:I}):l.jsx(Rt,{variant:"rectangular",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#0A0A0A"},animation:"wave"})}),i&&n.thumbnailUrl&&l.jsxs(te,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.7)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:3},children:[l.jsx(sn,{size:40,thickness:4,sx:{color:"#8e24aa",mb:1,animation:"pulse 1.5s ease-in-out infinite"}}),l.jsx(ge,{variant:"caption",sx:{color:"white",fontWeight:"bold",textAlign:"center",fontSize:"0.75rem"},children:"Loading..."})]}),a&&l.jsx(te,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#0A0A0A",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:3},children:l.jsx(ge,{variant:"body2",sx:{color:"#666",textAlign:"center",fontSize:"0.9rem"},children:"Video Thumbnail"})}),l.jsx(Gt,{label:"18+",size:"small",sx:{position:"absolute",top:8,left:8,backgroundColor:"#8e24aa",color:"white",fontWeight:"bold",fontSize:"0.7rem",height:"22px",zIndex:2}}),l.jsx(te,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to top, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.25) 50%, rgba(0,0,0,0.25) 100%)",opacity:t?1:.4,transition:"all 0.3s ease"}}),n.duration&&l.jsx(Gt,{label:v(n.duration),size:"small",sx:{position:"absolute",bottom:8,right:8,backgroundColor:"rgba(0,0,0,0.8)",color:"white",fontWeight:"bold",height:"24px","& .MuiChip-label":{px:1}},icon:l.jsx(Es,{sx:{color:"white",fontSize:"14px"}})}),l.jsx(Gt,{label:`$${n.price.toFixed(2)}`,size:"medium",sx:{position:"absolute",top:8,right:8,fontWeight:"bold",fontSize:"0.9rem",height:"32px",backgroundColor:"#FF0F50",border:"2px solid rgba(255, 255, 255, 0.3)","& .MuiChip-label":{color:"white",fontWeight:"bold",px:1.5}}})]}),l.jsxs(ql,{sx:{flexGrow:1,p:2,pt:1.5},children:[l.jsx(ge,{gutterBottom:!0,variant:"h6",component:"div",sx:{fontWeight:"bold",fontSize:"1rem",lineHeight:1.2,mb:1,height:"2.4rem",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",color:"white"},children:n.title}),l.jsxs(te,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:.5,color:"#ccc"},children:[l.jsx(Ns,{sx:{fontSize:16}}),l.jsx(ge,{variant:"caption",children:A(n.views)})]}),k&&l.jsx(ge,{variant:"caption",sx:{color:"#ccc"},children:x(k)})]}),l.jsxs(te,{sx:{display:"flex",gap:1,mt:1},children:[l.jsx(He,{variant:"contained",fullWidth:!0,startIcon:l.jsx(Ns,{}),onClick:F,sx:{backgroundColor:"#8e24aa",color:"white","&:hover":{backgroundColor:"#6a1b9a"}},children:"Preview"}),l.jsx(He,{variant:"contained",fullWidth:!0,startIcon:l.jsx(ts,{}),href:Z,target:"_blank",rel:"noopener noreferrer",sx:{backgroundColor:"#8e24aa",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"#6a1b9a"}},children:"Telegram"}),l.jsx(He,{variant:"contained",fullWidth:!0,startIcon:l.jsx(nh,{}),onClick:ae,disabled:g,sx:{backgroundColor:"#8e24aa",color:"white",fontWeight:"bold","&:hover":{backgroundColor:"#6a1b9a"}},children:"Pay"})]})]})]})]})};function uv(n,e){const[t,r]=R.useState(n);return R.useEffect(()=>{const i=setTimeout(()=>{r(n)},e);return()=>{clearTimeout(i)}},[n,e]),t}const kp=()=>{const{telegramUsername:n}=En(),e=()=>{if(n){const t=`https://t.me/${n.replace("@","")}`;window.open(t,"_blank")}};return l.jsx(te,{sx:{py:6,bgcolor:"background.default"},children:l.jsx(yn,{maxWidth:"md",children:l.jsxs(Nr,{elevation:2,sx:t=>({p:4,textAlign:"center",borderRadius:2,background:`linear-gradient(135deg, ${t.palette.secondary.main} 0%, ${t.palette.primary.main} 100%)`,color:t.palette.getContrastText(t.palette.primary.main)}),children:[l.jsx(ge,{variant:"h5",component:"h2",gutterBottom:!0,sx:{fontWeight:600},children:"For more VIP content or all content"}),l.jsx(ge,{variant:"body1",sx:{mb:3,opacity:.9},children:"Get in touch with us for exclusive access to premium videos and complete content library. Your privacy is our priority."}),l.jsx(He,{variant:"contained",color:"primary",size:"large",startIcon:l.jsx(ts,{}),onClick:e,sx:t=>({px:4,py:1.5,fontSize:"1.1rem",fontWeight:600,boxShadow:`0 8px 25px ${t.palette.mode==="dark"?"rgba(255, 15, 80, 0.25)":"rgba(209, 13, 66, 0.25)"}`,"&:hover":{transform:"translateY(-2px)"},transition:"all 0.3s ease"}),children:"Contact via Telegram"})]})})})},hv=()=>l.jsxs(Eo,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",bgcolor:"background.paper"},children:[l.jsx(Rt,{variant:"rectangular",sx:{width:"100%",paddingTop:"56.25%"},animation:"wave"}),l.jsxs(ql,{children:[l.jsx(Rt,{variant:"text",sx:{fontSize:"1.5rem",mb:1}}),l.jsx(Rt,{variant:"text",sx:{fontSize:"1rem",width:"60%"}}),l.jsxs(te,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[l.jsx(Rt,{variant:"text",sx:{width:"30%"}}),l.jsx(Rt,{variant:"text",sx:{width:"20%"}})]})]})]}),dv=()=>{const[n,e]=Bf(),[t,r]=R.useState([]),[i,s]=R.useState(!0),[a,u]=R.useState(null),[c,f]=R.useState(ji.NEWEST),[g,m]=R.useState(n.get("search")||""),y=uv(g,500),[v,A]=R.useState(!1),[x,k]=R.useState([0,100]),[w,I]=R.useState(null),[F,Z]=R.useState(!1),{user:ae}=ss(),{siteConfig:re}=En();R.useEffect(()=>{localStorage.getItem("adult_content_warning_seen")||Z(!0)},[]),R.useEffect(()=>{const U=n.get("search")||"";U!==g&&m(U)},[n]),R.useEffect(()=>{(async()=>{try{s(!0),u(null);const X=await zt.getAllVideos(c,y);console.log("Received videos:",X);let ie=X.filter(le=>le.price>=x[0]&&le.price<=x[1]);w&&(ie=ie.filter(le=>{const ce=(le.duration||"00:00").split(":").map(Number),ve=ce.length===2?ce[0]*60+ce[1]:ce[0]*3600+ce[1]*60+ce[2];switch(w){case"short":return ve<300;case"medium":return ve>=300&&ve<=900;case"long":return ve>900;default:return!0}})),r(ie)}catch(X){console.error("Error fetching videos:",X),u("Failed to load videos. Please try again later.")}finally{s(!1)}})()},[ae,c,y,x,w]),R.useEffect(()=>{const X=setInterval(async()=>{try{if((await fetch("/api/clear-cache",{method:"POST"})).ok){console.log("Cache clear signal received, refreshing videos..."),zt.clearCachePublic();const le=await zt.getAllVideos(c,y);r(le)}}catch(ie){console.log("Cache check failed:",ie)}},1e4);return()=>clearInterval(X)},[c,y]);const G=U=>{f(U.target.value)},M=U=>{m(U.target.value)},z=(U,X)=>{k(X)},W=U=>{I(U===w?null:U)},j=()=>{k([0,100]),I(null)},E=()=>{localStorage.setItem("adult_content_warning_seen","true"),Z(!1)},V=()=>Array(12).fill(0).map((U,X)=>l.jsx(Ze,{item:!0,xs:12,sm:6,md:4,lg:3,children:l.jsx(hv,{})},`skeleton-${X}`));return l.jsxs(l.Fragment,{children:[l.jsxs(yn,{maxWidth:"lg",sx:{py:4},children:[l.jsx(Zc,{open:F,onClose:E,closeAfterTransition:!0,BackdropComponent:Xc,BackdropProps:{timeout:500},"aria-labelledby":"adult-content-warning",children:l.jsx(Ca,{in:F,children:l.jsxs(te,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"90%",sm:"500px"},bgcolor:"background.paper",border:"2px solid #f44336",borderRadius:2,boxShadow:24,p:4},children:[l.jsxs(te,{sx:{display:"flex",alignItems:"center",mb:2},children:[l.jsx(Ju,{color:"error",sx:{fontSize:40,mr:2}}),l.jsx(ge,{variant:"h5",component:"h2",sx:{fontWeight:"bold"},children:"Adult Content Warning"})]}),l.jsx(ge,{variant:"body1",sx:{mb:3},children:'This website contains adult material and is intended only for people 18 years of age or older. By clicking "Enter", you confirm that you are at least 18 years old and consent to viewing adult content.'}),l.jsxs(te,{sx:{display:"flex",justifyContent:"space-between"},children:[l.jsx(He,{variant:"outlined",color:"error",onClick:()=>window.history.back(),children:"Exit"}),l.jsx(He,{variant:"contained",color:"primary",onClick:E,children:"Enter (18+)"})]})]})})}),l.jsxs(te,{"data-testid":"search-section",sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",md:"center"},mb:3},children:[l.jsxs(te,{children:[l.jsx(ge,{variant:"h4",component:"h1",gutterBottom:!0,children:(re==null?void 0:re.video_list_title)||"Available Videos"}),!i&&t.length>0&&l.jsxs(te,{sx:{mt:-1},children:[l.jsxs(ge,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Showing ",t.length," video",t.length!==1?"s":""]}),l.jsxs(te,{sx:{display:"flex",gap:1.5,flexWrap:"wrap"},children:[l.jsx(Gt,{label:`From $${Math.min(...t.map(U=>U.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),l.jsx(Gt,{label:`Up to $${Math.max(...t.map(U=>U.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),l.jsx(Gt,{label:`Avg: $${(t.reduce((U,X)=>U+X.price,0)/t.length).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}})]})]})]}),l.jsxs(te,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,width:{xs:"100%",md:"auto"},mt:{xs:2,md:0}},children:[l.jsx(Lt,{placeholder:"Search videos...",size:"small",value:g,onChange:M,sx:{minWidth:{xs:"100%",sm:"200px"}},InputProps:{startAdornment:l.jsx(yf,{position:"start",children:l.jsx(Co,{})})}}),l.jsxs(te,{sx:{display:"flex",gap:1},children:[l.jsxs(wf,{size:"small",sx:{minWidth:{xs:"100%",sm:"150px"}},children:[l.jsx(xf,{id:"sort-select-label",children:"Sort By"}),l.jsxs(_f,{labelId:"sort-select-label",value:c,label:"Sort By",onChange:G,children:[l.jsx(ma,{value:ji.NEWEST,children:"Newest"}),l.jsx(ma,{value:ji.PRICE_ASC,children:"Price: Low to High"}),l.jsx(ma,{value:ji.PRICE_DESC,children:"Price: High to Low"}),l.jsx(ma,{value:ji.VIEWS_DESC,children:"Most Viewed"}),l.jsx(ma,{value:ji.DURATION_DESC,children:"Longest"})]})]}),l.jsx(He,{variant:v?"contained":"outlined",color:"primary",startIcon:l.jsx(vp,{}),onClick:()=>A(!v),size:"small",children:"Filters"})]})]})]}),l.jsx(Sf,{in:v,children:l.jsxs(Nr,{sx:{p:3,mb:3},children:[l.jsx(ge,{variant:"h6",gutterBottom:!0,children:"Filter Options"}),l.jsx(La,{sx:{mb:2}}),l.jsxs(Ze,{container:!0,spacing:3,children:[l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsxs(ge,{variant:"subtitle2",gutterBottom:!0,children:["Price Range ($",x[0]," - $",x[1],")"]}),l.jsx(i0,{value:x,onChange:z,valueLabelDisplay:"auto",min:0,max:100,sx:{mt:2}})]}),l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(ge,{variant:"subtitle2",gutterBottom:!0,children:"Duration"}),l.jsxs(te,{sx:{display:"flex",gap:1,mt:2},children:[l.jsx(Gt,{label:"Short (<5 min)",onClick:()=>W("short"),color:w==="short"?"primary":"default",variant:w==="short"?"filled":"outlined"}),l.jsx(Gt,{label:"Medium (5-15 min)",onClick:()=>W("medium"),color:w==="medium"?"primary":"default",variant:w==="medium"?"filled":"outlined"}),l.jsx(Gt,{label:"Long (>15 min)",onClick:()=>W("long"),color:w==="long"?"primary":"default",variant:w==="long"?"filled":"outlined"})]})]})]}),l.jsx(te,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:l.jsx(He,{variant:"outlined",onClick:j,children:"Clear Filters"})})]})}),y&&l.jsx(Nr,{sx:{p:2,mb:3,bgcolor:"background.paper",borderRadius:1},children:l.jsxs(ge,{variant:"body1",children:["Search results for: ",l.jsxs("strong",{children:['"',y,'"']})]})}),a&&l.jsx(Vt,{severity:"error",sx:{mb:3},children:a}),l.jsx(te,{children:i?l.jsx(Ze,{container:!0,spacing:3,children:V()}):t.length===0?l.jsx(Ol,{in:!0,timeout:1e3,children:l.jsxs(Nr,{sx:{p:4,my:3,textAlign:"center",borderRadius:2,background:"linear-gradient(135deg, rgba(255, 15, 80, 0.05) 0%, rgba(209, 13, 66, 0.05) 100%)"},children:[l.jsx(ge,{variant:"h6",gutterBottom:!0,sx:{fontWeight:600},children:"No videos found"}),l.jsx(ge,{variant:"body2",color:"text.secondary",children:g?`No videos matching "${g}". Try a different search term.`:v?"No videos match your current filters. Try adjusting your filter settings.":"No videos available at the moment. Please check back later."})]})}):l.jsx(l.Fragment,{children:l.jsx(Ze,{container:!0,spacing:3,children:t.map((U,X)=>l.jsx(Ol,{in:!0,timeout:300+X*50,children:l.jsx(Ze,{item:!0,xs:12,sm:6,md:4,lg:3,children:l.jsx(oh,{video:U})})},U.$id))})})})]}),l.jsx(kp,{})]})};var lh={},fv=_t;Object.defineProperty(lh,"__esModule",{value:!0});var ni=lh.default=void 0,pv=fv(St()),gv=l;ni=lh.default=(0,pv.default)((0,gv.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");var ch={},mv=_t;Object.defineProperty(ch,"__esModule",{value:!0});var Lp=ch.default=void 0,vv=mv(St()),bv=l;Lp=ch.default=(0,vv.default)((0,bv.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart");const yv=()=>l.jsxs(yn,{maxWidth:"lg",sx:{py:4},children:[l.jsx(Rt,{variant:"rectangular",width:120,height:40,sx:{mb:3,borderRadius:1}}),l.jsxs(Nr,{elevation:3,sx:{p:3},children:[l.jsx(Rt,{variant:"text",sx:{fontSize:"2rem",mb:2,width:"60%"}}),l.jsxs(Ze,{container:!0,spacing:3,children:[l.jsx(Ze,{item:!0,xs:12,md:6,children:l.jsx(Rt,{variant:"rectangular",sx:{width:"100%",height:300,borderRadius:1}})}),l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(Rt,{variant:"text",sx:{fontSize:"1.5rem",mb:2,width:"40%"}}),l.jsx(Rt,{variant:"text",sx:{fontSize:"1rem",mb:1}}),l.jsx(Rt,{variant:"text",sx:{fontSize:"1rem",mb:1,width:"80%"}}),l.jsx(Rt,{variant:"text",sx:{fontSize:"1rem",mb:2,width:"60%"}}),l.jsxs(te,{sx:{display:"flex",gap:2,mb:2},children:[l.jsx(Rt,{variant:"rectangular",width:80,height:24}),l.jsx(Rt,{variant:"rectangular",width:80,height:24})]}),l.jsx(La,{sx:{my:2}}),l.jsx(Rt,{variant:"text",sx:{fontSize:"1.5rem",mb:2,width:"30%"}}),l.jsxs(te,{sx:{display:"flex",gap:2,mb:2},children:[l.jsx(Rt,{variant:"rectangular",width:120,height:40}),l.jsx(Rt,{variant:"rectangular",width:120,height:40})]})]})]})]})]}),wv=()=>{const{id:n}=Rf(),e=xn(),{user:t}=ss(),{telegramUsername:r}=En(),[i,s]=R.useState(null),[a,u]=R.useState(null),[c,f]=R.useState(!0),[g,m]=R.useState(null),[y,v]=R.useState(!1),[A,x]=R.useState(null),[k,w]=R.useState(!1),[I,F]=R.useState(!1);R.useEffect(()=>{(async()=>{if(!n){m("Invalid video ID"),f(!1);return}try{f(!0),m(null);const W=await zt.getVideo(n);if(!W){m("Video not found"),f(!1);return}if(s(W),await zt.incrementViews(n),t){w(!1);const j=await zt.getVideoFileUrl(n);u(j)}}catch(W){console.error("Error loading video:",W),m("An error occurred while loading the video")}finally{f(!1)}})()},[n,t]);const Z=async()=>{if(!t){e("/login",{state:{from:`/video/${n}`}});return}if(!i){x("Video information not available");return}try{v(!0),x(null),setTimeout(()=>{F(!0),w(!0),zt.getVideoFileUrl(n).then(z=>u(z)).catch(z=>console.error("Error getting video URL:",z)),v(!1)},1500)}catch(z){console.error("Purchase error:",z),x("Failed to complete purchase. Please try again."),v(!1)}},ae=z=>{if(z==null)return"00:00";if(typeof z=="number"){const W=Math.floor(z/60),j=Math.floor(z%60);return`${W}min ${j}s`}if(typeof z=="string")try{const W=z.split(":");if(W.length===2)return`${W[0]}min ${W[1]}s`;if(W.length===3)return`${W[0]}h ${W[1]}m ${W[2]}s`}catch(W){return console.error("Error formatting duration:",W),z}return String(z)},re=z=>z===void 0?"0 views":z<1e3?`${z} views`:z<1e6?`${(z/1e3).toFixed(1)}K views`:`${(z/1e6).toFixed(1)}M views`,G=(()=>{if(!i)return"https://t.me/share/url";const z=E=>{const U=Math.abs(new Date().getTime()-E.getTime()),X=Math.ceil(U/(1e3*60*60*24));return X===1?"1 day ago":X<7?`${X} days ago`:X<30?`${Math.ceil(X/7)} weeks ago`:`${Math.ceil(X/30)} months ago`},W=`🎬 **${i.title}**

💰 **Price:** $${i.price.toFixed(2)}
⏱️ **Duration:** ${ae(i.duration)}
👀 **Views:** ${re(i.views)}
📅 **Added:** ${z(new Date(i.createdAt||Date.now()))}

📝 **Description:**
${i.description||"No description available"}

Please let me know how to proceed with payment.`,j=encodeURIComponent(W);return r?`${`https://t.me/${r.replace("@","")}`}?text=${j}`:`https://t.me/share/url?text=${j}`})(),M=()=>{e("/")};return c?l.jsx(yv,{}):g?l.jsxs(yn,{maxWidth:"lg",sx:{py:4},children:[l.jsx(He,{startIcon:l.jsx(ni,{}),onClick:M,sx:{mb:2},children:"Back"}),l.jsx(Vt,{severity:"error",sx:{mb:3},children:g})]}):l.jsxs(yn,{maxWidth:"lg",sx:{py:4},children:[l.jsx(He,{startIcon:l.jsx(ni,{}),onClick:M,sx:{mb:3},children:"Back to videos"}),I&&l.jsx(Vt,{severity:"success",sx:{mb:3},children:"Purchase successful! You can now watch this video."}),A&&l.jsx(Vt,{severity:"error",sx:{mb:3},children:A}),l.jsxs(Nr,{elevation:3,sx:{p:3},children:[l.jsx(ge,{variant:"h4",component:"h1",gutterBottom:!0,children:(i==null?void 0:i.title)||"Video Details"}),l.jsxs(Ze,{container:!0,spacing:3,children:[l.jsx(Ze,{item:!0,xs:12,md:k&&a?12:6,children:k&&a?l.jsx(te,{sx:{position:"relative",width:"100%",pt:"56.25%",mb:2},children:l.jsx("video",{controls:!0,autoPlay:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",backgroundColor:"#000"},src:a,children:"Your browser does not support the video tag."})}):l.jsx(Eo,{children:l.jsx(jo,{component:"img",image:(i==null?void 0:i.thumbnailUrl)||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y1ZjVmNSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTgiIGZpbGw9IiM5OTk5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5WaWRlbyBUaHVtYm5haWw8L3RleHQ+PC9zdmc+",alt:i==null?void 0:i.title,sx:{height:300,objectFit:"cover"}})})}),(!k||!a)&&l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(ge,{variant:"h6",gutterBottom:!0,children:"Video Information"}),l.jsx(ge,{variant:"body1",paragraph:!0,children:i==null?void 0:i.description}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:.5},children:[l.jsx(Es,{fontSize:"small",color:"action"}),l.jsx(ge,{variant:"body2",color:"text.secondary",children:i!=null&&i.duration?ae(i.duration):"N/A"})]}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:.5},children:[l.jsx(Ns,{fontSize:"small",color:"action"}),l.jsx(ge,{variant:"body2",color:"text.secondary",children:re(i==null?void 0:i.views)})]})]}),l.jsx(La,{sx:{my:2}}),l.jsx(te,{sx:{display:"flex",alignItems:"center",mb:2},children:l.jsxs(ge,{variant:"h5",component:"p",color:"primary",sx:{fontWeight:"bold"},children:["$",i==null?void 0:i.price.toFixed(2)]})}),l.jsxs(te,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:[l.jsx(He,{variant:"contained",fullWidth:!0,startIcon:l.jsx(Lp,{}),onClick:Z,disabled:y||k||!t,children:y?l.jsxs(l.Fragment,{children:[l.jsx(sn,{size:24,color:"inherit",sx:{mr:1}}),"Processing..."]}):k?"Already Purchased":"Purchase Now"}),r&&l.jsx(He,{variant:"outlined",color:"primary",fullWidth:!0,startIcon:l.jsx(ts,{}),href:G,target:"_blank",rel:"noopener noreferrer",children:"Contact on Telegram"})]}),!t&&l.jsx(Vt,{severity:"info",sx:{mt:2},children:"Please log in to purchase this video."})]})]}),k&&a&&l.jsxs(l.Fragment,{children:[l.jsx(La,{sx:{my:3}}),l.jsx(ge,{variant:"h6",gutterBottom:!0,children:"Description"}),l.jsx(ge,{variant:"body1",paragraph:!0,children:i==null?void 0:i.description}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:2},children:[l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:.5},children:[l.jsx(Es,{fontSize:"small",color:"action"}),l.jsx(ge,{variant:"body2",color:"text.secondary",children:i!=null&&i.duration?ae(i.duration):"N/A"})]}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:.5},children:[l.jsx(Ns,{fontSize:"small",color:"action"}),l.jsx(ge,{variant:"body2",color:"text.secondary",children:re(i==null?void 0:i.views)})]})]})]})]})]})};var uh={},xv=_t;Object.defineProperty(uh,"__esModule",{value:!0});var Bl=uh.default=void 0,_v=xv(St()),Sv=l;Bl=uh.default=(0,_v.default)((0,Sv.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy");var hh={},jv=_t;Object.defineProperty(hh,"__esModule",{value:!0});var xa=hh.default=void 0,Av=jv(St()),kv=l;xa=hh.default=(0,Av.default)((0,kv.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");var dh={},Lv=_t;Object.defineProperty(dh,"__esModule",{value:!0});var Cp=dh.default=void 0,Cv=Lv(St()),Pv=l;Cp=dh.default=(0,Cv.default)((0,Pv.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var fh={},Iv=_t;Object.defineProperty(fh,"__esModule",{value:!0});var gu=fh.default=void 0,Nv=Iv(St()),Ev=l;gu=fh.default=(0,Nv.default)((0,Ev.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"}),"MonetizationOn");/*!
 * react-paypal-js v8.8.3 (2025-04-11T19:50:46.506Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn;(function(n){n.INITIAL="initial",n.PENDING="pending",n.REJECTED="rejected",n.RESOLVED="resolved"})(rn||(rn={}));var Qi;(function(n){n.LOADING_STATUS="setLoadingStatus",n.RESET_OPTIONS="resetOptions",n.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Qi||(Qi={}));var zd;(function(n){n.NUMBER="number",n.CVV="cvv",n.EXPIRATION_DATE="expirationDate",n.EXPIRATION_MONTH="expirationMonth",n.EXPIRATION_YEAR="expirationYear",n.POSTAL_CODE="postalCode"})(zd||(zd={}));var vr=function(){return vr=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},vr.apply(this,arguments)};function Pp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Wd(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var Io="data-react-paypal-script-id",Ps={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},Tv="Failed to load the PayPal JS SDK script.",Ip="paypal",Rv="usePayPalScriptReducer must be used within a PayPalScriptProvider";function Ov(n){return n===void 0&&(n=Ip),window[n]}function Fv(n){for(var e="",t=0;t<n.length;t++){var r=n[t].charCodeAt(0)*t;n[t+1]&&(r+=n[t+1].charCodeAt(0)*(t-1)),e+=String.fromCharCode(97+Math.abs(r)%26)}return e}function Dv(n){var e=n.reactComponentName,t=n.sdkComponentKey,r=n.sdkRequestedComponents,i=r===void 0?"":r,s=n.sdkDataNamespace,a=s===void 0?Ip:s,u=t.charAt(0).toUpperCase().concat(t.substring(1)),c="Unable to render <".concat(e," /> because window.").concat(a,".").concat(u," is undefined."),f=typeof i=="string"?i:i.join(",");if(!f.includes(t)){var g=[f,t].filter(Boolean).join();c+=`
To fix the issue, add '`.concat(t,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(g,"'}}>`.")}return c}function Np(n){var e=n,t=Io;e[t];var r=Pp(e,[t+""]);return"react-paypal-js-".concat(Fv(JSON.stringify(r)))}function Mv(n){var e=self.document.querySelector("script[".concat(Io,'="').concat(n,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function Bv(n,e){var t,r;switch(e.type){case Qi.LOADING_STATUS:return typeof e.value=="object"?vr(vr({},n),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):vr(vr({},n),{loadingStatus:e.value});case Qi.RESET_OPTIONS:return Mv(n.options[Io]),vr(vr({},n),{loadingStatus:rn.PENDING,options:vr(vr((t={},t[Ps.DATA_SDK_INTEGRATION_SOURCE]=Ps.DATA_LIBRARY_VALUE,t),e.value),(r={},r[Io]="".concat(Np(e.value)),r))});case Qi.SET_BRAINTREE_INSTANCE:return vr(vr({},n),{braintreePayPalCheckoutInstance:e.value});default:return n}}var Ep=R.createContext(null);function Uv(n){if(typeof(n==null?void 0:n.dispatch)=="function"&&n.dispatch.length!==0)return n;throw new Error(Rv)}function $v(){var n=Uv(R.useContext(Ep)),e=vr(vr({},n),{isInitial:n.loadingStatus===rn.INITIAL,isPending:n.loadingStatus===rn.PENDING,isResolved:n.loadingStatus===rn.RESOLVED,isRejected:n.loadingStatus===rn.REJECTED});return[e,n.dispatch]}R.createContext({});function qv(n){var e=R.useRef(new Proxy({},{get:function(t,r,i){return typeof t[r]=="function"?function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return t[r].apply(t,s)}:Reflect.get(t,r,i)}}));return e.current=Object.assign(e.current,n),e.current}var ph=function(n){var e,t=n.className,r=t===void 0?"":t,i=n.disabled,s=i===void 0?!1:i,a=n.children,u=n.forceReRender,c=u===void 0?[]:u,f=Pp(n,["className","disabled","children","forceReRender"]),g=s?{opacity:.38}:{},m="".concat(r," ").concat(s?"paypal-buttons-disabled":"").trim(),y=R.useRef(null),v=R.useRef(null),A=qv(f),x=$v()[0],k=x.isResolved,w=x.options,I=R.useState(null),F=I[0],Z=I[1],ae=R.useState(!0),re=ae[0],G=ae[1],M=R.useState(null),z=M[1];function W(){v.current!==null&&v.current.close().catch(function(){})}return!((e=v.current)===null||e===void 0)&&e.updateProps&&v.current.updateProps({message:f.message}),R.useEffect(function(){if(k===!1)return W;var j=Ov(w.dataNamespace);if(j===void 0||j.Buttons===void 0)return z(function(){throw new Error(Dv({reactComponentName:ph.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:w.components,sdkDataNamespace:w[Ps.DATA_NAMESPACE]}))}),W;var E=function(V,U){Z(U),typeof f.onInit=="function"&&f.onInit(V,U)};try{v.current=j.Buttons(vr(vr({},A),{onInit:E}))}catch(V){return z(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(V))})}return v.current.isEligible()===!1?(G(!1),W):(y.current&&v.current.render(y.current).catch(function(V){y.current===null||y.current.children.length===0||z(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(V))})}),W)},Wd(Wd([k],c,!0),[f.fundingSource],!1)),R.useEffect(function(){F!==null&&(s===!0?F.disable().catch(function(){}):F.enable().catch(function(){}))},[s,F]),yo.createElement(yo.Fragment,null,re?yo.createElement("div",{ref:y,style:g,className:m}):a)};ph.displayName="PayPalButtons";function zv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Wv(n,e){var t=document.querySelector('script[src="'.concat(n,'"]'));if(t===null)return null;var r=Tp(n,e),i=t.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(r.dataset).length)return null;var s=!0;return Object.keys(i.dataset).forEach(function(a){i.dataset[a]!==r.dataset[a]&&(s=!1)}),s?t:null}function Vv(n){var e=n.url,t=n.attributes,r=n.onSuccess,i=n.onError,s=Tp(e,t);s.onerror=i,s.onload=r,document.head.insertBefore(s,document.head.firstElementChild)}function Hv(n){var e=n.sdkBaseUrl,t=n.environment,r=zv(n,["sdkBaseUrl","environment"]),i=e||Jv(t),s=r,a=Object.keys(s).filter(function(f){return typeof s[f]<"u"&&s[f]!==null&&s[f]!==""}).reduce(function(f,g){var m=s[g].toString();return g=Gv(g),g.substring(0,4)==="data"||g==="crossorigin"?f.attributes[g]=m:f.queryParams[g]=m,f},{queryParams:{},attributes:{}}),u=a.queryParams,c=a.attributes;return u["merchant-id"]&&u["merchant-id"].indexOf(",")!==-1&&(c["data-merchant-id"]=u["merchant-id"],u["merchant-id"]="*"),{url:"".concat(i,"?").concat(Kv(u)),attributes:c}}function Gv(n){var e=function(t,r){return(r?"-":"")+t.toLowerCase()};return n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function Kv(n){var e="";return Object.keys(n).forEach(function(t){e.length!==0&&(e+="&"),e+=t+"="+n[t]}),e}function Jv(n){return n==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function Tp(n,e){e===void 0&&(e={});var t=document.createElement("script");return t.src=n,Object.keys(e).forEach(function(r){t.setAttribute(r,e[r]),r==="data-csp-nonce"&&t.setAttribute("nonce",e["data-csp-nonce"])}),t}function Yv(n,e){if(e===void 0&&(e=Promise),Rp(n,e),typeof document>"u")return e.resolve(null);var t=Hv(n),r=t.url,i=t.attributes,s=i["data-namespace"]||"paypal",a=Vd(s);return i["data-js-sdk-library"]||(i["data-js-sdk-library"]="paypal-js"),Wv(r,i)&&a?e.resolve(a):Zv({url:r,attributes:i},e).then(function(){var u=Vd(s);if(u)return u;throw new Error("The window.".concat(s," global variable is not available."))})}function Zv(n,e){e===void 0&&(e=Promise),Rp(n,e);var t=n.url,r=n.attributes;if(typeof t!="string"||t.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new e(function(i,s){if(typeof document>"u")return i();Vv({url:t,attributes:r,onSuccess:function(){return i()},onError:function(){var a=new Error('The script "'.concat(t,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return s(a)}})})}function Vd(n){return window[n]}function Rp(n,e){if(typeof n!="object"||n===null)throw new Error("Expected an options object.");var t=n.environment;if(t&&t!=="production"&&t!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var Xv=function(n){var e,t=n.options,r=t===void 0?{clientId:"test"}:t,i=n.children,s=n.deferLoading,a=s===void 0?!1:s,u=R.useReducer(Bv,{options:vr(vr({},r),(e={},e[Ps.DATA_JS_SDK_LIBRARY]=Ps.DATA_LIBRARY_VALUE,e[Ps.DATA_SDK_INTEGRATION_SOURCE]=Ps.DATA_LIBRARY_VALUE,e[Io]="".concat(Np(r)),e)),loadingStatus:a?rn.INITIAL:rn.PENDING}),c=u[0],f=u[1];return R.useEffect(function(){if(a===!1&&c.loadingStatus===rn.INITIAL)return f({type:Qi.LOADING_STATUS,value:rn.PENDING});if(c.loadingStatus===rn.PENDING){var g=!0;return Yv(c.options).then(function(){g&&f({type:Qi.LOADING_STATUS,value:rn.RESOLVED})}).catch(function(m){console.error("".concat(Tv," ").concat(m)),g&&f({type:Qi.LOADING_STATUS,value:{state:rn.REJECTED,message:String(m)}})}),function(){g=!1}}},[c.options,a,c.loadingStatus]),yo.createElement(Ep.Provider,{value:vr(vr({},c),{dispatch:f})},i)};function Hd(){}R.createContext({cardFieldsForm:null,fields:{},registerField:Hd,unregisterField:Hd});const Qv={BTC:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#f7931a"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"₿"})]}),ETH:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#3c3c3d"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"Ξ"})]}),USDT:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#26a17b"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"T"})]}),BNB:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#f3ba2f"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"BNB"})]}),SOL:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#66f9a1"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#222",fontWeight:"bold",children:"◎"})]}),XRP:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#23292f"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"XRP"})]}),ADA:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#0033ad"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"ADA"})]}),DOGE:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#c2a633"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"Ð"})]}),AVAX:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#e84142"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"A"})]}),DOT:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#e6007a"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"●"})]}),MATIC:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#8247e5"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"M"})]}),SHIB:l.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",children:[l.jsx("circle",{cx:"16",cy:"16",r:"16",fill:"#f47321"}),l.jsx("text",{x:"16",y:"22",textAnchor:"middle",fontSize:"16",fill:"#fff",fontWeight:"bold",children:"S"})]})},eb=()=>{const{id:n}=Rf(),e=xn(),{user:t}=ss(),{telegramUsername:r,paypalClientId:i,stripePublishableKey:s,cryptoWallets:a,siteName:u}=En(),[c,f]=R.useState(null),[g,m]=R.useState(null),[y,v]=R.useState([]),[A,x]=R.useState([]),[k,w]=R.useState(0),[I,F]=R.useState([]),[Z,ae]=R.useState(!0),[re,G]=R.useState(null),[M,z]=R.useState(null),[W,j]=R.useState([]),[E,V]=R.useState(!1),[U,X]=R.useState(!0),[ie,le]=R.useState(!1),[Q,ce]=R.useState(null),[ve,Oe]=R.useState(""),[P,D]=R.useState(!1),[q,H]=R.useState(!1),[ne,fe]=R.useState(null),[me,pe]=R.useState(7),_e=Ia();R.useEffect(()=>{(async()=>{if(!n){G("Invalid video ID"),ae(!1);return}try{ae(!0),G(null),z(null),m(null);const Be=await zt.getVideo(n);if(!Be){G("Video not found"),ae(!1);return}f(Be),await zt.incrementViews(n);try{const Ne=await zt.getVideoSources(n);console.log("[videoplayer] Found sources:",Ne.length,Ne),v(Ne.map(et=>({id:et.id,source_file_id:et.source_file_id})));const We=[];for(const et of Ne){const Ie=await zt.getFileUrlById(et.source_file_id);Ie&&We.push(Ie)}console.log("[videoplayer] Resolved URLs:",We.length,We),x(We);const Qe=[],Ve=await zt.getVideoFileUrl(n);Ve&&(Qe.push(Ve),m(Ve)),Qe.push(...We),F(Qe),w(0),console.log("[videoplayer] All video URLs (main + sources):",Qe.length,Qe)}catch(Ne){console.error("Error loading preview video:",Ne)}zt.getAllVideos().then(Ne=>{const We=Ne.filter(Qe=>Qe.$id!==n).slice(0,8);j(We)}).catch(Ne=>{console.error("Error loading suggested videos:",Ne)})}catch(Be){console.error("Error loading video:",Be),G("Failed to load video. Please try again later.")}finally{ae(!1)}})()},[n,t]);const Le=Pe=>{if(!Pe)return"Unknown";if(typeof Pe=="string"){const Be=Pe.split(":").map(Number);if(Be.length===2){const[Ne,We]=Be;return Ne===0?`${We} sec`:We===0?`${Ne} min`:`${Ne} min ${We} sec`}else if(Be.length===3){const[Ne,We,Qe]=Be;return Ne===0?We===0?`${Qe} sec`:Qe===0?`${We} min`:`${We} min ${Qe} sec`:We===0&&Qe===0?`${Ne} hr`:Qe===0?`${Ne} hr ${We} min`:We===0?`${Ne} hr ${Qe} sec`:`${Ne} hr ${We} min ${Qe} sec`}}return Pe.toString()},Te=Pe=>Pe===void 0?"0 views":Pe>=1e6?`${(Pe/1e6).toFixed(1)}M views`:Pe>=1e3?`${(Pe/1e3).toFixed(1)}K views`:`${Pe} views`,Ee=(()=>{if(!c)return r?`https://t.me/${r.replace("@","")}`:"https://t.me/share/url";const Pe=We=>{const Ve=Math.abs(new Date().getTime()-We.getTime()),et=Math.ceil(Ve/(1e3*60*60*24));return et===1?"1 day ago":et<7?`${et} days ago`:et<30?`${Math.ceil(et/7)} weeks ago`:`${Math.ceil(et/30)} months ago`},Be=`🎬 **${c.title}**

💰 **Price:** $${c.price.toFixed(2)}
⏱️ **Duration:** ${Le(c.duration)}
👀 **Views:** ${Te(c.views)}
📅 **Added:** ${Pe(new Date(c.createdAt||Date.now()))}

📝 **Description:**
${c.description||"No description available"}

Please let me know how to proceed with payment.`,Ne=encodeURIComponent(Be);return r?`https://t.me/${r.replace("@","")}?text=${Ne}`:`https://t.me/share/url?text=${Ne}`})(),Xe=()=>{e(-1)},ye=()=>{V(!0),X(!1)},$=()=>{V(!1)},it=()=>{X(!1)},ze=()=>{const Pe=["Personal Development Ebook","Financial Freedom Ebook","Digital Marketing Guide","Health & Wellness Ebook","Productivity Masterclass","Mindfulness & Meditation Guide","Entrepreneurship Blueprint"],Be=Math.floor(Math.random()*Pe.length);return Pe[Be]},ke=(Pe,Be)=>{if(!c)return z("Video information not available"),Promise.reject("Video information not available");try{const Ne=ze();return Oe(Ne),Be.order.create({purchase_units:[{description:Ne,amount:{currency_code:"USD",value:c.price.toString()}}]})}catch(Ne){return console.error("Error creating PayPal order:",Ne),z("Failed to create payment order. Please try again."),Promise.reject("Failed to create order")}},Re=async(Pe,Be)=>{var Ne,We,Qe;try{const Ve=await Be.order.capture();if(console.log("Order data:",Ve),!c){z("Video information not available");return}const et=t?t.$id:"guest-"+Date.now();try{const Ie=new URL("/payment-success",window.location.origin);Ie.searchParams.set("video_id",c.$id),Ie.searchParams.set("session_id",Ve.id),Ie.searchParams.set("payment_method","paypal"),(Ne=Ve.payer)!=null&&Ne.email_address&&Ie.searchParams.set("buyer_email",Ve.payer.email_address),(Qe=(We=Ve.payer)==null?void 0:We.name)!=null&&Qe.given_name&&Ie.searchParams.set("buyer_name",Ve.payer.name.given_name),window.location.href=Ie.toString();return}catch(Ie){console.error("Error processing payment:",Ie),z("Payment processing failed. Please try again later.")}}catch(Ve){console.error("Error processing payment:",Ve),z("Payment processing failed. Please try again later.")}},Me=Pe=>{fe(Pe),H(!0),pe(7);const Be=setInterval(()=>{pe(Ne=>Ne<=1?(clearInterval(Be),H(!1),Pe==="stripe"&&Fe(),0):Ne-1)},1e3)},Fe=async()=>{if(!c||!s){z("Stripe configuration is missing or video information not available");return}try{D(!0),await si.initStripe(s);const Pe=ze();Oe(Pe);const Be=`${window.location.origin}/payment-success?video_id=${n}&session_id={CHECKOUT_SESSION_ID}&payment_method=stripe`,Ne=`${window.location.origin}/video/${n}?payment_canceled=true`,We=await si.createCheckoutSession(c.price,"usd",Pe,Be,Ne);await si.redirectToCheckout(We)}catch(Pe){console.error("Error processing Stripe payment:",Pe),z("Failed to initialize Stripe payment. Please try again.")}finally{D(!1)}},Je=()=>{if(!c){z("Video information not available");return}Me("stripe")};return Z?l.jsx(te,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"500px"},children:l.jsx(sn,{size:60})}):re?l.jsxs(te,{sx:{py:4,px:2},children:[l.jsx(He,{startIcon:l.jsx(ni,{}),onClick:Xe,sx:{mb:2},children:"Back"}),l.jsx(Vt,{severity:"error",sx:{mb:3},children:re})]}):l.jsxs(te,{sx:{bgcolor:_e.palette.mode==="dark"?"#141414":"#f5f5f5",display:"flex",flexDirection:"column",alignItems:"center",width:"100%",overflow:"hidden"},children:[l.jsx(te,{sx:{width:"100%",bgcolor:"#000"},children:l.jsxs(te,{sx:{maxWidth:"1200px",margin:"0 auto",position:"relative"},children:[A.length>0||g?l.jsx(te,{sx:{width:"100%",height:"500px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"#000"},children:l.jsxs("video",{src:I.length>0?I[k]:g||void 0,controls:!0,autoPlay:!1,poster:c==null?void 0:c.thumbnailUrl,onPlay:ye,onPause:$,onClick:it,onMouseOver:it,onLoadStart:()=>console.log("Video load started:",I[k]),onLoadedData:()=>console.log("Video data loaded:",I[k]),onError:Pe=>{console.error("Video load error:",Pe),console.error("Video URL:",I[k]),console.error("Thumbnail URL:",c==null?void 0:c.thumbnailUrl)},style:{width:"100%",height:"100%",maxWidth:"1200px",maxHeight:"500px",objectFit:"contain",backgroundColor:"#000",zIndex:1e3},children:[l.jsx("source",{src:I.length>0?I[k]:g||void 0,type:"video/mp4"}),"Seu navegador não suporta o elemento de vídeo."]})}):l.jsxs(te,{sx:{width:"100%",height:"500px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#000",position:"relative"},children:[l.jsx(jo,{component:"img",image:(c==null?void 0:c.thumbnailUrl)||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4MCIgaGVpZ2h0PSI3MjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyODAiIGhlaWdodD0iNzIwIiBmaWxsPSIjZjVmNWY1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlZpZGVvIFByZXZpZXc8L3RleHQ+PC9zdmc+",alt:(c==null?void 0:c.title)||"Video thumbnail",onLoad:()=>{console.log("Thumbnail loaded successfully:",c==null?void 0:c.thumbnailUrl),console.log("Video data:",c)},onError:Pe=>{console.error("Thumbnail failed to load:",c==null?void 0:c.thumbnailUrl),console.error("Error event:",Pe),console.error("Video data:",c);const Be=Pe.target;Be.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4MCIgaGVpZ2h0PSI3MjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEyODAiIGhlaWdodD0iNzIwIiBmaWxsPSIjZjVmNWY1Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPlZpZGVvIFByZXZpZXc8L3RleHQ+PC9zdmc+"},sx:{width:"100%",height:"100%",objectFit:"cover",maxWidth:"1200px",backgroundColor:"#f5f5f5",minHeight:"300px"}}),U&&l.jsx(te,{sx:{position:"absolute",bottom:0,left:0,right:0,padding:3,background:"linear-gradient(transparent, rgba(0,0,0,0.9))",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:999},children:l.jsxs(te,{children:[l.jsx(ge,{variant:"h4",sx:{fontWeight:"bold",mb:1},children:(c==null?void 0:c.title)||"Video Details"}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:2},children:[l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:.5},children:[l.jsx(Es,{fontSize:"small"}),l.jsx(ge,{variant:"body2",children:c!=null&&c.duration?Le(c.duration):"N/A"})]}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:.5},children:[l.jsx(Ns,{fontSize:"small"}),l.jsx(ge,{variant:"body2",children:Te(c==null?void 0:c.views)})]})]})]})})]}),g&&U&&l.jsx(te,{sx:{position:"absolute",bottom:0,left:0,right:0,padding:3,background:"linear-gradient(transparent, rgba(0,0,0,0.9))",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:998},children:l.jsxs(te,{children:[l.jsx(ge,{variant:"h4",sx:{fontWeight:"bold",mb:1},children:(c==null?void 0:c.title)||"Video Details"}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:2},children:[l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:.5},children:[l.jsx(Es,{fontSize:"small"}),l.jsx(ge,{variant:"body2",children:c!=null&&c.duration?Le(c.duration):"N/A"})]}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:.5},children:[l.jsx(Ns,{fontSize:"small"}),l.jsx(ge,{variant:"body2",children:Te(c==null?void 0:c.views)})]})]})]})})]})}),l.jsx(te,{sx:{width:"100%",maxWidth:"1200px",color:_e.palette.mode==="dark"?"white":_e.palette.text.primary,mt:6,px:{xs:2,md:4}},children:l.jsxs(te,{sx:{mb:6},children:[M&&l.jsx(Vt,{severity:"error",sx:{mb:3},children:M}),l.jsx(He,{startIcon:l.jsx(ni,{}),onClick:Xe,sx:{mb:3},children:"Back to Videos"}),I.length>1&&l.jsxs(te,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2,mb:3,p:2,backgroundColor:"rgba(0,0,0,0.05)",borderRadius:2},children:[l.jsx(He,{variant:"outlined",color:"primary",size:"large",onClick:()=>w(Pe=>(Pe-1+I.length)%I.length),startIcon:l.jsx(ni,{}),sx:{minWidth:120,height:50,fontWeight:"bold"},children:"Previous Preview"}),l.jsxs(te,{sx:{backgroundColor:"primary.main",color:"white",padding:"8px 16px",borderRadius:"20px",fontSize:"16px",fontWeight:"bold",minWidth:80,textAlign:"center"},children:[k+1," / ",I.length]}),l.jsx(He,{variant:"outlined",color:"primary",size:"large",onClick:()=>w(Pe=>(Pe+1)%I.length),endIcon:l.jsx(ni,{sx:{transform:"rotate(180deg)"}}),sx:{minWidth:120,height:50,fontWeight:"bold"},children:"Next Preview"})]}),l.jsxs(te,{sx:{mb:4},children:[l.jsxs(te,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:2,mb:2},children:[l.jsx(ge,{variant:"h4",component:"h1",sx:{color:_e.palette.mode==="dark"?"white":_e.palette.text.primary,mt:2,flex:1,minWidth:"200px"},children:(c==null?void 0:c.title)||"Video Details"}),l.jsxs(te,{sx:{display:"flex",flexDirection:"column",alignItems:"center",p:1.5,backgroundColor:_e.palette.mode==="dark"?"rgba(229, 9, 20, 0.1)":"rgba(229, 9, 20, 0.05)",borderRadius:1.5,border:"1px solid #E50914",minWidth:"120px"},children:[l.jsxs(ge,{variant:"h4",sx:{fontWeight:"bold",color:"#E50914",fontSize:{xs:"1.4rem",sm:"1.6rem"},lineHeight:1},children:["$",c==null?void 0:c.price.toFixed(2)]}),l.jsx(ge,{variant:"caption",sx:{color:_e.palette.mode==="dark"?"#ccc":"#666",fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.3px",mt:.3},children:"One-time"})]})]}),l.jsx(ge,{variant:"body1",paragraph:!0,sx:{color:_e.palette.mode==="dark"?"#ccc":_e.palette.text.secondary,mt:2},children:c==null?void 0:c.description}),l.jsx(te,{sx:{mt:4},children:l.jsxs(Ze,{container:!0,spacing:3,justifyContent:"center",alignItems:"stretch",sx:{mb:4},children:[l.jsxs(Ze,{item:!0,xs:12,md:8,sx:{display:"flex",flexDirection:"column",gap:2},children:[i&&i.startsWith("A")&&l.jsx(te,{sx:{width:"100%",mb:{xs:2,md:0}},children:l.jsx(Xv,{options:{clientId:i,currency:"USD",intent:"capture",disableFunding:"credit",components:"buttons"},children:l.jsx(ph,{fundingSource:void 0,style:{layout:"vertical",color:"gold",shape:"rect",label:"paypal"},onClick:async(Pe,Be)=>(Me("paypal"),Promise.resolve()),createOrder:ke,onApprove:Re})})}),s&&l.jsx(te,{sx:{width:"100%",mb:{xs:2,md:0}},children:l.jsx(He,{variant:"contained",fullWidth:!0,onClick:Je,disabled:P,sx:{py:1.5,backgroundColor:"#635bff",color:"white",fontWeight:"bold",fontSize:16,display:"flex",alignItems:"center",justifyContent:"center",gap:1,"&:hover":{backgroundColor:"#4b45c6"}},children:P?"Processing...":l.jsxs(l.Fragment,{children:[l.jsx(te,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"white",borderRadius:1},children:l.jsx(ge,{variant:"caption",sx:{fontSize:"8px",fontWeight:"bold",color:"black"},children:"🍎"})}),l.jsx(te,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"#FF9900",borderRadius:1},children:l.jsx(ge,{variant:"caption",sx:{fontSize:"6px",fontWeight:"bold",color:"white"},children:"A"})}),l.jsx(te,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"#1A1F71",borderRadius:1},children:l.jsx(ge,{variant:"caption",sx:{fontSize:"7px",fontWeight:"bold",color:"white"},children:"VISA"})}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,bgcolor:"white",borderRadius:1,position:"relative"},children:[l.jsx(te,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#EB001B",position:"absolute",left:6}}),l.jsx(te,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#F79E1B",position:"absolute",right:6}})]}),l.jsx(ge,{variant:"body2",sx:{ml:1,fontSize:"14px",fontWeight:"bold"},children:"Pay Securely"})]})})}),a.length>0&&l.jsx(te,{sx:{width:"100%",mb:{xs:2,md:0}},children:l.jsx(He,{variant:"outlined",fullWidth:!0,startIcon:l.jsx(gu,{}),onClick:()=>le(!0),sx:{py:1.5,borderColor:"#26a17b",color:"#26a17b",fontWeight:"bold",fontSize:16,"&:hover":{borderColor:"#1e1e1e",color:"#fff",background:"#26a17b"}},children:"Pay with Crypto"})})]}),r&&l.jsx(Ze,{item:!0,xs:12,md:4,sx:{display:"flex",alignItems:"center"},children:l.jsx(He,{variant:"outlined",fullWidth:!0,startIcon:l.jsx(ts,{}),href:Ee,target:"_blank",rel:"noopener noreferrer",sx:{py:1.5,height:"100%",borderColor:"#229ED9",color:"#229ED9",fontWeight:"bold",fontSize:16,"&:hover":{borderColor:"#229ED9",color:"#fff",background:"#229ED9"}},children:"Contact on Telegram"})})]})})]}),W.length>0&&l.jsxs(l.Fragment,{children:[l.jsx(ge,{variant:"h5",component:"h2",gutterBottom:!0,sx:{mt:6,mb:3,color:"white"},children:"More Like This"}),l.jsx(Ze,{container:!0,spacing:3,children:W.map(Pe=>l.jsx(Ze,{item:!0,xs:12,sm:6,md:3,children:l.jsx(oh,{video:Pe})},Pe.$id))})]})]})}),l.jsx(Zc,{open:ie,onClose:()=>le(!1),closeAfterTransition:!0,BackdropComponent:Xc,BackdropProps:{timeout:500},"aria-labelledby":"crypto-wallets-modal","aria-describedby":"modal-with-crypto-wallets",children:l.jsx(Ca,{in:ie,children:l.jsxs(te,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"95%",sm:420},bgcolor:_e.palette.mode==="dark"?"#181818":"#fff",borderRadius:3,boxShadow:24,p:4,color:_e.palette.mode==="dark"?"white":_e.palette.text.primary,maxHeight:"90vh",overflowY:"auto"},children:[l.jsxs(te,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[l.jsx(ge,{variant:"h5",sx:{fontWeight:"bold"},children:"Pay with Crypto"}),l.jsx(bn,{onClick:()=>le(!1),children:l.jsx(Cp,{})})]}),l.jsxs(ge,{variant:"body2",sx:{mb:3,color:_e.palette.mode==="dark"?"#aaa":"#555"},children:["Choose one of the wallets below to make your payment. ",l.jsx("br",{}),l.jsx("b",{children:"After payment, send your proof of payment via Telegram for manual confirmation."})]}),a.map((Pe,Be)=>{var Ve,et,Ie,Zt,mt;let Ne="",We="",Qe="";if(Pe.includes(":")){const hr=Pe.split(":");Ne=((Ve=hr[0])==null?void 0:Ve.trim())||"",Qe=((et=hr[1])==null?void 0:et.trim())||"",We=Ne}else if(Pe.includes(`
`)){const hr=Pe.split(`
`),vt=hr[0];if(Qe=((Ie=hr[1])==null?void 0:Ie.trim())||"",vt.includes(" - ")){const Ct=vt.split(" - ");Ne=((Zt=Ct[0])==null?void 0:Zt.trim())||"",We=((mt=Ct[1])==null?void 0:mt.trim())||""}else We=vt.trim(),Ne=vt.trim().split(" ")[0]}else Qe=Pe.trim(),Ne=Pe.trim().split(" ")[0],We="Crypto Wallet";return Qe?l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:2,mb:3,p:2,border:"1px solid",borderColor:_e.palette.mode==="dark"?"#333":"#eee",borderRadius:2,background:_e.palette.mode==="dark"?"#232323":"#fafafa"},children:[l.jsx(te,{sx:{minWidth:40},children:Qv[Ne]||l.jsx(gu,{fontSize:"large"})}),l.jsxs(te,{sx:{flex:1},children:[l.jsx(ge,{variant:"subtitle1",sx:{fontWeight:"bold"},children:We||Ne||"Crypto Wallet"}),l.jsx(ge,{variant:"body2",sx:{wordBreak:"break-all",color:_e.palette.mode==="dark"?"#fff":"#222"},children:Qe})]}),l.jsx(He,{variant:Q===Be?"contained":"outlined",color:Q===Be?"success":"primary",size:"small",startIcon:Q===Be?l.jsx(xa,{}):l.jsx(Bl,{}),onClick:()=>{navigator.clipboard.writeText(Qe),ce(Be),setTimeout(()=>ce(null),2e3)},sx:{minWidth:90},children:Q===Be?"Copied!":"Copy"})]},Be):null}).filter(Boolean),l.jsx(te,{sx:{mt:2,textAlign:"center"},children:l.jsx(He,{variant:"outlined",color:"primary",startIcon:l.jsx(ts,{}),href:Ee,target:"_blank",rel:"noopener noreferrer",children:"Contact on Telegram"})})]})})}),l.jsx(Zc,{open:q,onClose:()=>H(!1),closeAfterTransition:!0,BackdropComponent:Xc,BackdropProps:{timeout:500},"aria-labelledby":"pre-payment-modal","aria-describedby":"modal-before-payment-redirect",children:l.jsx(Ca,{in:q,children:l.jsxs(te,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"95%",sm:400},maxWidth:500,bgcolor:_e.palette.mode==="dark"?"#1e1e1e":_e.palette.background.paper,border:"2px solid #E50914",borderRadius:2,boxShadow:24,p:4,color:_e.palette.mode==="dark"?"white":_e.palette.text.primary},children:[l.jsxs(te,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[l.jsx(ge,{variant:"h5",component:"h2",sx:{fontWeight:"bold"},children:"Processing Payment"}),l.jsx(sn,{size:30,sx:{color:_e.palette.primary.main}})]}),l.jsx(ge,{variant:"body1",sx:{mb:2},children:"You are about to purchase:"}),l.jsx(ge,{variant:"h6",sx:{mb:3,fontWeight:"bold"},children:c==null?void 0:c.title}),l.jsx(Vt,{severity:"info",sx:{mb:3},children:"For your privacy, a generic product name will appear during checkout."}),l.jsxs(ge,{variant:"body2",sx:{mb:2,color:_e.palette.mode==="dark"?"#aaa":"#777",display:"flex",justifyContent:"space-between"},children:[l.jsx("span",{children:"Redirecting in:"})," ",l.jsxs("span",{children:[me," seconds"]})]}),l.jsx(Cu,{variant:"determinate",value:(7-me)*(100/7),sx:{mb:2}}),l.jsx(te,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:l.jsx(He,{variant:"outlined",onClick:()=>H(!1),children:"Cancel"})})]})})})]})};var gh={},tb=_t;Object.defineProperty(gh,"__esModule",{value:!0});var kl=gh.default=void 0,rb=tb(St()),nb=l;kl=gh.default=(0,rb.default)((0,nb.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var mh={},ib=_t;Object.defineProperty(mh,"__esModule",{value:!0});var Ll=mh.default=void 0,sb=ib(St()),ab=l;Ll=mh.default=(0,sb.default)((0,ab.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var vh={},ob=_t;Object.defineProperty(vh,"__esModule",{value:!0});var Cl=vh.default=void 0,lb=ob(St()),cb=l;Cl=vh.default=(0,lb.default)((0,cb.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var bh={},ub=_t;Object.defineProperty(bh,"__esModule",{value:!0});var Op=bh.default=void 0,hb=ub(St()),db=l;Op=bh.default=(0,hb.default)((0,db.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel");var yh={},fb=_t;Object.defineProperty(yh,"__esModule",{value:!0});var bo=yh.default=void 0,pb=fb(St()),gb=l;bo=yh.default=(0,pb.default)((0,gb.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var wh={},mb=_t;Object.defineProperty(wh,"__esModule",{value:!0});var Fp=wh.default=void 0,vb=mb(St()),bb=l;Fp=wh.default=(0,vb.default)((0,bb.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove");var xh={},yb=_t;Object.defineProperty(xh,"__esModule",{value:!0});var Dp=xh.default=void 0,wb=yb(St()),xb=l;Dp=xh.default=(0,wb.default)((0,xb.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8 12.5v-9l6 4.5z"}),"VideoLibrary");var _h={},_b=_t;Object.defineProperty(_h,"__esModule",{value:!0});var Mp=_h.default=void 0,Sb=_b(St()),jb=l;Mp=_h.default=(0,Sb.default)((0,jb.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group");function Gd(n){const{children:e,value:t,index:r,...i}=n;return l.jsx("div",{role:"tabpanel",hidden:t!==r,id:`admin-tabpanel-${r}`,"aria-labelledby":`admin-tab-${r}`,...i,children:t===r&&l.jsx(te,{sx:{p:3},children:e})})}s0("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});const Ab=yo.forwardRef((n,e)=>l.jsx(Vt,{elevation:6,ref:e,variant:"filled",...n}));async function Kd(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(r)).map(s=>s.toString(16).padStart(2,"0")).join("")}const kb=()=>{var Us;const{user:n}=ss(),{refreshConfig:e,updateConfig:t}=En(),[r,i]=R.useState(0),[s,a]=R.useState([]),[u,c]=R.useState(!1),[f,g]=R.useState(null),[m,y]=R.useState(""),[v,A]=R.useState([]),[x,k]=R.useState(!1),[w,I]=R.useState(null),[F,Z]=R.useState(""),[ae,re]=R.useState(""),[G,M]=R.useState(""),[z,W]=R.useState(""),[j,E]=R.useState(null),[V,U]=R.useState(null),[X,ie]=R.useState(!1),[le,Q]=R.useState(0),[ce,ve]=R.useState(null),[Oe,P]=R.useState([]),[D,q]=R.useState([]),[H,ne]=R.useState(!1),[fe,me]=R.useState([]),[pe,_e]=R.useState(null),[Le,Te]=R.useState(!1),[Ee,Xe]=R.useState(""),[ye,$]=R.useState(""),[it,ze]=R.useState(""),[ke,Re]=R.useState(null),[Me,Fe]=R.useState(""),[Je,Pe]=R.useState(""),[Be,Ne]=R.useState(""),[We,Qe]=R.useState(""),[Ve,et]=R.useState(""),[Ie,Zt]=R.useState(""),[mt,hr]=R.useState(""),[vt,Ct]=R.useState([]),[Hr,jt]=R.useState(""),[Hn,Ht]=R.useState("BTC"),[kr,on]=R.useState(!1),[$t,ct]=R.useState(""),[At,Gn]=R.useState(""),[dr,ln]=R.useState(!1),[cn,nt]=R.useState(""),[Gr,un]=R.useState(""),[Lr,Xt]=R.useState(""),[Kt,Er]=R.useState(""),[ci,_n]=R.useState(""),[Kr,Jr]=R.useState(""),[Yr,hn]=R.useState(""),[$r,dn]=R.useState(""),ui=[{code:"BTC",name:"Bitcoin"},{code:"ETH",name:"Ethereum"},{code:"USDT",name:"Tether USD"},{code:"BNB",name:"Binance Coin"},{code:"SOL",name:"Solana"},{code:"XRP",name:"Ripple"},{code:"ADA",name:"Cardano"},{code:"DOGE",name:"Dogecoin"},{code:"AVAX",name:"Avalanche"},{code:"DOT",name:"Polkadot"},{code:"MATIC",name:"Polygon"},{code:"SHIB",name:"Shiba Inu"}],[ki,fn]=R.useState(!1),[Zr,Tn]=R.useState(null),[Fs,os]=R.useState(!1),[Ra,Li]=R.useState(""),[Ds,Oa]=R.useState("success");R.useRef(null),R.useEffect(()=>{const ue=Ye=>{const Ke=Ye;Li(Ke.detail.message),Oa(Ke.detail.severity),os(!0)};return document.addEventListener("show-feedback",ue),()=>{document.removeEventListener("show-feedback",ue)}},[]);const ls=(ue,Ye)=>{i(Ye)};R.useEffect(()=>{r===0?cs():r===1&&(Ci(),us())},[r]);const cs=async()=>{try{c(!0),g(null);const ue=await zt.getAllVideos();console.log(`Admin: Fetched ${ue.length} videos using VideoService`);const Ye=ue.map(Ke=>({$id:Ke.$id,title:Ke.title,description:Ke.description,price:Ke.price,product_link:Ke.product_link||"",video_id:Ke.video_id||Ke.videoFileId,thumbnail_id:Ke.thumbnail_id||Ke.thumbnailFileId,created_at:Ke.created_at,is_active:!0,duration:typeof Ke.duration=="string"?Ke.duration.split(":").reduce((rt,Cr)=>60*rt+parseInt(Cr),0):void 0}));a(Ye),A(Ye)}catch(ue){console.error("Error fetching videos:",ue),g("Failed to load videos. Please try again.")}finally{c(!1)}},Ci=async()=>{try{c(!0),g(null);const Ye=(await nr.listUsers()).map(Ke=>({$id:Ke.id,email:Ke.email,name:Ke.name,password:"",created_at:Ke.created_at}));me(Ye)}catch(ue){console.error("Error fetching users:",ue),g("Failed to load users. Please try again.")}finally{c(!1)}},us=async()=>{var ue,Ye,Ke,rt,Cr,lt;try{c(!0),g(null);const qt=await fetch("/api/site-config");if(!qt.ok)throw new Error(`Failed to fetch site config: ${qt.status}`);const wt=await qt.json(),Pt={$id:wt.id||"site-config",site_name:wt.site_name||"",paypal_client_id:wt.paypal_client_id||"",paypal_me_username:wt.paypal_me_username||"",stripe_publishable_key:wt.stripe_publishable_key||"",stripe_secret_key:wt.stripe_secret_key||"",telegram_username:wt.telegram_username||"",video_list_title:wt.video_list_title||"Available Videos",crypto:Array.isArray(wt.crypto)?wt.crypto:[],email:wt.email||{},wasabi_config:wt.wasabi_config||wt.wasabiConfig||void 0};Re(Pt),Fe(Pt.site_name),Pe(Pt.paypal_client_id),Ne(Pt.paypal_me_username||""),Qe(Pt.stripe_publishable_key||""),et(Pt.stripe_secret_key||""),Zt(Pt.telegram_username),hr(Pt.video_list_title||"Available Videos"),Ct(Pt.crypto||[]),ct(((ue=Pt.email)==null?void 0:ue.host)||""),Gn(((Ye=Pt.email)==null?void 0:Ye.port)||""),ln(!!((Ke=Pt.email)!=null&&Ke.secure)),nt(((rt=Pt.email)==null?void 0:rt.user)||""),un(((Cr=Pt.email)==null?void 0:Cr.pass)||""),Xt(((lt=Pt.email)==null?void 0:lt.from)||""),Pt.wasabi_config&&(Er(Pt.wasabi_config.accessKey||Pt.wasabi_config.access_key||""),_n(Pt.wasabi_config.secretKey||Pt.wasabi_config.secret_key||""),Jr(Pt.wasabi_config.region||""),hn(Pt.wasabi_config.bucket||""),dn(Pt.wasabi_config.endpoint||""))}catch(ir){console.error("Error fetching site config:",ir),g("Failed to load site configuration")}finally{c(!1)}};R.useEffect(()=>{if(!m.trim())A(s);else{const ue=m.toLowerCase().trim(),Ye=s.filter(Ke=>Ke.title.toLowerCase().includes(ue)||Ke.description.toLowerCase().includes(ue));A(Ye)}},[m,s]);const Pi=async ue=>{try{c(!0),g(null),await zt.deleteVideo(ue)?(tr("Video successfully deleted!","success"),cs()):tr("Failed to delete video","error")}catch(Ye){console.error("Error deleting video:",Ye),tr("Failed to delete video. Please try again.","error")}finally{c(!1),fn(!1),Tn(null)}},Fa=async ue=>{try{c(!0),g(null);let Ye=!1;try{await nr.deleteUser(ue),Ye=!0}catch{Ye=!1}Ye?(tr("User successfully deleted!","success"),Ci()):tr("Failed to delete user","error")}catch(Ye){console.error("Error deleting user:",Ye),tr("Failed to delete user. Please try again.","error")}finally{c(!1),fn(!1),Tn(null)}},Jt=()=>{const Ye={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,videoFile:null,duration:null};P([...Oe,Ye])},Ms=ue=>{P(Oe.filter(Ye=>Ye.id!==ue))},hs=(ue,Ye,Ke)=>{P(Oe.map(rt=>rt.id===ue?{...rt,[Ye]:Ke}:rt))},Bs=async()=>{try{if(ie(!0),g(null),Q(0),!F||!ae||!G){tr("Please fill in all required fields","error");return}const ue=parseFloat(G);if(isNaN(ue)||ue<0){tr("Please enter a valid price","error");return}let Ye="",Ke="";if(w){const lt=s.find(ir=>ir.$id===w);lt&&(Ye=lt.video_id||lt.videoFileId||"",Ke=lt.thumbnail_id||lt.thumbnailFileId||"")}if(j){Q(20);const lt=await In.uploadFile(j,"videos");if(!lt.success){tr("Failed to upload video file","error");return}Ye=lt.fileId,Q(60)}if(V){const lt=await In.uploadFile(V,"thumbnails");if(!lt.success){tr("Failed to upload thumbnail","error");return}Ke=lt.fileId,Q(80)}const rt={title:F,description:ae,price:ue,productLink:z||void 0,isActive:!0};ce?rt.duration=`${Math.floor(ce/60)}:${(ce%60).toString().padStart(2,"0")}`:w||(rt.duration="00:00"),Ye&&(rt.videoFileId=Ye,rt.video_id=Ye),Ke&&(rt.thumbnailFileId=Ke,rt.thumbnail_id=Ke),Q(90);const Cr=async lt=>{let ir=0;console.log("[admin] uploadAndInsert using sourceFiles:",D.map(qt=>qt.name));for(let qt=0;qt<D.length;qt++){const wt=D[qt];console.log(`[admin] uploading source ${qt+1}/${D.length}:`,wt.name,wt.type,wt.size);const Pt=await In.uploadFile(wt,"videos");if(!Pt.success){tr("Failed to upload a source file","error");continue}const Rn=void 0;try{await nr.addVideoSource(lt,Pt.fileId,Rn,qt+1),ir++}catch(hi){console.error("Failed to insert video source:",hi)}}return ir};if(nr.isConfigured()){let lt="";if(w){const qt={title:rt.title,description:rt.description,price:rt.price,duration:rt.duration,video_file_id:rt.videoFileId,thumbnail_file_id:rt.thumbnailFileId,product_link:rt.productLink,is_active:!0};await nr.updateVideo(w,qt),lt=w,tr("Video updated successfully!","success")}else lt=(await nr.createVideo({title:rt.title,description:rt.description,price:rt.price,duration:rt.duration,video_file_id:rt.videoFileId,thumbnail_file_id:rt.thumbnailFileId,product_link:rt.productLink,is_active:!0})).id,tr("Video uploaded successfully!","success");const ir=D.length>0;if(console.log("[admin] hasSources:",ir,"sourceFiles:",D.map(qt=>qt.name)),ir){console.log("[admin] calling uploadAndInsert for video:",lt);const qt=await Cr(lt);tr(`Uploaded ${qt} source(s)`,"success")}cs(),k(!1),I(null)}else tr("Supabase not configured","error");Q(100),Z(""),re(""),M(""),W(""),E(null),U(null),ve(null),q([])}catch(ue){console.error("Error saving video:",ue),tr("Failed to save video. Please try again.","error")}finally{ie(!1),Q(0)}},ds=async()=>{var ue,Ye,Ke,rt,Cr;try{c(!0),g(null);const lt={siteName:Me,paypalClientId:Je,paypalMeUsername:Be,stripePublishableKey:We,stripeSecretKey:Ve,telegramUsername:Ie,videoListTitle:mt,crypto:vt,emailHost:$t,emailPort:At,emailSecure:dr,emailUser:cn,emailPass:Gr,emailFrom:Lr,wasabiConfig:{accessKey:Kt,secretKey:ci,region:Kr,bucket:Yr,endpoint:$r}},ir="",qt={site_name:lt.siteName,paypal_client_id:lt.paypalClientId,paypal_me_username:lt.paypalMeUsername,stripe_publishable_key:lt.stripePublishableKey,stripe_secret_key:lt.stripeSecretKey,telegram_username:lt.telegramUsername,video_list_title:lt.videoListTitle,crypto:lt.crypto,email:{host:lt.emailHost,port:lt.emailPort,secure:lt.emailSecure,user:lt.emailUser,pass:lt.emailPass,from:lt.emailFrom}},wt=lt.wasabiConfig||{};[wt.accessKey,wt.secretKey,wt.region,wt.bucket,wt.endpoint].every(hi=>typeof hi=="string"?hi.trim().length>0:!!hi)&&(qt.wasabi_config={accessKey:(ue=wt.accessKey)==null?void 0:ue.trim(),secretKey:(Ye=wt.secretKey)==null?void 0:Ye.trim(),region:(Ke=wt.region)==null?void 0:Ke.trim(),bucket:(rt=wt.bucket)==null?void 0:rt.trim(),endpoint:(Cr=wt.endpoint)==null?void 0:Cr.trim()});const Rn=await fetch(`${ir}/api/site-config`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(qt)});if(!Rn.ok)throw new Error(`Failed to save config: ${Rn.status} ${Rn.statusText}`);tr("Configuration saved successfully!","success"),on(!1),us()}catch(lt){console.error("Error saving configuration:",lt),tr("Failed to save configuration. Please try again.","error")}finally{c(!1)}};return l.jsxs(yn,{maxWidth:"lg",sx:{py:4},children:[l.jsxs(Nr,{elevation:3,sx:{mb:4},children:[l.jsx(te,{sx:{borderBottom:1,borderColor:"divider"},children:l.jsxs(a0,{value:r,onChange:ls,"aria-label":"admin tabs",children:[l.jsx(id,{icon:l.jsx(Dp,{}),label:"Manage Videos"}),l.jsx(id,{icon:l.jsx(Po,{}),label:"Site Configuration & Users"})]})}),l.jsxs(Gd,{value:r,index:0,children:[l.jsxs(te,{sx:{mb:4},children:[l.jsxs(Ze,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",children:[l.jsx(Ze,{item:!0,children:l.jsx(ge,{variant:"h5",component:"h2",gutterBottom:!0,children:"Manage Videos"})}),l.jsx(Ze,{item:!0,children:l.jsx(He,{variant:"contained",color:"primary",startIcon:l.jsx(bo,{}),onClick:()=>k(!x),children:x?"Hide Form":"Upload New Video"})})]}),f&&l.jsx(Vt,{severity:"error",sx:{mb:2,mt:2},children:f})]}),u&&!f?l.jsx(te,{sx:{display:"flex",justifyContent:"center",my:4},children:l.jsx(sn,{})}):l.jsxs(l.Fragment,{children:[l.jsx(te,{sx:{mb:2,display:"flex",alignItems:"center"},children:l.jsx(Lt,{fullWidth:!0,placeholder:"Pesquisar vídeos...",value:m,onChange:ue=>y(ue.target.value),variant:"outlined",size:"small",InputProps:{startAdornment:l.jsx(Co,{sx:{color:"action.active",mr:1}})}})}),l.jsx(sd,{component:Nr,children:l.jsxs(ad,{children:[l.jsx(od,{children:l.jsxs(la,{children:[l.jsx(mr,{children:"Title"}),l.jsx(mr,{children:"Price"}),l.jsx(mr,{children:"Duration"}),l.jsx(mr,{children:"Status"}),l.jsx(mr,{children:"Actions"})]})}),l.jsxs(ld,{children:[v.map(ue=>l.jsxs(la,{children:[l.jsx(mr,{children:ue.title}),l.jsxs(mr,{children:["$",ue.price]}),l.jsx(mr,{children:ue.duration?`${Math.floor(ue.duration/60)}:${(ue.duration%60).toString().padStart(2,"0")}`:"00:00"}),l.jsx(mr,{children:ue.is_active?"Active":"Inactive"}),l.jsxs(mr,{children:[l.jsx(bn,{color:"primary",onClick:()=>{Z(ue.title),re(ue.description),M(ue.price.toString()),W(ue.product_link||""),ve(ue.duration||null),I(ue.$id),k(!0)},"aria-label":"edit video",size:"small",sx:{mr:1},children:l.jsx(Cl,{fontSize:"small"})}),l.jsx(bn,{color:"error",onClick:()=>{Tn({type:"video",id:ue.$id}),fn(!0)},"aria-label":"delete video",children:l.jsx(kl,{})})]})]},ue.$id)),v.length===0&&l.jsx(la,{children:l.jsx(mr,{colSpan:5,align:"center",children:m.trim()?"No videos found matching your search":"No videos found"})})]})]})})]}),x&&l.jsxs(Nr,{sx:{p:3,mt:3},children:[l.jsx(ge,{variant:"h6",component:"h3",sx:{mb:3},children:w?"Edit Video":"Upload New Video"}),l.jsxs(Ze,{container:!0,spacing:3,children:[l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(Lt,{fullWidth:!0,label:"Video Title",value:F,onChange:ue=>Z(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Description",value:ae,onChange:ue=>re(ue.target.value),variant:"outlined",multiline:!0,rows:3,sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Price (USD)",type:"number",value:G,onChange:ue=>M(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Product Link (optional)",value:z,onChange:ue=>W(ue.target.value),variant:"outlined",sx:{mb:2}})]}),l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsxs(te,{sx:{mb:2},children:[l.jsx(ge,{variant:"subtitle2",sx:{mb:1},children:"Video File"}),l.jsx("input",{type:"file",accept:"video/*",onChange:ue=>{var Ke;const Ye=(Ke=ue.target.files)==null?void 0:Ke[0];if(Ye){E(Ye);const rt=document.createElement("video");rt.preload="metadata",rt.onloadedmetadata=()=>{ve(rt.duration)},rt.src=URL.createObjectURL(Ye)}},style:{width:"100%"}})]}),l.jsxs(te,{sx:{mb:2},children:[l.jsx(ge,{variant:"subtitle2",sx:{mb:1},children:"Thumbnail Image"}),l.jsx("input",{type:"file",accept:"image/*",onChange:ue=>{var Ke;const Ye=(Ke=ue.target.files)==null?void 0:Ke[0];Ye&&U(Ye)},style:{width:"100%"}})]}),ce&&l.jsxs(ge,{variant:"body2",color:"text.secondary",children:["Duration: ",Math.floor(ce/60),":",(ce%60).toString().padStart(2,"0")]})]})]}),l.jsxs(te,{sx:{mt:4,mb:3},children:[l.jsxs(te,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[l.jsx(ge,{variant:"h6",component:"h4",children:"Related Videos (Optional)"}),l.jsx(He,{variant:"outlined",size:"small",onClick:()=>{const ue=!H;ne(ue),ue&&Oe.length===0&&P([{id:Date.now().toString(),videoFile:null,duration:null}])},startIcon:H?l.jsx(Fp,{}):l.jsx(bo,{}),children:H?"Hide Related Videos":"Add Related Videos"})]}),H&&l.jsxs(te,{sx:{border:"1px dashed #ccc",borderRadius:2,p:2},children:[l.jsx(ge,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Add multiple source files for this title. These will appear as previews and parts."}),Oe.map((ue,Ye)=>l.jsxs(Nr,{sx:{p:2,mb:2,bgcolor:"background.default"},children:[l.jsxs(te,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[l.jsxs(ge,{variant:"subtitle2",children:["Source ",Ye+1]}),l.jsx(He,{size:"small",color:"error",onClick:()=>Ms(ue.id),startIcon:l.jsx(kl,{}),children:"Remove"})]}),l.jsxs(Ze,{container:!0,spacing:2,children:[l.jsx(Ze,{item:!0,xs:12,md:6,children:l.jsx(ge,{variant:"caption",sx:{mb:.5,display:"block"},children:"Source ordering is based on the list position."})}),l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsxs(te,{sx:{mb:1},children:[l.jsx(ge,{variant:"caption",sx:{mb:.5,display:"block"},children:"Video File"}),l.jsx("input",{type:"file",accept:"video/*",onChange:Ke=>{var Cr;const rt=(Cr=Ke.target.files)==null?void 0:Cr[0];if(rt){console.log("[admin] source file selected:",rt.name,rt.type,rt.size),console.log("[admin] updating relatedVideo with id:",ue.id),hs(ue.id,"videoFile",rt),q(ir=>[...ir,rt]),console.log("[admin] sourceFiles updated:",[...D,rt].map(ir=>ir.name));const lt=document.createElement("video");lt.preload="metadata",lt.onloadedmetadata=()=>{hs(ue.id,"duration",lt.duration)},lt.src=URL.createObjectURL(rt)}},style:{width:"100%",fontSize:"14px"}})]}),ue.videoFile&&l.jsxs(ge,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:["Selected: ",ue.videoFile.name]}),ue.duration&&l.jsxs(ge,{variant:"caption",color:"text.secondary",children:["Duration: ",Math.floor(ue.duration/60),":",(ue.duration%60).toString().padStart(2,"0")]})]})]})]},ue.id)),l.jsx(He,{variant:"outlined",onClick:Jt,startIcon:l.jsx(bo,{}),sx:{mt:1},children:"Add Another Source"}),l.jsxs(ge,{variant:"caption",sx:{display:"block",mt:1,color:"text.secondary"},children:["Sources added: ",D.length," / ",Oe.length]})]})]}),l.jsxs(te,{sx:{display:"flex",gap:2,mt:3},children:[l.jsx(He,{variant:"contained",color:"primary",onClick:Bs,disabled:X||!F||!ae||!G,startIcon:X?l.jsx(sn,{size:20}):l.jsx(Ll,{}),children:X?"Uploading...":w?"Update Video":"Upload Video"}),l.jsx(He,{variant:"outlined",onClick:()=>{k(!1),I(null),Z(""),re(""),M(""),W(""),E(null),U(null),ve(null),P([]),ne(!1)},children:"Cancel"})]}),le>0&&l.jsxs(te,{sx:{mt:2},children:[l.jsxs(ge,{variant:"body2",color:"text.secondary",children:["Upload Progress: ",le,"%"]}),l.jsx(Cu,{variant:"determinate",value:le})]})]})]}),l.jsxs(Gd,{value:r,index:1,children:[l.jsxs(te,{sx:{mb:4},children:[l.jsxs(Ze,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[l.jsx(Ze,{item:!0,children:l.jsx(ge,{variant:"h5",component:"h2",children:"Site Configuration"})}),l.jsx(Ze,{item:!0,children:l.jsx(He,{variant:"contained",color:"primary",onClick:()=>on(!kr),startIcon:kr?l.jsx(Op,{}):l.jsx(Cl,{}),children:kr?"Cancel Edit":"Edit Config"})})]}),f&&l.jsx(Vt,{severity:"error",sx:{mb:2,mt:2},children:f})]}),kr&&l.jsxs(Nr,{sx:{p:3,mb:3},children:[l.jsx(ge,{variant:"h6",component:"h3",sx:{mb:3},children:"Site Settings"}),l.jsxs(Ze,{container:!0,spacing:3,children:[l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(Lt,{fullWidth:!0,label:"Site Name",value:Me,onChange:ue=>Fe(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Video List Title",value:mt,onChange:ue=>hr(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Telegram Username",value:Ie,onChange:ue=>Zt(ue.target.value),variant:"outlined",placeholder:"@username",sx:{mb:2}})]}),l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(ge,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Payment Settings"}),l.jsx(Lt,{fullWidth:!0,label:"PayPal Client ID",value:Je,onChange:ue=>Pe(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"PayPal.me Username",value:Be,onChange:ue=>Ne(ue.target.value),variant:"outlined",placeholder:"@username",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Stripe Publishable Key",value:We,onChange:ue=>Qe(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Stripe Secret Key",type:"password",value:Ve,onChange:ue=>et(ue.target.value),variant:"outlined",sx:{mb:2}})]}),l.jsx(Ze,{item:!0,xs:12,children:l.jsx(ge,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Email Settings"})}),l.jsxs(Ze,{item:!0,xs:12,md:4,children:[l.jsx(Lt,{fullWidth:!0,label:"SMTP Host",value:$t,onChange:ue=>ct(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"SMTP Port",value:At,onChange:ue=>Gn(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(o0,{control:l.jsx(l0,{checked:dr,onChange:ue=>ln(ue.target.checked)}),label:"Use SSL/TLS",sx:{mb:2}})]}),l.jsxs(Ze,{item:!0,xs:12,md:4,children:[l.jsx(Lt,{fullWidth:!0,label:"Email Username",value:cn,onChange:ue=>nt(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Email Password",type:"password",value:Gr,onChange:ue=>un(ue.target.value),variant:"outlined",sx:{mb:2}})]}),l.jsx(Ze,{item:!0,xs:12,md:4,children:l.jsx(Lt,{fullWidth:!0,label:"From Email",value:Lr,onChange:ue=>Xt(ue.target.value),variant:"outlined",sx:{mb:2}})}),l.jsx(Ze,{item:!0,xs:12,children:l.jsx(ge,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Wasabi Storage Settings"})}),l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(Lt,{fullWidth:!0,label:"Access Key",value:Kt,onChange:ue=>Er(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Secret Key",type:"password",value:ci,onChange:ue=>_n(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Region",value:Kr,onChange:ue=>Jr(ue.target.value),variant:"outlined",sx:{mb:2}})]}),l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(Lt,{fullWidth:!0,label:"Bucket Name",value:Yr,onChange:ue=>hn(ue.target.value),variant:"outlined",sx:{mb:2}}),l.jsx(Lt,{fullWidth:!0,label:"Endpoint",value:$r,onChange:ue=>dn(ue.target.value),variant:"outlined",sx:{mb:2}})]}),l.jsxs(Ze,{item:!0,xs:12,children:[l.jsx(ge,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:"Cryptocurrency Wallets"}),l.jsxs(te,{sx:{display:"flex",gap:2,mb:2},children:[l.jsxs(wf,{sx:{minWidth:120},children:[l.jsx(xf,{children:"Crypto"}),l.jsx(_f,{value:Hn,onChange:ue=>Ht(ue.target.value),label:"Crypto",children:ui.map(ue=>l.jsxs(ma,{value:ue.code,children:[ue.name," (",ue.code,")"]},ue.code))})]}),l.jsx(Lt,{label:"Wallet Address",value:Hr,onChange:ue=>jt(ue.target.value),variant:"outlined",sx:{flexGrow:1}}),l.jsx(He,{variant:"outlined",onClick:()=>{Hr.trim()&&(Ct([...vt,`${Hn}:${Hr}`]),jt(""))},children:"Add"})]}),vt.length>0&&l.jsx(te,{children:vt.map((ue,Ye)=>l.jsx(Gt,{label:ue,onDelete:()=>{Ct(vt.filter((Ke,rt)=>rt!==Ye))},sx:{mr:1,mb:1}},Ye))})]})]}),l.jsxs(te,{sx:{display:"flex",gap:2,mt:3},children:[l.jsx(He,{variant:"contained",color:"primary",onClick:ds,startIcon:l.jsx(Ll,{}),children:"Save Configuration"}),l.jsx(He,{variant:"outlined",onClick:()=>{on(!1),us()},children:"Cancel"})]})]}),!kr&&ke&&l.jsxs(Nr,{sx:{p:3,mb:3},children:[l.jsx(ge,{variant:"h6",component:"h3",sx:{mb:3},children:"Current Configuration"}),l.jsxs(Ze,{container:!0,spacing:3,children:[l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"Site Name"}),l.jsx(ge,{variant:"body1",sx:{mb:2},children:ke.site_name||"Not set"}),l.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"Video List Title"}),l.jsx(ge,{variant:"body1",sx:{mb:2},children:ke.video_list_title||"Not set"}),l.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"Telegram Username"}),l.jsx(ge,{variant:"body1",sx:{mb:2},children:ke.telegram_username||"Not set"})]}),l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"PayPal Client ID"}),l.jsx(ge,{variant:"body1",sx:{mb:2},children:ke.paypal_client_id?"***"+ke.paypal_client_id.slice(-4):"Not set"}),l.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"Stripe Publishable Key"}),l.jsx(ge,{variant:"body1",sx:{mb:2},children:ke.stripe_publishable_key?"***"+ke.stripe_publishable_key.slice(-4):"Not set"}),l.jsx(ge,{variant:"subtitle2",color:"text.secondary",children:"Wasabi Bucket"}),l.jsx(ge,{variant:"body1",sx:{mb:2},children:((Us=ke.wasabi_config)==null?void 0:Us.bucket)||"Not set"})]})]})]}),l.jsxs(te,{sx:{mb:4},children:[l.jsxs(Ze,{container:!0,spacing:2,alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[l.jsx(Ze,{item:!0,children:l.jsxs(ge,{variant:"h5",component:"h2",children:[l.jsx(Mp,{sx:{mr:1,verticalAlign:"middle"}}),"Admin Users Management"]})}),l.jsx(Ze,{item:!0,children:l.jsx(He,{variant:"contained",color:"primary",startIcon:l.jsx(bo,{}),onClick:()=>{Te(!0),Xe(""),$(""),ze(""),_e(null)},children:"Add New Admin"})})]}),u&&!f?l.jsx(te,{sx:{display:"flex",justifyContent:"center",my:4},children:l.jsx(sn,{})}):l.jsx(l.Fragment,{children:l.jsx(sd,{component:Nr,children:l.jsxs(ad,{children:[l.jsx(od,{children:l.jsxs(la,{children:[l.jsx(mr,{children:"Name"}),l.jsx(mr,{children:"Email"}),l.jsx(mr,{children:"Created"}),l.jsx(mr,{children:"Actions"})]})}),l.jsxs(ld,{children:[fe.map(ue=>l.jsxs(la,{children:[l.jsx(mr,{children:ue.name}),l.jsx(mr,{children:ue.email}),l.jsx(mr,{children:ue.created_at?new Date(ue.created_at).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit"}):"N/A"}),l.jsxs(mr,{children:[l.jsx(bn,{color:"primary",onClick:()=>{Xe(ue.name),$(ue.email),ze(""),_e(ue.$id),Te(!1)},"aria-label":"edit user",size:"small",sx:{mr:1},children:l.jsx(Cl,{fontSize:"small"})}),l.jsx(bn,{color:"error",onClick:()=>{Tn({type:"user",id:ue.$id}),fn(!0)},"aria-label":"delete user",children:l.jsx(kl,{})})]})]},ue.$id)),fe.length===0&&l.jsx(la,{children:l.jsx(mr,{colSpan:4,align:"center",children:"No admin users found"})})]})]})})})]}),(Le||pe)&&l.jsxs(Nr,{sx:{p:3,mt:3},children:[l.jsx(ge,{variant:"h6",component:"h3",sx:{mb:3},children:Le?"Add New Admin User":"Edit Admin User"}),l.jsxs(Ze,{container:!0,spacing:3,children:[l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsx(Lt,{fullWidth:!0,label:"Full Name",value:Ee,onChange:ue=>Xe(ue.target.value),variant:"outlined",sx:{mb:2},required:!0}),l.jsx(Lt,{fullWidth:!0,label:"Email Address",type:"email",value:ye,onChange:ue=>$(ue.target.value),variant:"outlined",sx:{mb:2},required:!0}),l.jsx(Lt,{fullWidth:!0,label:"Password",type:"password",value:it,onChange:ue=>ze(ue.target.value),variant:"outlined",sx:{mb:2},required:!0,helperText:pe?"Leave blank to keep current password":"Enter a secure password"})]}),l.jsxs(Ze,{item:!0,xs:12,md:6,children:[l.jsxs(Vt,{severity:"info",sx:{mb:2},children:[l.jsxs(ge,{variant:"body2",children:[l.jsx("strong",{children:"Admin users"})," have full access to:"]}),l.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[l.jsx("li",{children:"Manage videos (upload, edit, delete)"}),l.jsx("li",{children:"Configure site settings"}),l.jsx("li",{children:"Manage other admin users"}),l.jsx("li",{children:"Access all administrative functions"})]})]}),pe&&l.jsx(Vt,{severity:"warning",sx:{mb:2},children:l.jsxs(ge,{variant:"body2",children:[l.jsx("strong",{children:"Warning:"})," Changing user credentials will require the user to log in again."]})})]})]}),l.jsxs(te,{sx:{display:"flex",gap:2,mt:3},children:[l.jsx(He,{variant:"contained",color:"primary",onClick:async()=>{try{if(c(!0),g(null),!Ee||!ye||!it&&Le){tr("Please fill in all required fields","error");return}if(Le){const ue=await Kd(it),Ye={name:Ee,email:ye,password_hash:ue,role:"admin"};await nr.createUser(Ye),tr("Admin user created successfully!","success")}else if(pe){const ue={name:Ee,email:ye};if(it.trim()){const Ye=await Kd(it);ue.password_hash=Ye}await nr.updateUser(pe,ue),tr("Admin user updated successfully!","success")}Te(!1),_e(null),Xe(""),$(""),ze(""),Ci()}catch(ue){console.error("Error saving user:",ue),tr("Failed to save user. Please try again.","error")}finally{c(!1)}},startIcon:l.jsx(Ll,{}),disabled:u,children:u?"Saving...":Le?"Create Admin User":"Update Admin User"}),l.jsx(He,{variant:"outlined",onClick:()=>{Te(!1),_e(null),Xe(""),$(""),ze("")},children:"Cancel"})]})]})]})]}),l.jsxs(Pu,{open:ki,onClose:()=>fn(!1),"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[l.jsx(Iu,{id:"delete-dialog-title",children:"Confirm Deletion"}),l.jsx(Nu,{children:l.jsxs(c0,{id:"delete-dialog-description",children:["Are you sure you want to delete this ",Zr==null?void 0:Zr.type,"? This action cannot be undone."]})}),l.jsxs(jf,{children:[l.jsx(He,{onClick:()=>fn(!1),children:"Cancel"}),l.jsx(He,{onClick:()=>{Zr&&(Zr.type==="video"?Pi(Zr.id):Fa(Zr.id))},color:"error",autoFocus:!0,children:"Delete"})]})]}),l.jsx(Af,{open:Fs,autoHideDuration:6e3,onClose:()=>os(!1),children:l.jsx(Ab,{onClose:()=>os(!1),severity:Ds,children:Ra})})]})};function tr(n,e){const t=new CustomEvent("show-feedback",{detail:{message:n,severity:e}});document.dispatchEvent(t)}var Sh={},Lb=_t;Object.defineProperty(Sh,"__esModule",{value:!0});var Bp=Sh.default=void 0,Cb=Lb(St()),Pb=l;Bp=Sh.default=(0,Cb.default)((0,Pb.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");const Ib=({onError:n})=>{const[e,t]=R.useState(null),[r,i]=R.useState(!0),[s,a]=R.useState([]),[u,c]=R.useState(!1),[f,g]=R.useState(300),m=()=>{const A=Date.now(),x=5*60*1e3,k=A%x,w=x-k;return Math.ceil(w/1e3)},y=A=>{if(A.length===0)return null;const x=Date.now(),k=5*60*1e3,I=Math.floor(x/k)%A.length;return A[I]},v=async(A=!1)=>{try{if(A?c(!0):i(!0),s.length===0){const x=await zt.getAllVideos();if(a(x),x.length>0){const k=y(x);k&&t(k)}}else{const x=y(s);x&&t(x)}}catch(x){console.error("Error fetching featured video:",x),n&&n("Failed to load featured content")}finally{i(!1),A&&setTimeout(()=>{c(!1)},500)}};return R.useEffect(()=>{v(),g(m())},[]),R.useEffect(()=>{const A=setInterval(()=>{s.length>0&&(v(!0),g(m()))},3e5);return()=>clearInterval(A)},[s.length]),R.useEffect(()=>{const A=setInterval(()=>{g(m())},1e3);return()=>clearInterval(A)},[]),null},Uc=(n,e)=>{const t=Math.ceil(n),r=Math.floor(e);return Math.floor(Math.random()*(r-t+1))+t},Nb=({telegramLink:n,telegramUsername:e,prefilledMessage:t})=>{const[r,i]=R.useState(()=>Uc(0,100)),[s,a]=R.useState(!1),{stripePublishableKey:u}=En(),c=R.useMemo(()=>Uc(700,1300),[]);R.useEffect(()=>{const v=setInterval(()=>{i(A=>{const x=Uc(-5,6),k=A+x;return Math.min(100,Math.max(0,k))})},4e3);return()=>clearInterval(v)},[]);const f=`${c}+`,g=t||"Hi! I'm interested in the $85 offer including all content. Could you guide me on how to pay?",m=(()=>{try{if(n)return n;if(e)return`https://t.me/${e}?text=${encodeURIComponent(g)}`;const v=typeof window<"u"?window.location.origin:"";return`https://t.me/share/url?url=${encodeURIComponent(v)}&text=${encodeURIComponent(g)}`}catch{return"https://t.me/"}})(),y=async()=>{if(!u){alert("Stripe configuration is missing. Please contact support.");return}try{a(!0),await si.initStripe(u);const v=["Premium Content Package","Digital Media Collection","Exclusive Content Bundle","Premium Access Package"],A=v[Math.floor(Math.random()*v.length)],x=`${window.location.origin}/?payment_success=true&session_id={CHECKOUT_SESSION_ID}`,k=`${window.location.origin}/?payment_canceled=true`,w=await si.createCheckoutSession(85,"usd",A,x,k);await si.redirectToCheckout(w)}catch(v){console.error("Error processing Stripe payment:",v),alert("Failed to initialize payment. Please try again.")}finally{a(!1)}};return l.jsx(te,{sx:{width:"100%",mb:3,px:{xs:2,sm:3}},children:l.jsxs(te,{sx:{position:"relative",maxWidth:800,mx:"auto",borderRadius:4,p:{xs:2.5,sm:3.5},color:"white",background:"linear-gradient(135deg, #FF0F50, #D10D42, #FF3871, #FF6B9D)",backgroundSize:"300% 300%",animation:"gradientMove 8s ease infinite, shimmer 3s ease-in-out infinite",boxShadow:"0 8px 32px rgba(255, 15, 80, 0.3), 0 0 0 1px rgba(255,255,255,0.1)",overflow:"hidden",border:"2px solid rgba(255,255,255,0.2)",backdropFilter:"blur(10px)",transform:"perspective(1000px) rotateX(2deg)",transition:"all 0.3s ease","&:hover":{transform:"perspective(1000px) rotateX(0deg) scale(1.02)",boxShadow:"0 12px 48px rgba(255, 15, 80, 0.4), 0 0 0 2px rgba(255,255,255,0.3)"},"@keyframes gradientMove":{"0%":{backgroundPosition:"0% 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0% 50%"}},"@keyframes shimmer":{"0%":{boxShadow:"0 8px 32px rgba(255, 15, 80, 0.3)"},"50%":{boxShadow:"0 8px 32px rgba(255, 15, 80, 0.5), 0 0 20px rgba(255, 255, 255, 0.3)"},"100%":{boxShadow:"0 8px 32px rgba(255, 15, 80, 0.3)"}}},children:[l.jsx(te,{sx:{position:"absolute",right:-40,top:-40,width:120,height:120,borderRadius:"50%",background:"rgba(255,255,255,0.1)",animation:"float 6s ease-in-out infinite"}}),l.jsx(te,{sx:{position:"absolute",left:-30,bottom:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255,255,255,0.08)",animation:"float 8s ease-in-out infinite reverse"}}),l.jsx(ge,{variant:"h4",sx:{fontWeight:800,textAlign:"center",textShadow:"2px 2px 8px rgba(0,0,0,0.4)",mb:1,fontSize:{xs:"1.4rem",sm:"1.8rem",md:"2.2rem"},display:"flex",alignItems:"center",justifyContent:"center",gap:1,animation:"bounce 2s ease-in-out infinite"},children:"🎉 SPECIAL OFFER 🎉"}),l.jsx(ge,{variant:"h5",sx:{fontWeight:800,textAlign:"center",mb:2,fontSize:{xs:"1.1rem",sm:"1.4rem",md:"1.6rem"},textShadow:"1px 1px 4px rgba(0,0,0,0.3)"},children:"ALL CONTENT FOR ONLY $85"}),l.jsx(ge,{sx:{textAlign:"center",opacity:.95,mb:2.5,fontSize:"0.95rem"},children:"Get access to our entire premium collection at an unbeatable price!"}),l.jsx(te,{sx:{display:"flex",justifyContent:"center",mb:2.5},children:l.jsx(ge,{sx:{textAlign:"center",fontWeight:700,background:"rgba(255, 193, 7, 0.25)",color:"#FFC107",display:"inline-block",px:2,py:.8,borderRadius:2,border:"1px solid rgba(255, 193, 7, 0.5)",fontSize:"0.9rem",animation:"glow 2s ease-in-out infinite alternate"},children:"📦 EVERYTHING YOU SEE ON THIS SITE INCLUDED! 📦"})}),l.jsxs(te,{sx:{display:"flex",justifyContent:"center",gap:2,mb:2.5,flexWrap:"wrap"},children:[l.jsx(He,{href:m,target:"_blank",rel:"noopener noreferrer",startIcon:l.jsx(ts,{}),variant:"contained",sx:{bgcolor:"#1E90FF",color:"white",fontWeight:800,px:2.5,py:1,borderRadius:999,boxShadow:"0 4px 15px rgba(30,144,255,0.4)",transition:"all 0.3s ease",animation:"pulseButton 3s ease-in-out infinite","&:hover":{bgcolor:"#187bcd",transform:"translateY(-2px) scale(1.05)",boxShadow:"0 8px 25px rgba(30,144,255,0.6)"}},children:"Come to Negociate"}),l.jsx(He,{variant:"contained",onClick:y,disabled:s||!u,sx:{bgcolor:"#635bff",color:"white",fontWeight:800,px:2.5,py:1,borderRadius:999,boxShadow:"0 4px 15px rgba(99, 91, 255, 0.4)",transition:"all 0.3s ease",animation:"pulseButton 3s ease-in-out infinite 1.5s","&:hover":{bgcolor:"#4b45c6",transform:"translateY(-2px) scale(1.05)",boxShadow:"0 8px 25px rgba(99, 91, 255, 0.6)"}},children:s?"Processing...":"Pay $85"})]}),l.jsx(ge,{sx:{textAlign:"center",fontSize:"0.85rem",opacity:.8,mb:2.5},children:"⚡ Instant delivery after payment ⚡"}),l.jsxs(te,{sx:{display:"flex",justifyContent:"center",gap:2,flexWrap:"wrap"},children:[l.jsx(te,{sx:{display:"flex",alignItems:"center",gap:1,px:1.5,py:.5,borderRadius:999,backgroundColor:"rgba(0,0,0,0.25)",border:"1px solid rgba(255,255,255,0.25)"},children:l.jsxs(ge,{sx:{fontWeight:700,color:"white"},children:[f," Happy Customers"]})}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:1,px:1.5,py:.5,borderRadius:999,backgroundColor:"rgba(0,0,0,0.25)",border:"1px solid rgba(255,255,255,0.25)"},children:[l.jsx(te,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:"#ff4d4f",animation:"pulseDot 1.2s ease-in-out infinite"}}),l.jsxs(ge,{sx:{fontWeight:700,color:"white"},children:[r," online"]})]})]}),l.jsx(te,{sx:{"@keyframes pulseDot":{"0%":{opacity:1},"50%":{opacity:.5},"100%":{opacity:1}},"@keyframes float":{"0%, 100%":{transform:"translateY(0px)"},"50%":{transform:"translateY(-10px)"}},"@keyframes bounce":{"0%, 100%":{transform:"translateY(0px)"},"50%":{transform:"translateY(-5px)"}},"@keyframes glow":{"0%":{boxShadow:"0 0 5px rgba(255, 193, 7, 0.5)"},"100%":{boxShadow:"0 0 20px rgba(255, 193, 7, 0.8)"}},"@keyframes pulseButton":{"0%, 100%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"}}}})]})})},Eb=({open:n,onClose:e})=>{const[t,r]=R.useState(""),[i,s]=R.useState(""),[a,u]=R.useState(!1),[c,f]=R.useState(!1),[g,m]=R.useState(null),[y,v]=R.useState(null),[A,x]=R.useState(null),[k,w]=R.useState(!1),[I,F]=R.useState(0),Z=["Configuração","Validação","Setup","Finalizado"];R.useEffect(()=>{},[n]);const ae=()=>{!c&&!a&&(r(""),s(""),m(null),v(null),x(null),F(0),e())},re=async()=>{if(!t.trim()||!i.trim()){m({success:!1,message:"Por favor, preencha tanto o Project ID quanto a API Key"});return}u(!0),m(null);try{await new Promise(W=>setTimeout(W,1e3)),m({success:!0,message:"Conexão com Wasabi validada com sucesso!"}),F(1)}catch(W){m({success:!1,message:`Erro na validação: ${W instanceof Error?W.message:"Erro desconhecido"}`})}finally{u(!1)}},G=async()=>{if(!(!(g!=null&&g.success)&&(await re(),!(g!=null&&g.success)))){f(!0),x(null),F(2);try{v({step:1,message:"Criando bucket...",percentage:25}),await new Promise(W=>setTimeout(W,1e3)),v({step:2,message:"Configurando permissões...",percentage:50}),await new Promise(W=>setTimeout(W,1e3)),v({step:3,message:"Finalizando configuração...",percentage:75}),await new Promise(W=>setTimeout(W,1e3)),v({step:4,message:"Configuração concluída!",percentage:100}),x({success:!0,message:"Wasabi configurado com sucesso!",details:["Bucket criado","Permissões configuradas","Sistema pronto para uso"],errors:[]}),F(3)}catch(W){x({success:!1,message:`Erro durante o setup: ${W instanceof Error?W.message:"Erro desconhecido"}`,details:[],errors:[W instanceof Error?W.message:"Erro desconhecido"]}),F(3)}finally{f(!1)}}},M=()=>{switch(I){case 0:return l.jsxs(te,{children:[l.jsx(ge,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Insira as credenciais do seu bucket Wasabi para configurar automaticamente o armazenamento."}),l.jsx(Lt,{fullWidth:!0,label:"Project ID",value:t,onChange:W=>r(W.target.value),placeholder:"68xxxxxxxxxxxxxxxxxx",sx:{mb:2},disabled:a||c,helperText:"O Access Key do seu bucket Wasabi (encontrado no dashboard)"}),l.jsx(Lt,{fullWidth:!0,label:"API Key",type:"password",value:i,onChange:W=>s(W.target.value),placeholder:"Sua Secret Key do Wasabi",sx:{mb:3},disabled:a||c,helperText:"Chave API com permissões de administrador"}),g&&l.jsx(Vt,{severity:g.success?"success":"error",sx:{mb:2},children:g.message})]});case 1:return l.jsxs(te,{children:[l.jsx(Vt,{severity:"success",sx:{mb:3},children:l.jsx(ge,{variant:"body2",children:"✅ Credenciais validadas com sucesso! Agora você pode configurar automaticamente a base de dados."})}),l.jsx(ge,{variant:"body2",color:"text.secondary",children:"O sistema irá criar automaticamente:"}),l.jsxs(Pc,{dense:!0,children:[l.jsxs(Xn,{children:[l.jsx(Qn,{children:l.jsx(co,{color:"primary"})}),l.jsx(ei,{primary:"Database principal"})]}),l.jsxs(Xn,{children:[l.jsx(Qn,{children:l.jsx(co,{color:"primary"})}),l.jsx(ei,{primary:"Collection de Videos"})]}),l.jsxs(Xn,{children:[l.jsx(Qn,{children:l.jsx(co,{color:"primary"})}),l.jsx(ei,{primary:"Collection de Users"})]}),l.jsxs(Xn,{children:[l.jsx(Qn,{children:l.jsx(co,{color:"primary"})}),l.jsx(ei,{primary:"Collection de Configurações"})]}),l.jsxs(Xn,{children:[l.jsx(Qn,{children:l.jsx(co,{color:"primary"})}),l.jsx(ei,{primary:"Collection de Sessions"})]}),l.jsxs(Xn,{children:[l.jsx(Qn,{children:l.jsx(cd,{color:"primary"})}),l.jsx(ei,{primary:"Bucket de Videos"})]}),l.jsxs(Xn,{children:[l.jsx(Qn,{children:l.jsx(cd,{color:"primary"})}),l.jsx(ei,{primary:"Bucket de Thumbnails"})]}),l.jsxs(Xn,{children:[l.jsx(Qn,{children:l.jsx(Qc,{color:"primary"})}),l.jsx(ei,{primary:"Dados iniciais"})]})]})]});case 2:return l.jsxs(te,{children:[l.jsx(ge,{variant:"h6",sx:{mb:2},children:"Configurando base de dados..."}),y&&l.jsxs(te,{sx:{mb:3},children:[l.jsxs(te,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[l.jsx(ge,{variant:"body2",color:"text.secondary",children:y.stage}),l.jsxs(ge,{variant:"body2",color:"text.secondary",children:[y.progress,"%"]})]}),l.jsx(Cu,{variant:"determinate",value:y.progress,sx:{mb:1},color:y.isError?"error":"primary"}),l.jsx(ge,{variant:"body2",color:y.isError?"error.main":"text.secondary",children:y.message})]}),l.jsx(te,{sx:{display:"flex",justifyContent:"center",mt:2},children:l.jsx(sn,{})})]});case 3:return l.jsx(te,{children:A&&l.jsxs(l.Fragment,{children:[l.jsxs(Vt,{severity:A.success?"success":"error",sx:{mb:2},action:l.jsx(bn,{color:"inherit",size:"small",onClick:()=>w(!k),children:k?l.jsx(f0,{}):l.jsx(p0,{})}),children:[l.jsx(ge,{variant:"body1",sx:{fontWeight:"bold"},children:A.message}),l.jsx(ge,{variant:"body2",sx:{mt:1},children:'Clique em "Ver Detalhes" para ver o resumo das operações realizadas.'})]}),l.jsx(Sf,{in:k,children:l.jsxs(te,{sx:{mt:2},children:[A.details.length>0&&l.jsxs(te,{sx:{mb:2},children:[l.jsx(ge,{variant:"subtitle2",color:"success.main",sx:{mb:1},children:"✅ Operações Realizadas:"}),l.jsx(Pc,{dense:!0,children:A.details.map((W,j)=>l.jsxs(Xn,{children:[l.jsx(Qn,{children:l.jsx(kf,{color:"success",fontSize:"small"})}),l.jsx(ei,{primary:W,primaryTypographyProps:{variant:"body2"}})]},j))})]}),A.errors.length>0&&l.jsxs(te,{children:[l.jsx(ge,{variant:"subtitle2",color:"error.main",sx:{mb:1},children:"❌ Erros encontrados:"}),l.jsx(Pc,{dense:!0,children:A.errors.map((W,j)=>l.jsxs(Xn,{children:[l.jsx(Qn,{children:l.jsx(g0,{color:"error",fontSize:"small"})}),l.jsx(ei,{primary:W,primaryTypographyProps:{variant:"body2"}})]},j))})]})]})})]})});default:return null}},z=()=>{switch(I){case 0:return l.jsxs(l.Fragment,{children:[l.jsx(He,{onClick:ae,disabled:a||c,children:"Cancelar"}),l.jsx(He,{onClick:re,variant:"contained",disabled:a||c||!t.trim()||!i.trim(),startIcon:a?l.jsx(sn,{size:16}):null,children:a?"Validando...":"Validar Conexão"})]});case 1:return l.jsxs(l.Fragment,{children:[l.jsx(He,{onClick:()=>F(0),disabled:c,children:"Voltar"}),l.jsx(He,{onClick:G,variant:"contained",color:"primary",disabled:c,children:"Iniciar Setup Automático"})]});case 2:return l.jsx(He,{onClick:ae,disabled:c,children:"Cancelar"});case 3:return l.jsx(He,{onClick:ae,variant:"contained",color:A!=null&&A.success?"primary":"error",children:"Fechar"});default:return null}};return l.jsxs(Pu,{open:n,onClose:ae,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"500px"}},children:[l.jsx(Iu,{children:l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:1},children:[l.jsx(Qc,{color:"primary"}),l.jsx(ge,{variant:"h6",children:"Configurar Armazenamento Wasabi"})]})}),l.jsxs(Nu,{children:[l.jsx(u0,{activeStep:I,sx:{mb:4},children:Z.map(W=>l.jsx(h0,{children:l.jsx(d0,{children:W})},W))}),M()]}),l.jsx(jf,{sx:{px:3,pb:2},children:z()})]})},Tb=()=>{const[n,e]=R.useState({projectId:"",apiKey:""}),[t,r]=R.useState(!1),[i,s]=R.useState(!1);R.useEffect(()=>{e({projectId:"wasabi",apiKey:"configured"}),r(!0)},[]),R.useEffect(()=>{const u=c=>{c.ctrlKey&&c.altKey&&(c.key==="c"||c.key==="C")&&(s(!0),window.setTimeout(()=>s(!1),1e4))};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[]);const a=()=>{confirm("Tem certeza que deseja limpar as credenciais?")&&(localStorage.removeItem("wasabi-config"),e({projectId:"",apiKey:""}),r(!1))};return i?t?l.jsxs(te,{sx:{position:"relative",mb:3,p:2,bgcolor:"rgba(76, 175, 80, 0.1)",borderRadius:1,border:"1px solid rgba(76, 175, 80, 0.3)"},children:[l.jsx(bn,{"aria-label":"fechar",size:"small",onClick:()=>s(!1),sx:{position:"absolute",top:8,right:8},children:l.jsx(ud,{fontSize:"small"})}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",mb:2},children:[l.jsx(kf,{sx:{color:"#4CAF50",mr:1}}),l.jsx(ge,{variant:"h6",sx:{color:"#4CAF50",fontWeight:"bold"},children:"Credenciais Configuradas"})]}),l.jsxs(te,{sx:{display:"flex",flexDirection:"column",gap:1,mb:2},children:[l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:1},children:[l.jsx(ge,{variant:"body2",sx:{fontWeight:"bold",minWidth:100},children:"Project ID:"}),l.jsx(Gt,{label:n.projectId,size:"small",sx:{bgcolor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}})]}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:1},children:[l.jsx(ge,{variant:"body2",sx:{fontWeight:"bold",minWidth:100},children:"API Key:"}),l.jsx(Gt,{label:`${n.apiKey.substring(0,8)}...`,size:"small",sx:{bgcolor:"rgba(76, 175, 80, 0.2)",color:"#4CAF50"}})]})]}),l.jsxs(te,{sx:{display:"flex",gap:1},children:[l.jsx(He,{size:"small",variant:"outlined",startIcon:l.jsx(Qc,{}),onClick:a,sx:{borderColor:"#FF9800",color:"#FF9800","&:hover":{borderColor:"#F57C00",color:"#F57C00"}},children:"Limpar Credenciais"}),l.jsx(ge,{variant:"caption",sx:{color:"rgba(0,0,0,0.6)",alignSelf:"center"},children:"💡 Dica: Use Ctrl + Alt + S no footer para configuração secreta"})]})]}):l.jsx(Vt,{severity:"warning",sx:{mb:2},action:l.jsx(bn,{size:"small",onClick:()=>s(!1),children:l.jsx(ud,{fontSize:"small"})}),children:l.jsxs(ge,{variant:"body2",children:[l.jsx("strong",{children:"Credenciais não configuradas:"})," Use o botão de configuração para definir o Access Key e Secret Key do Wasabi."]})}):null},Rb=()=>l.jsxs(Eo,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",bgcolor:"background.paper"},children:[l.jsx(Rt,{variant:"rectangular",sx:{width:"100%",paddingTop:"56.25%"},animation:"wave"}),l.jsxs(ql,{children:[l.jsx(Rt,{variant:"text",sx:{fontSize:"1.5rem",mb:1}}),l.jsx(Rt,{variant:"text",sx:{fontSize:"1rem",width:"60%"}}),l.jsxs(te,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[l.jsx(Rt,{variant:"text",sx:{width:"30%"}}),l.jsx(Rt,{variant:"text",sx:{width:"20%"}})]})]})]}),Ob=({index:n})=>l.jsxs(Eo,{sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",bgcolor:"background.paper",position:"relative"},children:[l.jsx(te,{sx:{width:"100%",paddingTop:"56.25%",position:"relative",bgcolor:"rgba(0,0,0,0.05)",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs(te,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[l.jsx(sn,{size:40,thickness:4,sx:{color:"primary.main",animation:"pulse 1.5s ease-in-out infinite"}}),l.jsxs(ge,{variant:"caption",sx:{color:"text.secondary",fontWeight:"bold",textAlign:"center"},children:["Loading video ",n+1,"..."]})]})}),l.jsxs(ql,{children:[l.jsx(Rt,{variant:"text",sx:{fontSize:"1.5rem",mb:1}}),l.jsx(Rt,{variant:"text",sx:{fontSize:"1rem",width:"60%"}}),l.jsxs(te,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[l.jsx(Rt,{variant:"text",sx:{width:"30%"}}),l.jsx(Rt,{variant:"text",sx:{width:"20%"}})]})]})]}),Fb=()=>{const[n,e]=R.useState([]),[t,r]=R.useState(!0),[i,s]=R.useState(null),[a,u]=R.useState(1),[c,f]=R.useState(1),[g,m]=R.useState(!1),[y,v]=R.useState(!1),[A,x]=R.useState([]),[k,w]=R.useState(!1),[I,F]=R.useState(()=>Math.floor(Math.random()*101)),[Z]=R.useState(()=>Math.floor(Math.random()*601)+700),[ae]=R.useState(()=>parseFloat((Math.random()*.6+4.2).toFixed(1))),{user:re}=ss(),{videoListTitle:G,telegramUsername:M}=En();xn();const z=24;R.useEffect(()=>{const X=new URLSearchParams(window.location.search),ie=X.get("payment_success"),le=X.get("session_id");if(ie==="true"){if(console.log("Payment successful! Session ID:",le),M){const Q=`🎉 **Payment Successful!** 🎉

✅ **Transaction ID:** ${le||"N/A"}
💰 **Amount:** $85.00
📦 **Package:** ALL CONTENT INCLUDED
⏰ **Time:** ${new Date().toLocaleString()}

Thank you for your purchase! You now have access to all content on the site.

Please let me know if you need any assistance accessing your content.`,ce=encodeURIComponent(Q),ve=`https://t.me/${M.replace("@","")}?text=${ce}`;setTimeout(()=>{window.open(ve,"_blank")},2e3)}window.history.replaceState({},document.title,"/")}},[M]),R.useEffect(()=>{(async()=>{try{r(!0),s(null),x([]),e([]);const ie=await zt.getVideoIds(ji.NEWEST),le=Math.ceil(ie.length/z);f(le);const Q=(a-1)*z,ce=Q+z,ve=ie.slice(Q,ce);r(!1),W(ve)}catch(ie){console.error("Error fetching videos:",ie),s("Failed to load videos. Please try again later."),r(!1)}})(),v(!1)},[re,a]),R.useEffect(()=>{const X=setInterval(()=>{F(ie=>{const le=Math.floor(Math.random()*12)-5,Q=ie+le;return Math.min(100,Math.max(0,Q))})},4e3);return()=>clearInterval(X)},[]);const W=async X=>{w(!0);for(let ie=0;ie<X.length;ie++){const le=X[ie];try{const Q=await zt.getVideo(le);Q&&(x(ce=>[...ce,Q]),e(ce=>[...ce,Q])),ie>0&&await new Promise(ce=>setTimeout(ce,150))}catch(Q){console.error(`Error loading video ${le}:`,Q)}}w(!1)},j=(X,ie)=>{u(ie),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{const le=document.querySelector("header");le&&le.scrollIntoView({behavior:"smooth",block:"start"})},100)},E=()=>{const X=z,ie=A.length,le=Math.max(0,X-ie);return Array(le).fill(0).map((Q,ce)=>l.jsx(Ze,{item:!0,xs:12,sm:6,md:4,lg:3,children:l.jsx(Rb,{})},`skeleton-${ce}`))},V=()=>{const X=z,ie=A.length,le=Math.max(0,X-ie);return Array(le).fill(0).map((Q,ce)=>l.jsx(Ze,{item:!0,xs:12,sm:6,md:4,lg:3,children:l.jsx(Ob,{index:ie+ce})},`loading-${ce}`))},U=X=>{s(X)};return l.jsxs(te,{sx:{width:"100%"},children:[l.jsx("style",{children:`
          @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
          }
        `}),l.jsx(Nb,{telegramUsername:M}),l.jsx(Ib,{onError:U}),l.jsxs(yn,{maxWidth:"lg",sx:{py:4},children:[l.jsx(Tb,{}),l.jsxs(te,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",md:"center"},mb:3},children:[l.jsxs(te,{children:[l.jsx(ge,{variant:"h4",component:"h2",gutterBottom:!0,children:G||"Featured Videos"}),!t&&n.length>0&&l.jsxs(te,{sx:{display:"flex",gap:2,flexWrap:"wrap",mt:1,alignItems:"center"},children:[l.jsx(Gt,{label:`From $${Math.min(...n.map(X=>X.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),l.jsx(Gt,{label:`${Z}+ Happy Customers`,size:"small",sx:{backgroundColor:"rgba(76, 175, 80, 0.12)",color:"#2E7D32",fontWeight:"bold",border:"1px solid rgba(76, 175, 80, 0.35)"}}),l.jsx(Gt,{label:`⭐ ${ae}/5 Rating`,size:"small",sx:{backgroundColor:"rgba(255, 193, 7, 0.12)",color:"#B28704",fontWeight:"bold",border:"1px solid rgba(255, 193, 7, 0.35)"}}),l.jsx(Gt,{label:`${I} online`,size:"small",sx:{backgroundColor:"rgba(244, 67, 54, 0.12)",color:"#D32F2F",fontWeight:"bold",border:"1px solid rgba(244, 67, 54, 0.35)"},icon:l.jsx("span",{style:{width:8,height:8,borderRadius:"50%",background:"#ff4d4f",display:"inline-block",boxShadow:"0 0 0 2px rgba(255,77,79,0.2)"}})}),l.jsx(Gt,{label:`Up to $${Math.max(...n.map(X=>X.price)).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),l.jsx(Gt,{label:`Avg: $${(n.reduce((X,ie)=>X+ie.price,0)/n.length).toFixed(2)}`,size:"small",sx:{backgroundColor:"rgba(255, 15, 80, 0.1)",color:"#FF0F50",fontWeight:"bold",border:"1px solid rgba(255, 15, 80, 0.3)"}}),k&&A.length<n.length&&l.jsx(Gt,{label:`Loading ${A.length}/${n.length} videos...`,size:"small",sx:{backgroundColor:"rgba(33, 150, 243, 0.1)",color:"#2196F3",fontWeight:"bold",border:"1px solid rgba(33, 150, 243, 0.3)",animation:"pulse 1.5s ease-in-out infinite"}})]})]}),l.jsxs(te,{sx:{display:"flex",gap:1,alignItems:"center",alignSelf:{xs:"flex-start",md:"center"}},children:[y&&l.jsx(m0,{title:"Configurar Armazenamento Wasabi",children:l.jsx(He,{onClick:()=>m(!0),variant:"outlined",color:"secondary",size:"small",sx:{minWidth:"auto",px:1.5,opacity:.7,"&:hover":{opacity:1}},children:l.jsx(Po,{fontSize:"small"})})}),l.jsx(He,{component:mo,to:"/videos",variant:"outlined",color:"primary",endIcon:l.jsx(Bp,{}),children:"View All Videos"})]})]}),i&&l.jsx(Vt,{severity:"error",sx:{mb:3},action:l.jsx(He,{color:"inherit",size:"small",onClick:()=>m(!0),startIcon:l.jsx(Po,{}),children:"Configurar Base de Dados"}),children:i}),l.jsx(Ca,{in:!0,timeout:500,children:l.jsx(te,{children:t?l.jsx(Ze,{container:!0,spacing:3,children:E()}):n.length===0&&!k?l.jsx(Ol,{in:!0,timeout:1e3,children:l.jsx(Vt,{severity:"info",sx:{mb:3,borderRadius:2,"& .MuiAlert-icon":{fontSize:"1.5rem"}},children:"No videos available at the moment. Please check back later."})}):l.jsxs(l.Fragment,{children:[l.jsxs(Ze,{container:!0,spacing:3,children:[A.map((X,ie)=>l.jsx(Ol,{in:!0,timeout:200,children:l.jsx(Ze,{item:!0,xs:12,sm:6,md:4,lg:3,children:l.jsx(oh,{video:X})})},X.$id)),k&&V()]}),c>1&&l.jsx(Ca,{in:!0,timeout:800,children:l.jsx(te,{sx:{display:"flex",justifyContent:"center",mt:5,pt:3,borderTop:"1px solid",borderColor:"divider"},children:l.jsx(v0,{count:c,page:a,onChange:j,color:"primary",size:"large",showFirstButton:!0,showLastButton:!0,sx:{"& .MuiPaginationItem-root":{transition:"all 0.3s ease","&:hover":{transform:"scale(1.1)",bgcolor:"primary.main",color:"white"}}}})})})]})})})]}),l.jsx(kp,{}),l.jsx(Eb,{open:g,onClose:()=>m(!1)})]})};var jh={},Db=_t;Object.defineProperty(jh,"__esModule",{value:!0});var Up=jh.default=void 0,Mb=Db(St()),Bb=l;Up=jh.default=(0,Mb.default)((0,Bb.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}),"PictureAsPdf");var Ah={},Ub=_t;Object.defineProperty(Ah,"__esModule",{value:!0});var Pl=Ah.default=void 0,$b=Ub(St()),qb=l;Pl=Ah.default=(0,$b.default)((0,qb.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");var Ur=Uint8Array,wn=Uint16Array,kh=Int32Array,Jl=new Ur([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Yl=new Ur([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mu=new Ur([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$p=function(n,e){for(var t=new wn(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new kh(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},qp=$p(Jl,2),zp=qp.b,vu=qp.r;zp[28]=258,vu[258]=28;var Wp=$p(Yl,0),zb=Wp.b,Jd=Wp.r,bu=new wn(32768);for(var Wt=0;Wt<32768;++Wt){var Vi=(Wt&43690)>>1|(Wt&21845)<<1;Vi=(Vi&52428)>>2|(Vi&13107)<<2,Vi=(Vi&61680)>>4|(Vi&3855)<<4,bu[Wt]=((Vi&65280)>>8|(Vi&255)<<8)>>1}var ai=function(n,e,t){for(var r=n.length,i=0,s=new wn(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new wn(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var u;if(t){u=new wn(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var f=i<<4|n[i],g=e-n[i],m=a[n[i]-1]++<<g,y=m|(1<<g)-1;m<=y;++m)u[bu[m]>>c]=f}else for(u=new wn(r),i=0;i<r;++i)n[i]&&(u[i]=bu[a[n[i]-1]++]>>15-n[i]);return u},rs=new Ur(288);for(var Wt=0;Wt<144;++Wt)rs[Wt]=8;for(var Wt=144;Wt<256;++Wt)rs[Wt]=9;for(var Wt=256;Wt<280;++Wt)rs[Wt]=7;for(var Wt=280;Wt<288;++Wt)rs[Wt]=8;var No=new Ur(32);for(var Wt=0;Wt<32;++Wt)No[Wt]=5;var Wb=ai(rs,9,0),Vb=ai(rs,9,1),Hb=ai(No,5,0),Gb=ai(No,5,1),$c=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Bn=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},qc=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Lh=function(n){return(n+7)/8|0},Vp=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Ur(n.subarray(e,t))},Kb=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],qn=function(n,e,t){var r=new Error(e||Kb[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,qn),!t)throw r;return r},Jb=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new Ur(0);var a=!t,u=a||e.i!=2,c=e.i;a&&(t=new Ur(i*3));var f=function(Le){var Te=t.length;if(Le>Te){var Ee=new Ur(Math.max(Te*2,Le));Ee.set(t),t=Ee}},g=e.f||0,m=e.p||0,y=e.b||0,v=e.l,A=e.d,x=e.m,k=e.n,w=i*8;do{if(!v){g=Bn(n,m,1);var I=Bn(n,m+1,3);if(m+=3,I)if(I==1)v=Vb,A=Gb,x=9,k=5;else if(I==2){var re=Bn(n,m,31)+257,G=Bn(n,m+10,15)+4,M=re+Bn(n,m+5,31)+1;m+=14;for(var z=new Ur(M),W=new Ur(19),j=0;j<G;++j)W[mu[j]]=Bn(n,m+j*3,7);m+=G*3;for(var E=$c(W),V=(1<<E)-1,U=ai(W,E,1),j=0;j<M;){var X=U[Bn(n,m,V)];m+=X&15;var F=X>>4;if(F<16)z[j++]=F;else{var ie=0,le=0;for(F==16?(le=3+Bn(n,m,3),m+=2,ie=z[j-1]):F==17?(le=3+Bn(n,m,7),m+=3):F==18&&(le=11+Bn(n,m,127),m+=7);le--;)z[j++]=ie}}var Q=z.subarray(0,re),ce=z.subarray(re);x=$c(Q),k=$c(ce),v=ai(Q,x,1),A=ai(ce,k,1)}else qn(1);else{var F=Lh(m)+4,Z=n[F-4]|n[F-3]<<8,ae=F+Z;if(ae>i){c&&qn(0);break}u&&f(y+Z),t.set(n.subarray(F,ae),y),e.b=y+=Z,e.p=m=ae*8,e.f=g;continue}if(m>w){c&&qn(0);break}}u&&f(y+131072);for(var ve=(1<<x)-1,Oe=(1<<k)-1,P=m;;P=m){var ie=v[qc(n,m)&ve],D=ie>>4;if(m+=ie&15,m>w){c&&qn(0);break}if(ie||qn(2),D<256)t[y++]=D;else if(D==256){P=m,v=null;break}else{var q=D-254;if(D>264){var j=D-257,H=Jl[j];q=Bn(n,m,(1<<H)-1)+zp[j],m+=H}var ne=A[qc(n,m)&Oe],fe=ne>>4;ne||qn(3),m+=ne&15;var ce=zb[fe];if(fe>3){var H=Yl[fe];ce+=qc(n,m)&(1<<H)-1,m+=H}if(m>w){c&&qn(0);break}u&&f(y+131072);var me=y+q;if(y<ce){var pe=s-ce,_e=Math.min(ce,me);for(pe+y<0&&qn(3);y<_e;++y)t[y]=r[pe+y]}for(;y<me;++y)t[y]=t[y-ce]}}e.l=v,e.p=P,e.b=y,e.f=g,v&&(g=1,e.m=x,e.d=A,e.n=k)}while(!g);return y!=t.length&&a?Vp(t,0,y):t.subarray(0,y)},xi=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},po=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},zc=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:Gp,l:0};if(i==1){var a=new Ur(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(ae,re){return ae.f-re.f}),t.push({s:-1,f:25001});var u=t[0],c=t[1],f=0,g=1,m=2;for(t[0]={s:-1,f:u.f+c.f,l:u,r:c};g!=i-1;)u=t[t[f].f<t[m].f?f++:m++],c=t[f!=g&&t[f].f<t[m].f?f++:m++],t[g++]={s:-1,f:u.f+c.f,l:u,r:c};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var v=new wn(y+1),A=yu(t[g-1],v,0);if(A>e){var r=0,x=0,k=A-e,w=1<<k;for(s.sort(function(re,G){return v[G.s]-v[re.s]||re.f-G.f});r<i;++r){var I=s[r].s;if(v[I]>e)x+=w-(1<<A-v[I]),v[I]=e;else break}for(x>>=k;x>0;){var F=s[r].s;v[F]<e?x-=1<<e-v[F]++-1:++r}for(;r>=0&&x;--r){var Z=s[r].s;v[Z]==e&&(--v[Z],++x)}A=e}return{t:new Ur(v),l:A}},yu=function(n,e,t){return n.s==-1?Math.max(yu(n.l,e,t+1),yu(n.r,e,t+1)):e[n.s]=t},Yd=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new wn(++e),r=0,i=n[0],s=1,a=function(c){t[r++]=c},u=1;u<=e;++u)if(n[u]==i&&u!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=n[u]}return{c:t.subarray(0,r),n:e}},go=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Hp=function(n,e,t){var r=t.length,i=Lh(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},Zd=function(n,e,t,r,i,s,a,u,c,f,g){xi(e,g++,t),++i[256];for(var m=zc(i,15),y=m.t,v=m.l,A=zc(s,15),x=A.t,k=A.l,w=Yd(y),I=w.c,F=w.n,Z=Yd(x),ae=Z.c,re=Z.n,G=new wn(19),M=0;M<I.length;++M)++G[I[M]&31];for(var M=0;M<ae.length;++M)++G[ae[M]&31];for(var z=zc(G,7),W=z.t,j=z.l,E=19;E>4&&!W[mu[E-1]];--E);var V=f+5<<3,U=go(i,rs)+go(s,No)+a,X=go(i,y)+go(s,x)+a+14+3*E+go(G,W)+2*G[16]+3*G[17]+7*G[18];if(c>=0&&V<=U&&V<=X)return Hp(e,g,n.subarray(c,c+f));var ie,le,Q,ce;if(xi(e,g,1+(X<U)),g+=2,X<U){ie=ai(y,v,0),le=y,Q=ai(x,k,0),ce=x;var ve=ai(W,j,0);xi(e,g,F-257),xi(e,g+5,re-1),xi(e,g+10,E-4),g+=14;for(var M=0;M<E;++M)xi(e,g+3*M,W[mu[M]]);g+=3*E;for(var Oe=[I,ae],P=0;P<2;++P)for(var D=Oe[P],M=0;M<D.length;++M){var q=D[M]&31;xi(e,g,ve[q]),g+=W[q],q>15&&(xi(e,g,D[M]>>5&127),g+=D[M]>>12)}}else ie=Wb,le=rs,Q=Hb,ce=No;for(var M=0;M<u;++M){var H=r[M];if(H>255){var q=H>>18&31;po(e,g,ie[q+257]),g+=le[q+257],q>7&&(xi(e,g,H>>23&31),g+=Jl[q]);var ne=H&31;po(e,g,Q[ne]),g+=ce[ne],ne>3&&(po(e,g,H>>5&8191),g+=Yl[ne])}else po(e,g,ie[H]),g+=le[H]}return po(e,g,ie[256]),g+le[256]},Yb=new kh([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Gp=new Ur(0),Zb=function(n,e,t,r,i,s){var a=s.z||n.length,u=new Ur(r+a+5*(1+Math.ceil(a/7e3))+i),c=u.subarray(r,u.length-i),f=s.l,g=(s.r||0)&7;if(e){g&&(c[0]=s.r>>3);for(var m=Yb[e-1],y=m>>13,v=m&8191,A=(1<<t)-1,x=s.p||new wn(32768),k=s.h||new wn(A+1),w=Math.ceil(t/3),I=2*w,F=function(Xe){return(n[Xe]^n[Xe+1]<<w^n[Xe+2]<<I)&A},Z=new kh(25e3),ae=new wn(288),re=new wn(32),G=0,M=0,z=s.i||0,W=0,j=s.w||0,E=0;z+2<a;++z){var V=F(z),U=z&32767,X=k[V];if(x[U]=X,k[V]=U,j<=z){var ie=a-z;if((G>7e3||W>24576)&&(ie>423||!f)){g=Zd(n,c,0,Z,ae,re,M,W,E,z-E,g),W=G=M=0,E=z;for(var le=0;le<286;++le)ae[le]=0;for(var le=0;le<30;++le)re[le]=0}var Q=2,ce=0,ve=v,Oe=U-X&32767;if(ie>2&&V==F(z-Oe))for(var P=Math.min(y,ie)-1,D=Math.min(32767,z),q=Math.min(258,ie);Oe<=D&&--ve&&U!=X;){if(n[z+Q]==n[z+Q-Oe]){for(var H=0;H<q&&n[z+H]==n[z+H-Oe];++H);if(H>Q){if(Q=H,ce=Oe,H>P)break;for(var ne=Math.min(Oe,H-2),fe=0,le=0;le<ne;++le){var me=z-Oe+le&32767,pe=x[me],_e=me-pe&32767;_e>fe&&(fe=_e,X=me)}}}U=X,X=x[U],Oe+=U-X&32767}if(ce){Z[W++]=268435456|vu[Q]<<18|Jd[ce];var Le=vu[Q]&31,Te=Jd[ce]&31;M+=Jl[Le]+Yl[Te],++ae[257+Le],++re[Te],j=z+Q,++G}else Z[W++]=n[z],++ae[n[z]]}}for(z=Math.max(z,j);z<a;++z)Z[W++]=n[z],++ae[n[z]];g=Zd(n,c,f,Z,ae,re,M,W,E,z-E,g),f||(s.r=g&7|c[g/8|0]<<3,g-=7,s.h=k,s.p=x,s.i=z,s.w=j)}else{for(var z=s.w||0;z<a+f;z+=65535){var Ee=z+65535;Ee>=a&&(c[g/8|0]=f,Ee=a),g=Hp(c,g+1,n.subarray(z,Ee))}s.i=a}return Vp(u,0,r+Lh(g)+i)},Kp=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,a=0;a!=s;){for(var u=Math.min(a+2655,s);a<u;++a)i+=r+=t[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Xb=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new Ur(s.length+n.length);a.set(s),a.set(n,s.length),n=a,i.w=s.length}return Zb(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},Jp=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Qb=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=Kp();i.p(e.dictionary),Jp(n,2,i.d())}},ey=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&qn(6,"invalid zlib data"),(n[1]>>5&1)==1&&qn(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function wu(n,e){e||(e={});var t=Kp();t.p(n);var r=Xb(n,e,e.dictionary?6:2,4);return Qb(r,e),Jp(r,r.length-4,t.d()),r}function ty(n,e){return Jb(n.subarray(ey(n),-4),{i:2},e,e)}var ry=typeof TextDecoder<"u"&&new TextDecoder,ny=0;try{ry.decode(Gp,{stream:!0}),ny=1}catch{}var ot=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Wc(){ot.console&&typeof ot.console.log=="function"&&ot.console.log.apply(ot.console,arguments)}var Ft={log:Wc,warn:function(n){ot.console&&(typeof ot.console.warn=="function"?ot.console.warn.apply(ot.console,arguments):Wc.call(null,arguments))},error:function(n){ot.console&&(typeof ot.console.error=="function"?ot.console.error.apply(ot.console,arguments):Wc(n))}};function Vc(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){ks(r.response,e,t)},r.onerror=function(){Ft.error("could not download file")},r.send()}function Xd(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function _l(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var So,xu,ks=ot.saveAs||((typeof window>"u"?"undefined":Dt(window))!=="object"||window!==ot?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=ot.URL||ot.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?Xd(i.href)?Vc(n,e,t):_l(i,i.target="_blank"):_l(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){_l(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(Xd(n))Vc(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){_l(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Dt(s)!=="object"&&(Ft.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Vc(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(ot.HTMLElement)||ot.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Dt(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var g=u.result;g=a?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},u.readAsDataURL(n)}else{var c=ot.URL||ot.webkitURL,f=c.createObjectURL(n);r?r.location=f:location.href=f,r=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Yp(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,a=i.exec(n);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),c=this.g.toString(16),f=this.b.toString(16);return u.length==1&&(u="0"+u),c.length==1&&(c="0"+c),f.length==1&&(f="0"+f),"#"+u+c+f}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Hc(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Fr(t,r,i,s,e[0],7,-680876936),s=Fr(s,t,r,i,e[1],12,-389564586),i=Fr(i,s,t,r,e[2],17,606105819),r=Fr(r,i,s,t,e[3],22,-1044525330),t=Fr(t,r,i,s,e[4],7,-176418897),s=Fr(s,t,r,i,e[5],12,1200080426),i=Fr(i,s,t,r,e[6],17,-1473231341),r=Fr(r,i,s,t,e[7],22,-45705983),t=Fr(t,r,i,s,e[8],7,1770035416),s=Fr(s,t,r,i,e[9],12,-1958414417),i=Fr(i,s,t,r,e[10],17,-42063),r=Fr(r,i,s,t,e[11],22,-1990404162),t=Fr(t,r,i,s,e[12],7,1804603682),s=Fr(s,t,r,i,e[13],12,-40341101),i=Fr(i,s,t,r,e[14],17,-1502002290),t=Dr(t,r=Fr(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Dr(s,t,r,i,e[6],9,-1069501632),i=Dr(i,s,t,r,e[11],14,643717713),r=Dr(r,i,s,t,e[0],20,-373897302),t=Dr(t,r,i,s,e[5],5,-701558691),s=Dr(s,t,r,i,e[10],9,38016083),i=Dr(i,s,t,r,e[15],14,-660478335),r=Dr(r,i,s,t,e[4],20,-405537848),t=Dr(t,r,i,s,e[9],5,568446438),s=Dr(s,t,r,i,e[14],9,-1019803690),i=Dr(i,s,t,r,e[3],14,-187363961),r=Dr(r,i,s,t,e[8],20,1163531501),t=Dr(t,r,i,s,e[13],5,-1444681467),s=Dr(s,t,r,i,e[2],9,-51403784),i=Dr(i,s,t,r,e[7],14,1735328473),t=Mr(t,r=Dr(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Mr(s,t,r,i,e[8],11,-2022574463),i=Mr(i,s,t,r,e[11],16,1839030562),r=Mr(r,i,s,t,e[14],23,-35309556),t=Mr(t,r,i,s,e[1],4,-1530992060),s=Mr(s,t,r,i,e[4],11,1272893353),i=Mr(i,s,t,r,e[7],16,-155497632),r=Mr(r,i,s,t,e[10],23,-1094730640),t=Mr(t,r,i,s,e[13],4,681279174),s=Mr(s,t,r,i,e[0],11,-358537222),i=Mr(i,s,t,r,e[3],16,-722521979),r=Mr(r,i,s,t,e[6],23,76029189),t=Mr(t,r,i,s,e[9],4,-640364487),s=Mr(s,t,r,i,e[12],11,-421815835),i=Mr(i,s,t,r,e[15],16,530742520),t=Br(t,r=Mr(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Br(s,t,r,i,e[7],10,1126891415),i=Br(i,s,t,r,e[14],15,-1416354905),r=Br(r,i,s,t,e[5],21,-57434055),t=Br(t,r,i,s,e[12],6,1700485571),s=Br(s,t,r,i,e[3],10,-1894986606),i=Br(i,s,t,r,e[10],15,-1051523),r=Br(r,i,s,t,e[1],21,-2054922799),t=Br(t,r,i,s,e[8],6,1873313359),s=Br(s,t,r,i,e[15],10,-30611744),i=Br(i,s,t,r,e[6],15,-1560198380),r=Br(r,i,s,t,e[13],21,1309151649),t=Br(t,r,i,s,e[4],6,-145523070),s=Br(s,t,r,i,e[11],10,-1120210379),i=Br(i,s,t,r,e[2],15,718787259),r=Br(r,i,s,t,e[9],21,-343485551),n[0]=Zi(t,n[0]),n[1]=Zi(r,n[1]),n[2]=Zi(i,n[2]),n[3]=Zi(s,n[3])}function Zl(n,e,t,r,i,s){return e=Zi(Zi(e,n),Zi(r,s)),Zi(e<<i|e>>>32-i,t)}function Fr(n,e,t,r,i,s,a){return Zl(e&t|~e&r,n,e,i,s,a)}function Dr(n,e,t,r,i,s,a){return Zl(e&r|t&~r,n,e,i,s,a)}function Mr(n,e,t,r,i,s,a){return Zl(e^t^r,n,e,i,s,a)}function Br(n,e,t,r,i,s,a){return Zl(t^(e|~r),n,e,i,s,a)}function Zp(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Hc(r,iy(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Hc(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Hc(r,i),r}function iy(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}So=ot.atob.bind(ot),xu=ot.btoa.bind(ot);var Qd="0123456789abcdef".split("");function sy(n){for(var e="",t=0;t<4;t++)e+=Qd[n>>8*t+4&15]+Qd[n>>8*t&15];return e}function ay(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function _u(n){return Zp(n).map(ay).join("")}var oy=function(n){for(var e=0;e<n.length;e++)n[e]=sy(n[e]);return n.join("")}(Zp("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zi(n,e){if(oy){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Su(n,e){var t,r,i,s;if(n!==t){for(var a=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),u=[],c=0;c<256;c++)u[c]=c;var f=0;for(c=0;c<256;c++){var g=u[c];f=(f+g+a.charCodeAt(c))%256,u[c]=u[f],u[f]=g}t=n,r=u}else u=r;var m=e.length,y=0,v=0,A="";for(c=0;c<m;c++)v=(v+(g=u[y=(y+1)%256]))%256,u[y]=u[v],u[v]=g,a=u[(u[y]+u[v])%256],A+=String.fromCharCode(e.charCodeAt(c)^a);return A}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ef={print:4,modify:8,copy:16,"annot-forms":32};function ya(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(u){if(ef.perm!==void 0)throw new Error("Invalid permission: "+u);i+=ef[u]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=_u(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Su(this.encryptionKey,this.padding)}function wa(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function tf(n){if(Dt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(n,r)}catch(u){ot.console&&Ft.error("jsPDF PubSub Error",u.message,u)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ul(n){if(!(this instanceof Ul))return new Ul(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Xp(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Cs(n,e,t,r,i){if(!(this instanceof Cs))return new Cs(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Xp.call(this,r,i)}function _a(n,e,t,r,i){if(!(this instanceof _a))return new _a(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Xp.call(this,r,i)}function at(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],u=1,c=16,f="S",g=null;Dt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(g=n.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),u=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),f=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var m=n.putOnlyUsedFonts||!1,y={},v={internal:{},__private__:{}};v.__private__.PubSub=tf;var A="1.3",x=v.__private__.getPdfVersion=function(){return A};v.__private__.setPdfVersion=function(d){A=d};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return k};var w=v.__private__.getPageFormat=function(d){return k[d]};i=i||"a4";var I={COMPAT:"compat",ADVANCED:"advanced"},F=I.COMPAT;function Z(){this.saveGraphicsState(),$(new nt(Ie,0,0,-Ie,0,Ei()*Ie).toString()+" cm"),this.setFontSize(this.getFontSize()/Ie),f="n",F=I.ADVANCED}function ae(){this.restoreGraphicsState(),f="S",F=I.COMPAT}var re=v.__private__.combineFontStyleAndFontWeight=function(d,S){if(d=="bold"&&S=="normal"||d=="bold"&&S==400||d=="normal"&&S=="italic"||d=="bold"&&S=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return S&&(d=S==400||S==="normal"?d==="italic"?"italic":"normal":S!=700&&S!=="bold"||d!=="normal"?(S==700?"bold":S)+""+d:"bold"),d};v.advancedAPI=function(d){var S=F===I.COMPAT;return S&&Z.call(this),typeof d!="function"||(d(this),S&&ae.call(this)),this},v.compatAPI=function(d){var S=F===I.ADVANCED;return S&&ae.call(this),typeof d!="function"||(d(this),S&&Z.call(this)),this},v.isAdvancedAPI=function(){return F===I.ADVANCED};var G,M=function(d){if(F!==I.ADVANCED)throw new Error(d+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=v.roundToPrecision=v.__private__.roundToPrecision=function(d,S){var B=e||S;if(isNaN(d)||isNaN(B))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return d.toFixed(B).replace(/0+$/,"")};G=v.hpf=v.__private__.hpf=typeof c=="number"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return z(d,c)}:c==="smart"?function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return z(d,d>-1&&d<1?16:5)}:function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.hpf");return z(d,16)};var W=v.f2=v.__private__.f2=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f2");return z(d,2)},j=v.__private__.f3=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.f3");return z(d,3)},E=v.scale=v.__private__.scale=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.scale");return F===I.COMPAT?d*Ie:F===I.ADVANCED?d:void 0},V=function(d){return F===I.COMPAT?Ei()-d:F===I.ADVANCED?d:void 0},U=function(d){return E(V(d))};v.__private__.setPrecision=v.setPrecision=function(d){typeof parseInt(d,10)=="number"&&(e=parseInt(d,10))};var X,ie="00000000000000000000000000000000",le=v.__private__.getFileId=function(){return ie},Q=v.__private__.setFileId=function(d){return ie=d!==void 0&&/^[a-fA-F0-9]{32}$/.test(d)?d.toUpperCase():ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Tr=new ya(g.userPermissions,g.userPassword,g.ownerPassword,ie)),ie};v.setFileId=function(d){return Q(d),this},v.getFileId=function(){return le()};var ce=v.__private__.convertDateToPDFDate=function(d){var S=d.getTimezoneOffset(),B=S<0?"+":"-",K=Math.floor(Math.abs(S/60)),oe=Math.abs(S%60),we=[B,q(K),"'",q(oe),"'"].join("");return["D:",d.getFullYear(),q(d.getMonth()+1),q(d.getDate()),q(d.getHours()),q(d.getMinutes()),q(d.getSeconds()),we].join("")},ve=v.__private__.convertPDFDateToDate=function(d){var S=parseInt(d.substr(2,4),10),B=parseInt(d.substr(6,2),10)-1,K=parseInt(d.substr(8,2),10),oe=parseInt(d.substr(10,2),10),we=parseInt(d.substr(12,2),10),Ce=parseInt(d.substr(14,2),10);return new Date(S,B,K,oe,we,Ce,0)},Oe=v.__private__.setCreationDate=function(d){var S;if(d===void 0&&(d=new Date),d instanceof Date)S=ce(d);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(d))throw new Error("Invalid argument passed to jsPDF.setCreationDate");S=d}return X=S},P=v.__private__.getCreationDate=function(d){var S=X;return d==="jsDate"&&(S=ve(X)),S};v.setCreationDate=function(d){return Oe(d),this},v.getCreationDate=function(d){return P(d)};var D,q=v.__private__.padd2=function(d){return("0"+parseInt(d)).slice(-2)},H=v.__private__.padd2Hex=function(d){return("00"+(d=d.toString())).substr(d.length)},ne=0,fe=[],me=[],pe=0,_e=[],Le=[],Te=!1,Ee=me,Xe=function(){ne=0,pe=0,me=[],fe=[],_e=[],_n=Kt(),Kr=Kt()};v.__private__.setCustomOutputDestination=function(d){Te=!0,Ee=d};var ye=function(d){Te||(Ee=d)};v.__private__.resetCustomOutputDestination=function(){Te=!1,Ee=me};var $=v.__private__.out=function(d){return d=d.toString(),pe+=d.length+1,Ee.push(d),Ee},it=v.__private__.write=function(d){return $(arguments.length===1?d.toString():Array.prototype.join.call(arguments," "))},ze=v.__private__.getArrayBuffer=function(d){for(var S=d.length,B=new ArrayBuffer(S),K=new Uint8Array(B);S--;)K[S]=d.charCodeAt(S);return B},ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return ke};var Re=n.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(d){return Re=F===I.ADVANCED?d/Ie:d,this};var Me,Fe=v.__private__.getFontSize=v.getFontSize=function(){return F===I.COMPAT?Re:Re*Ie},Je=n.R2L||!1;v.__private__.setR2L=v.setR2L=function(d){return Je=d,this},v.__private__.getR2L=v.getR2L=function(){return Je};var Pe,Be=v.__private__.setZoomMode=function(d){var S=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(d))Me=d;else if(isNaN(d)){if(S.indexOf(d)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+d+'" is not recognized.');Me=d}else Me=parseInt(d,10)};v.__private__.getZoomMode=function(){return Me};var Ne,We=v.__private__.setPageMode=function(d){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(d)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+d+'" is not recognized.');Pe=d};v.__private__.getPageMode=function(){return Pe};var Qe=v.__private__.setLayoutMode=function(d){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(d)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+d+'" is not recognized.');Ne=d};v.__private__.getLayoutMode=function(){return Ne},v.__private__.setDisplayMode=v.setDisplayMode=function(d,S,B){return Be(d),Qe(S),We(B),this};var Ve={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(d){if(Object.keys(Ve).indexOf(d)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ve[d]},v.__private__.getDocumentProperties=function(){return Ve},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(d){for(var S in Ve)Ve.hasOwnProperty(S)&&d[S]&&(Ve[S]=d[S]);return this},v.__private__.setDocumentProperty=function(d,S){if(Object.keys(Ve).indexOf(d)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ve[d]=S};var et,Ie,Zt,mt,hr,vt={},Ct={},Hr=[],jt={},Hn={},Ht={},kr={},on=null,$t=0,ct=[],At=new tf(v),Gn=n.hotfixes||[],dr={},ln={},cn=[],nt=function d(S,B,K,oe,we,Ce){if(!(this instanceof d))return new d(S,B,K,oe,we,Ce);isNaN(S)&&(S=1),isNaN(B)&&(B=0),isNaN(K)&&(K=0),isNaN(oe)&&(oe=1),isNaN(we)&&(we=0),isNaN(Ce)&&(Ce=0),this._matrix=[S,B,K,oe,we,Ce]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(d){this._matrix[0]=d}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(d){this._matrix[1]=d}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(d){this._matrix[2]=d}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(d){this._matrix[3]=d}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(d){this._matrix[4]=d}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(d){this._matrix[5]=d}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(d){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(G).join(d)},nt.prototype.multiply=function(d){var S=d.sx*this.sx+d.shy*this.shx,B=d.sx*this.shy+d.shy*this.sy,K=d.shx*this.sx+d.sy*this.shx,oe=d.shx*this.shy+d.sy*this.sy,we=d.tx*this.sx+d.ty*this.shx+this.tx,Ce=d.tx*this.shy+d.ty*this.sy+this.ty;return new nt(S,B,K,oe,we,Ce)},nt.prototype.decompose=function(){var d=this.sx,S=this.shy,B=this.shx,K=this.sy,oe=this.tx,we=this.ty,Ce=Math.sqrt(d*d+S*S),$e=(d/=Ce)*B+(S/=Ce)*K;B-=d*$e,K-=S*$e;var tt=Math.sqrt(B*B+K*K);return $e/=tt,d*(K/=tt)<S*(B/=tt)&&(d=-d,S=-S,$e=-$e,Ce=-Ce),{scale:new nt(Ce,0,0,tt,0,0),translate:new nt(1,0,0,1,oe,we),rotate:new nt(d,S,-S,d,0,0),skew:new nt(1,0,$e,1,0,0)}},nt.prototype.toString=function(d){return this.join(" ")},nt.prototype.inversed=function(){var d=this.sx,S=this.shy,B=this.shx,K=this.sy,oe=this.tx,we=this.ty,Ce=1/(d*K-S*B),$e=K*Ce,tt=-S*Ce,ft=-B*Ce,ht=d*Ce;return new nt($e,tt,ft,ht,-$e*oe-ft*we,-tt*oe-ht*we)},nt.prototype.applyToPoint=function(d){var S=d.x*this.sx+d.y*this.shx+this.tx,B=d.x*this.shy+d.y*this.sy+this.ty;return new Hs(S,B)},nt.prototype.applyToRectangle=function(d){var S=this.applyToPoint(d),B=this.applyToPoint(new Hs(d.x+d.w,d.y+d.h));return new za(S.x,S.y,B.x-S.x,B.y-S.y)},nt.prototype.clone=function(){var d=this.sx,S=this.shy,B=this.shx,K=this.sy,oe=this.tx,we=this.ty;return new nt(d,S,B,K,oe,we)},v.Matrix=nt;var Gr=v.matrixMult=function(d,S){return S.multiply(d)},un=new nt(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=un;var Lr=function(d,S){if(!Hn[d]){var B=(S instanceof Cs?"Sh":"P")+(Object.keys(jt).length+1).toString(10);S.id=B,Hn[d]=B,jt[B]=S,At.publish("addPattern",S)}};v.ShadingPattern=Cs,v.TilingPattern=_a,v.addShadingPattern=function(d,S){return M("addShadingPattern()"),Lr(d,S),this},v.beginTilingPattern=function(d){M("beginTilingPattern()"),Wo(d.boundingBox[0],d.boundingBox[1],d.boundingBox[2]-d.boundingBox[0],d.boundingBox[3]-d.boundingBox[1],d.matrix)},v.endTilingPattern=function(d,S){M("endTilingPattern()"),S.stream=Le[D].join(`
`),Lr(d,S),At.publish("endTilingPattern",S),cn.pop().restore()};var Xt=v.__private__.newObject=function(){var d=Kt();return Er(d,!0),d},Kt=v.__private__.newObjectDeferred=function(){return ne++,fe[ne]=function(){return pe},ne},Er=function(d,S){return S=typeof S=="boolean"&&S,fe[d]=pe,S&&$(d+" 0 obj"),d},ci=v.__private__.newAdditionalObject=function(){var d={objId:Kt(),content:""};return _e.push(d),d},_n=Kt(),Kr=Kt(),Jr=v.__private__.decodeColorString=function(d){var S=d.split(" ");if(S.length!==2||S[1]!=="g"&&S[1]!=="G")S.length===5&&(S[4]==="k"||S[4]==="K")&&(S=[(1-S[0])*(1-S[3]),(1-S[1])*(1-S[3]),(1-S[2])*(1-S[3]),"r"]);else{var B=parseFloat(S[0]);S=[B,B,B,"r"]}for(var K="#",oe=0;oe<3;oe++)K+=("0"+Math.floor(255*parseFloat(S[oe])).toString(16)).slice(-2);return K},Yr=v.__private__.encodeColorString=function(d){var S;typeof d=="string"&&(d={ch1:d});var B=d.ch1,K=d.ch2,oe=d.ch3,we=d.ch4,Ce=d.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof B=="string"&&B.charAt(0)!=="#"){var $e=new Yp(B);if($e.ok)B=$e.toHex();else if(!/^\d*\.?\d*$/.test(B))throw new Error('Invalid color "'+B+'" passed to jsPDF.encodeColorString.')}if(typeof B=="string"&&/^#[0-9A-Fa-f]{3}$/.test(B)&&(B="#"+B[1]+B[1]+B[2]+B[2]+B[3]+B[3]),typeof B=="string"&&/^#[0-9A-Fa-f]{6}$/.test(B)){var tt=parseInt(B.substr(1),16);B=tt>>16&255,K=tt>>8&255,oe=255&tt}if(K===void 0||we===void 0&&B===K&&K===oe)if(typeof B=="string")S=B+" "+Ce[0];else switch(d.precision){case 2:S=W(B/255)+" "+Ce[0];break;case 3:default:S=j(B/255)+" "+Ce[0]}else if(we===void 0||Dt(we)==="object"){if(we&&!isNaN(we.a)&&we.a===0)return S=["1.","1.","1.",Ce[1]].join(" ");if(typeof B=="string")S=[B,K,oe,Ce[1]].join(" ");else switch(d.precision){case 2:S=[W(B/255),W(K/255),W(oe/255),Ce[1]].join(" ");break;default:case 3:S=[j(B/255),j(K/255),j(oe/255),Ce[1]].join(" ")}}else if(typeof B=="string")S=[B,K,oe,we,Ce[2]].join(" ");else switch(d.precision){case 2:S=[W(B),W(K),W(oe),W(we),Ce[2]].join(" ");break;case 3:default:S=[j(B),j(K),j(oe),j(we),Ce[2]].join(" ")}return S},hn=v.__private__.getFilters=function(){return a},$r=v.__private__.putStream=function(d){var S=(d=d||{}).data||"",B=d.filters||hn(),K=d.alreadyAppliedFilters||[],oe=d.addLength1||!1,we=S.length,Ce=d.objectId,$e=function(Rr){return Rr};if(g!==null&&Ce===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&($e=Tr.encryptor(Ce,0));var tt={};B===!0&&(B=["FlateEncode"]);var ft=d.additionalKeyValues||[],ht=(tt=at.API.processDataByFilters!==void 0?at.API.processDataByFilters(S,B):{data:S,reverseChain:[]}).reverseChain+(Array.isArray(K)?K.join(" "):K.toString());if(tt.data.length!==0&&(ft.push({key:"Length",value:tt.data.length}),oe===!0&&ft.push({key:"Length1",value:we})),ht.length!=0)if(ht.split("/").length-1==1)ft.push({key:"Filter",value:ht});else{ft.push({key:"Filter",value:"["+ht+"]"});for(var xt=0;xt<ft.length;xt+=1)if(ft[xt].key==="DecodeParms"){for(var Yt=[],Qt=0;Qt<tt.reverseChain.split("/").length-1;Qt+=1)Yt.push("null");Yt.push(ft[xt].value),ft[xt].value="["+Yt.join(" ")+"]"}}$("<<");for(var fr=0;fr<ft.length;fr++)$("/"+ft[fr].key+" "+ft[fr].value);$(">>"),tt.data.length!==0&&($("stream"),$($e(tt.data)),$("endstream"))},dn=v.__private__.putPage=function(d){var S=d.number,B=d.data,K=d.objId,oe=d.contentsObjId;Er(K,!0),$("<</Type /Page"),$("/Parent "+d.rootDictionaryObjId+" 0 R"),$("/Resources "+d.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(G(d.mediaBox.bottomLeftX))+" "+parseFloat(G(d.mediaBox.bottomLeftY))+" "+G(d.mediaBox.topRightX)+" "+G(d.mediaBox.topRightY)+"]"),d.cropBox!==null&&$("/CropBox ["+G(d.cropBox.bottomLeftX)+" "+G(d.cropBox.bottomLeftY)+" "+G(d.cropBox.topRightX)+" "+G(d.cropBox.topRightY)+"]"),d.bleedBox!==null&&$("/BleedBox ["+G(d.bleedBox.bottomLeftX)+" "+G(d.bleedBox.bottomLeftY)+" "+G(d.bleedBox.topRightX)+" "+G(d.bleedBox.topRightY)+"]"),d.trimBox!==null&&$("/TrimBox ["+G(d.trimBox.bottomLeftX)+" "+G(d.trimBox.bottomLeftY)+" "+G(d.trimBox.topRightX)+" "+G(d.trimBox.topRightY)+"]"),d.artBox!==null&&$("/ArtBox ["+G(d.artBox.bottomLeftX)+" "+G(d.artBox.bottomLeftY)+" "+G(d.artBox.topRightX)+" "+G(d.artBox.topRightY)+"]"),typeof d.userUnit=="number"&&d.userUnit!==1&&$("/UserUnit "+d.userUnit),At.publish("putPage",{objId:K,pageContext:ct[S],pageNumber:S,page:B}),$("/Contents "+oe+" 0 R"),$(">>"),$("endobj");var we=B.join(`
`);return F===I.ADVANCED&&(we+=`
Q`),Er(oe,!0),$r({data:we,filters:hn(),objectId:oe}),$("endobj"),K},ui=v.__private__.putPages=function(){var d,S,B=[];for(d=1;d<=$t;d++)ct[d].objId=Kt(),ct[d].contentsObjId=Kt();for(d=1;d<=$t;d++)B.push(dn({number:d,data:Le[d],objId:ct[d].objId,contentsObjId:ct[d].contentsObjId,mediaBox:ct[d].mediaBox,cropBox:ct[d].cropBox,bleedBox:ct[d].bleedBox,trimBox:ct[d].trimBox,artBox:ct[d].artBox,userUnit:ct[d].userUnit,rootDictionaryObjId:_n,resourceDictionaryObjId:Kr}));Er(_n,!0),$("<</Type /Pages");var K="/Kids [";for(S=0;S<$t;S++)K+=B[S]+" 0 R ";$(K+"]"),$("/Count "+$t),$(">>"),$("endobj"),At.publish("postPutPages")},ki=function(d){At.publish("putFont",{font:d,out:$,newObject:Xt,putStream:$r}),d.isAlreadyPutted!==!0&&(d.objectNumber=Xt(),$("<<"),$("/Type /Font"),$("/BaseFont /"+wa(d.postScriptName)),$("/Subtype /Type1"),typeof d.encoding=="string"&&$("/Encoding /"+d.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},fn=function(){for(var d in vt)vt.hasOwnProperty(d)&&(m===!1||m===!0&&y.hasOwnProperty(d))&&ki(vt[d])},Zr=function(d){d.objectNumber=Xt();var S=[];S.push({key:"Type",value:"/XObject"}),S.push({key:"Subtype",value:"/Form"}),S.push({key:"BBox",value:"["+[G(d.x),G(d.y),G(d.x+d.width),G(d.y+d.height)].join(" ")+"]"}),S.push({key:"Matrix",value:"["+d.matrix.toString()+"]"});var B=d.pages[1].join(`
`);$r({data:B,additionalKeyValues:S,objectId:d.objectNumber}),$("endobj")},Tn=function(){for(var d in dr)dr.hasOwnProperty(d)&&Zr(dr[d])},Fs=function(d,S){var B,K=[],oe=1/(S-1);for(B=0;B<1;B+=oe)K.push(B);if(K.push(1),d[0].offset!=0){var we={offset:0,color:d[0].color};d.unshift(we)}if(d[d.length-1].offset!=1){var Ce={offset:1,color:d[d.length-1].color};d.push(Ce)}for(var $e="",tt=0,ft=0;ft<K.length;ft++){for(B=K[ft];B>d[tt+1].offset;)tt++;var ht=d[tt].offset,xt=(B-ht)/(d[tt+1].offset-ht),Yt=d[tt].color,Qt=d[tt+1].color;$e+=H(Math.round((1-xt)*Yt[0]+xt*Qt[0]).toString(16))+H(Math.round((1-xt)*Yt[1]+xt*Qt[1]).toString(16))+H(Math.round((1-xt)*Yt[2]+xt*Qt[2]).toString(16))}return $e.trim()},os=function(d,S){S||(S=21);var B=Xt(),K=Fs(d.colors,S),oe=[];oe.push({key:"FunctionType",value:"0"}),oe.push({key:"Domain",value:"[0.0 1.0]"}),oe.push({key:"Size",value:"["+S+"]"}),oe.push({key:"BitsPerSample",value:"8"}),oe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),oe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$r({data:K,additionalKeyValues:oe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:B}),$("endobj"),d.objectNumber=Xt(),$("<< /ShadingType "+d.type),$("/ColorSpace /DeviceRGB");var we="/Coords ["+G(parseFloat(d.coords[0]))+" "+G(parseFloat(d.coords[1]))+" ";d.type===2?we+=G(parseFloat(d.coords[2]))+" "+G(parseFloat(d.coords[3])):we+=G(parseFloat(d.coords[2]))+" "+G(parseFloat(d.coords[3]))+" "+G(parseFloat(d.coords[4]))+" "+G(parseFloat(d.coords[5])),$(we+="]"),d.matrix&&$("/Matrix ["+d.matrix.toString()+"]"),$("/Function "+B+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},Ra=function(d,S){var B=Kt(),K=Xt();S.push({resourcesOid:B,objectOid:K}),d.objectNumber=K;var oe=[];oe.push({key:"Type",value:"/Pattern"}),oe.push({key:"PatternType",value:"1"}),oe.push({key:"PaintType",value:"1"}),oe.push({key:"TilingType",value:"1"}),oe.push({key:"BBox",value:"["+d.boundingBox.map(G).join(" ")+"]"}),oe.push({key:"XStep",value:G(d.xStep)}),oe.push({key:"YStep",value:G(d.yStep)}),oe.push({key:"Resources",value:B+" 0 R"}),d.matrix&&oe.push({key:"Matrix",value:"["+d.matrix.toString()+"]"}),$r({data:d.stream,additionalKeyValues:oe,objectId:d.objectNumber}),$("endobj")},Li=function(d){var S;for(S in jt)jt.hasOwnProperty(S)&&(jt[S]instanceof Cs?os(jt[S]):jt[S]instanceof _a&&Ra(jt[S],d))},Ds=function(d){for(var S in d.objectNumber=Xt(),$("<<"),d)switch(S){case"opacity":$("/ca "+W(d[S]));break;case"stroke-opacity":$("/CA "+W(d[S]))}$(">>"),$("endobj")},Oa=function(){var d;for(d in Ht)Ht.hasOwnProperty(d)&&Ds(Ht[d])},ls=function(){for(var d in $("/XObject <<"),dr)dr.hasOwnProperty(d)&&dr[d].objectNumber>=0&&$("/"+d+" "+dr[d].objectNumber+" 0 R");At.publish("putXobjectDict"),$(">>")},cs=function(){Tr.oid=Xt(),$("<<"),$("/Filter /Standard"),$("/V "+Tr.v),$("/R "+Tr.r),$("/U <"+Tr.toHexString(Tr.U)+">"),$("/O <"+Tr.toHexString(Tr.O)+">"),$("/P "+Tr.P),$(">>"),$("endobj")},Ci=function(){for(var d in $("/Font <<"),vt)vt.hasOwnProperty(d)&&(m===!1||m===!0&&y.hasOwnProperty(d))&&$("/"+d+" "+vt[d].objectNumber+" 0 R");$(">>")},us=function(){if(Object.keys(jt).length>0){for(var d in $("/Shading <<"),jt)jt.hasOwnProperty(d)&&jt[d]instanceof Cs&&jt[d].objectNumber>=0&&$("/"+d+" "+jt[d].objectNumber+" 0 R");At.publish("putShadingPatternDict"),$(">>")}},Pi=function(d){if(Object.keys(jt).length>0){for(var S in $("/Pattern <<"),jt)jt.hasOwnProperty(S)&&jt[S]instanceof v.TilingPattern&&jt[S].objectNumber>=0&&jt[S].objectNumber<d&&$("/"+S+" "+jt[S].objectNumber+" 0 R");At.publish("putTilingPatternDict"),$(">>")}},Fa=function(){if(Object.keys(Ht).length>0){var d;for(d in $("/ExtGState <<"),Ht)Ht.hasOwnProperty(d)&&Ht[d].objectNumber>=0&&$("/"+d+" "+Ht[d].objectNumber+" 0 R");At.publish("putGStateDict"),$(">>")}},Jt=function(d){Er(d.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ci(),us(),Pi(d.objectOid),Fa(),ls(),$(">>"),$("endobj")},Ms=function(){var d=[];fn(),Oa(),Tn(),Li(d),At.publish("putResources"),d.forEach(Jt),Jt({resourcesOid:Kr,objectOid:Number.MAX_SAFE_INTEGER}),At.publish("postPutResources")},hs=function(){At.publish("putAdditionalObjects");for(var d=0;d<_e.length;d++){var S=_e[d];Er(S.objId,!0),$(S.content),$("endobj")}At.publish("postPutAdditionalObjects")},Bs=function(d){Ct[d.fontName]=Ct[d.fontName]||{},Ct[d.fontName][d.fontStyle]=d.id},ds=function(d,S,B,K,oe){var we={id:"F"+(Object.keys(vt).length+1).toString(10),postScriptName:d,fontName:S,fontStyle:B,encoding:K,isStandardFont:oe||!1,metadata:{}};return At.publish("addFont",{font:we,instance:this}),vt[we.id]=we,Bs(we),we.id},Us=function(d){for(var S=0,B=ke.length;S<B;S++){var K=ds.call(this,d[S][0],d[S][1],d[S][2],ke[S][3],!0);m===!1&&(y[K]=!0);var oe=d[S][0].split("-");Bs({id:K,fontName:oe[0],fontStyle:oe[1]||""})}At.publish("addFonts",{fonts:vt,dictionary:Ct})},ue=function(d){return d.foo=function(){try{return d.apply(this,arguments)}catch(K){var S=K.stack||"";~S.indexOf(" at ")&&(S=S.split(" at ")[1]);var B="Error in function "+S.split(`
`)[0].split("<")[0]+": "+K.message;if(!ot.console)throw new Error(B);ot.console.error(B,K),ot.alert&&alert(B)}},d.foo.bar=d,d.foo},Ye=function(d,S){var B,K,oe,we,Ce,$e,tt,ft,ht;if(oe=(S=S||{}).sourceEncoding||"Unicode",Ce=S.outputEncoding,(S.autoencode||Ce)&&vt[et].metadata&&vt[et].metadata[oe]&&vt[et].metadata[oe].encoding&&(we=vt[et].metadata[oe].encoding,!Ce&&vt[et].encoding&&(Ce=vt[et].encoding),!Ce&&we.codePages&&(Ce=we.codePages[0]),typeof Ce=="string"&&(Ce=we[Ce]),Ce)){for(tt=!1,$e=[],B=0,K=d.length;B<K;B++)(ft=Ce[d.charCodeAt(B)])?$e.push(String.fromCharCode(ft)):$e.push(d[B]),$e[B].charCodeAt(0)>>8&&(tt=!0);d=$e.join("")}for(B=d.length;tt===void 0&&B!==0;)d.charCodeAt(B-1)>>8&&(tt=!0),B--;if(!tt)return d;for($e=S.noBOM?[]:[254,255],B=0,K=d.length;B<K;B++){if((ht=(ft=d.charCodeAt(B))>>8)>>8)throw new Error("Character at position "+B+" of string '"+d+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$e.push(ht),$e.push(ft-(ht<<8))}return String.fromCharCode.apply(void 0,$e)},Ke=v.__private__.pdfEscape=v.pdfEscape=function(d,S){return Ye(d,S).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rt=v.__private__.beginPage=function(d){Le[++$t]=[],ct[$t]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(d[0]),topRightY:Number(d[1])}},ir($t),ye(Le[D])},Cr=function(d,S){var B,K,oe;switch(t=S||t,typeof d=="string"&&(B=w(d.toLowerCase()),Array.isArray(B)&&(K=B[0],oe=B[1])),Array.isArray(d)&&(K=d[0]*Ie,oe=d[1]*Ie),isNaN(K)&&(K=i[0],oe=i[1]),(K>14400||oe>14400)&&(Ft.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),K=Math.min(14400,K),oe=Math.min(14400,oe)),i=[K,oe],t.substr(0,1)){case"l":oe>K&&(i=[oe,K]);break;case"p":K>oe&&(i=[oe,K])}rt(i),Bo(Ba),$(On),$a!==0&&$($a+" J"),qa!==0&&$(qa+" j"),At.publish("addPage",{pageNumber:$t})},lt=function(d){d>0&&d<=$t&&(Le.splice(d,1),ct.splice(d,1),$t--,D>$t&&(D=$t),this.setPage(D))},ir=function(d){d>0&&d<=$t&&(D=d)},qt=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return Le.length-1},wt=function(d,S,B){var K,oe=void 0;return B=B||{},d=d!==void 0?d:vt[et].fontName,S=S!==void 0?S:vt[et].fontStyle,K=d.toLowerCase(),Ct[K]!==void 0&&Ct[K][S]!==void 0?oe=Ct[K][S]:Ct[d]!==void 0&&Ct[d][S]!==void 0?oe=Ct[d][S]:B.disableWarning===!1&&Ft.warn("Unable to look up font label for font '"+d+"', '"+S+"'. Refer to getFontList() for available fonts."),oe||B.noFallback||(oe=Ct.times[S])==null&&(oe=Ct.times.normal),oe},Pt=v.__private__.putInfo=function(){var d=Xt(),S=function(K){return K};for(var B in g!==null&&(S=Tr.encryptor(d,0)),$("<<"),$("/Producer ("+Ke(S("jsPDF "+at.version))+")"),Ve)Ve.hasOwnProperty(B)&&Ve[B]&&$("/"+B.substr(0,1).toUpperCase()+B.substr(1)+" ("+Ke(S(Ve[B]))+")");$("/CreationDate ("+Ke(S(X))+")"),$(">>"),$("endobj")},Rn=v.__private__.putCatalog=function(d){var S=(d=d||{}).rootDictionaryObjId||_n;switch(Xt(),$("<<"),$("/Type /Catalog"),$("/Pages "+S+" 0 R"),Me||(Me="fullwidth"),Me){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var B=""+Me;B.substr(B.length-1)==="%"&&(Me=parseInt(Me)/100),typeof Me=="number"&&$("/OpenAction [3 0 R /XYZ null null "+W(Me)+"]")}switch(Ne||(Ne="continuous"),Ne){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}Pe&&$("/PageMode /"+Pe),At.publish("putCatalog"),$(">>"),$("endobj")},hi=v.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(ne+1)),$("/Root "+ne+" 0 R"),$("/Info "+(ne-1)+" 0 R"),g!==null&&$("/Encrypt "+Tr.oid+" 0 R"),$("/ID [ <"+ie+"> <"+ie+"> ]"),$(">>")},Xl=v.__private__.putHeader=function(){$("%PDF-"+A),$("%ºß¬à")},Ql=v.__private__.putXRef=function(){var d="0000000000";$("xref"),$("0 "+(ne+1)),$("0000000000 65535 f ");for(var S=1;S<=ne;S++)typeof fe[S]=="function"?$((d+fe[S]()).slice(-10)+" 00000 n "):fe[S]!==void 0?$((d+fe[S]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},di=v.__private__.buildDocument=function(){Xe(),ye(me),At.publish("buildDocument"),Xl(),ui(),hs(),Ms(),g!==null&&cs(),Pt(),Rn();var d=pe;return Ql(),hi(),$("startxref"),$(""+d),$("%%EOF"),ye(Le[D]),me.join(`
`)},$s=v.__private__.getBlob=function(d){return new Blob([ze(d)],{type:"application/pdf"})},qs=v.output=v.__private__.output=ue(function(d,S){switch(typeof(S=S||{})=="string"?S={filename:S}:S.filename=S.filename||"generated.pdf",d){case void 0:return di();case"save":v.save(S.filename);break;case"arraybuffer":return ze(di());case"blob":return $s(di());case"bloburi":case"bloburl":if(ot.URL!==void 0&&typeof ot.URL.createObjectURL=="function")return ot.URL&&ot.URL.createObjectURL($s(di()))||void 0;Ft.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var B="",K=di();try{B=xu(K)}catch{B=xu(unescape(encodeURIComponent(K)))}return"data:application/pdf;filename="+S.filename+";base64,"+B;case"pdfobjectnewwindow":if(Object.prototype.toString.call(ot)==="[object Window]"){var oe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",we=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';S.pdfObjectUrl&&(oe=S.pdfObjectUrl,we="");var Ce='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+oe+'"'+we+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(S)+");<\/script></body></html>",$e=ot.open();return $e!==null&&$e.document.write(Ce),$e}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(ot)==="[object Window]"){var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(S.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+S.filename+'" width="500px" height="400px" /></body></html>',ft=ot.open();if(ft!==null){ft.document.write(tt);var ht=this;ft.document.documentElement.querySelector("#pdfViewer").onload=function(){ft.document.title=S.filename,ft.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ht.output("bloburl"))}}return ft}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(ot)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",S)+'"></iframe></body></html>',Yt=ot.open();if(Yt!==null&&(Yt.document.write(xt),Yt.document.title=S.filename),Yt||typeof safari>"u")return Yt;break;case"datauri":case"dataurl":return ot.document.location.href=this.output("datauristring",S);default:return null}}),Oo=function(d){return Array.isArray(Gn)===!0&&Gn.indexOf(d)>-1};switch(r){case"pt":Ie=1;break;case"mm":Ie=72/25.4;break;case"cm":Ie=72/2.54;break;case"in":Ie=72;break;case"px":Ie=Oo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ie=12;break;case"ex":Ie=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ie=r}var Tr=null;Oe(),Q();var ec=function(d){return g!==null?Tr.encryptor(d,0):function(S){return S}},Fo=v.__private__.getPageInfo=v.getPageInfo=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ct[d].objId,pageNumber:d,pageContext:ct[d]}},ut=v.__private__.getPageInfoByObjId=function(d){if(isNaN(d)||d%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var S in ct)if(ct[S].objId===d)break;return Fo(S)},tc=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:ct[D].objId,pageNumber:D,pageContext:ct[D]}};v.addPage=function(){return Cr.apply(this,arguments),this},v.setPage=function(){return ir.apply(this,arguments),ye.call(this,Le[D]),this},v.insertPage=function(d){return this.addPage(),this.movePage(D,d),this},v.movePage=function(d,S){var B,K;if(d>S){B=Le[d],K=ct[d];for(var oe=d;oe>S;oe--)Le[oe]=Le[oe-1],ct[oe]=ct[oe-1];Le[S]=B,ct[S]=K,this.setPage(S)}else if(d<S){B=Le[d],K=ct[d];for(var we=d;we<S;we++)Le[we]=Le[we+1],ct[we]=ct[we+1];Le[S]=B,ct[S]=K,this.setPage(S)}return this},v.deletePage=function(){return lt.apply(this,arguments),this},v.__private__.text=v.text=function(d,S,B,K,oe){var we,Ce,$e,tt,ft,ht,xt,Yt,Qt,fr=(K=K||{}).scope||this;if(typeof d=="number"&&typeof S=="number"&&(typeof B=="string"||Array.isArray(B))){var Rr=B;B=S,S=d,d=Rr}if(arguments[3]instanceof nt?(M("The transform parameter of text() with a Matrix value"),Qt=oe):($e=arguments[4],tt=arguments[5],Dt(xt=arguments[3])==="object"&&xt!==null||(typeof $e=="string"&&(tt=$e,$e=null),typeof xt=="string"&&(tt=xt,xt=null),typeof xt=="number"&&($e=xt,xt=null),K={flags:xt,angle:$e,align:tt})),isNaN(S)||isNaN(B)||d==null)throw new Error("Invalid arguments passed to jsPDF.text");if(d.length===0)return fr;var xr="",Fn=!1,pn=typeof K.lineHeightFactor=="number"?K.lineHeightFactor:ps,Yn=fr.internal.scaleFactor;function Vo(Mt){return Mt=Mt.split("	").join(Array(K.TabLen||9).join(" ")),Ke(Mt,xt)}function Ga(Mt){for(var Bt,ar=Mt.concat(),br=[],vi=ar.length;vi--;)typeof(Bt=ar.shift())=="string"?br.push(Bt):Array.isArray(Mt)&&(Bt.length===1||Bt[1]===void 0&&Bt[2]===void 0)?br.push(Bt[0]):br.push([Bt[0],Bt[1],Bt[2]]);return br}function Ka(Mt,Bt){var ar;if(typeof Mt=="string")ar=Bt(Mt)[0];else if(Array.isArray(Mt)){for(var br,vi,ro=Mt.concat(),na=[],Yo=ro.length;Yo--;)typeof(br=ro.shift())=="string"?na.push(Bt(br)[0]):Array.isArray(br)&&typeof br[0]=="string"&&(vi=Bt(br[0],br[1],br[2]),na.push([vi[0],vi[1],vi[2]]));ar=na}return ar}var Ks=!1,Ja=!0;if(typeof d=="string")Ks=!0;else if(Array.isArray(d)){var Ya=d.concat();Ce=[];for(var Js,Pr=Ya.length;Pr--;)(typeof(Js=Ya.shift())!="string"||Array.isArray(Js)&&typeof Js[0]!="string")&&(Ja=!1);Ks=Ja}if(Ks===!1)throw new Error('Type of text must be string or Array. "'+d+'" is not recognized.');typeof d=="string"&&(d=d.match(/[\r?\n]/)?d.split(/\r\n|\r|\n/g):[d]);var Ys=Re/fr.internal.scaleFactor,Zs=Ys*(pn-1);switch(K.baseline){case"bottom":B-=Zs;break;case"top":B+=Ys-Zs;break;case"hanging":B+=Ys-2*Zs;break;case"middle":B+=Ys/2-Zs}if((ht=K.maxWidth||0)>0&&(typeof d=="string"?d=fr.splitTextToSize(d,ht):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(Mt,Bt){return Mt.concat(fr.splitTextToSize(Bt,ht))},[]))),we={text:d,x:S,y:B,options:K,mutex:{pdfEscape:Ke,activeFontKey:et,fonts:vt,activeFontSize:Re}},At.publish("preProcessText",we),d=we.text,$e=(K=we.options).angle,!(Qt instanceof nt)&&$e&&typeof $e=="number"){$e*=Math.PI/180,K.rotationDirection===0&&($e=-$e),F===I.ADVANCED&&($e=-$e);var Xs=Math.cos($e),Za=Math.sin($e);Qt=new nt(Xs,Za,-Za,Xs,0,0)}else $e&&$e instanceof nt&&(Qt=$e);F!==I.ADVANCED||Qt||(Qt=un),(ft=K.charSpace||Vs)!==void 0&&(xr+=G(E(ft))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yt=K.horizontalScale)!==void 0&&(xr+=G(100*Yt)+` Tz
`),K.lang;var Xr=-1,hc=K.renderingMode!==void 0?K.renderingMode:K.stroke,Xa=fr.internal.getCurrentPageInfo().pageContext;switch(hc){case 0:case!1:case"fill":Xr=0;break;case 1:case!0:case"stroke":Xr=1;break;case 2:case"fillThenStroke":Xr=2;break;case 3:case"invisible":Xr=3;break;case 4:case"fillAndAddForClipping":Xr=4;break;case 5:case"strokeAndAddPathForClipping":Xr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Xr=6;break;case 7:case"addToPathForClipping":Xr=7}var Ho=Xa.usedRenderingMode!==void 0?Xa.usedRenderingMode:-1;Xr!==-1?xr+=Xr+` Tr
`:Ho!==-1&&(xr+=`0 Tr
`),Xr!==-1&&(Xa.usedRenderingMode=Xr),tt=K.align||"left";var Sn,Qs=Re*pn,Go=fr.internal.pageSize.getWidth(),Ko=vt[et];ft=K.charSpace||Vs,ht=K.maxWidth||0,xt=Object.assign({autoencode:!0,noBOM:!0},K.flags);var Ti=[],vs=function(Mt){return fr.getStringUnitWidth(Mt,{font:Ko,charSpace:ft,fontSize:Re,doKerning:!1})*Re/Yn};if(Object.prototype.toString.call(d)==="[object Array]"){var Qr;Ce=Ga(d),tt!=="left"&&(Sn=Ce.map(vs));var qr,Ri=0;if(tt==="right"){S-=Sn[0],d=[],Pr=Ce.length;for(var pi=0;pi<Pr;pi++)pi===0?(qr=Jn(S),Qr=fi(B)):(qr=E(Ri-Sn[pi]),Qr=-Qs),d.push([Ce[pi],qr,Qr]),Ri=Sn[pi]}else if(tt==="center"){S-=Sn[0]/2,d=[],Pr=Ce.length;for(var gi=0;gi<Pr;gi++)gi===0?(qr=Jn(S),Qr=fi(B)):(qr=E((Ri-Sn[gi])/2),Qr=-Qs),d.push([Ce[gi],qr,Qr]),Ri=Sn[gi]}else if(tt==="left"){d=[],Pr=Ce.length;for(var ea=0;ea<Pr;ea++)d.push(Ce[ea])}else if(tt==="justify"&&Ko.encoding==="Identity-H"){d=[],Pr=Ce.length,ht=ht!==0?ht:Go;for(var mi=0,sr=0;sr<Pr;sr++)if(Qr=sr===0?fi(B):-Qs,qr=sr===0?Jn(S):mi,sr<Pr-1){var Qa=E((ht-Sn[sr])/(Ce[sr].split(" ").length-1)),zr=Ce[sr].split(" ");d.push([zr[0]+" ",qr,Qr]),mi=0;for(var jn=1;jn<zr.length;jn++){var ta=(vs(zr[jn-1]+" "+zr[jn])-vs(zr[jn]))*Yn+Qa;jn==zr.length-1?d.push([zr[jn],ta,0]):d.push([zr[jn]+" ",ta,0]),mi-=ta}}else d.push([Ce[sr],qr,Qr]);d.push(["",mi,0])}else{if(tt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(d=[],Pr=Ce.length,ht=ht!==0?ht:Go,sr=0;sr<Pr;sr++)Qr=sr===0?fi(B):-Qs,qr=sr===0?Jn(S):0,sr<Pr-1?Ti.push(G(E((ht-Sn[sr])/(Ce[sr].split(" ").length-1)))):Ti.push(0),d.push([Ce[sr],qr,Qr])}}var Jo=typeof K.R2L=="boolean"?K.R2L:Je;Jo===!0&&(d=Ka(d,function(Mt,Bt,ar){return[Mt.split("").reverse().join(""),Bt,ar]})),we={text:d,x:S,y:B,options:K,mutex:{pdfEscape:Ke,activeFontKey:et,fonts:vt,activeFontSize:Re}},At.publish("postProcessText",we),d=we.text,Fn=we.mutex.isHex||!1;var eo=vt[et].encoding;eo!=="WinAnsiEncoding"&&eo!=="StandardEncoding"||(d=Ka(d,function(Mt,Bt,ar){return[Vo(Mt),Bt,ar]})),Ce=Ga(d),d=[];for(var bs,ys,Oi,ws=0,ra=1,xs=Array.isArray(Ce[0])?ra:ws,Fi="",to=function(Mt,Bt,ar){var br="";return ar instanceof nt?(ar=typeof K.angle=="number"?Gr(ar,new nt(1,0,0,1,Mt,Bt)):Gr(new nt(1,0,0,1,Mt,Bt),ar),F===I.ADVANCED&&(ar=Gr(new nt(1,0,0,-1,0,0),ar)),br=ar.join(" ")+` Tm
`):br=G(Mt)+" "+G(Bt)+` Td
`,br},An=0;An<Ce.length;An++){switch(Fi="",xs){case ra:Oi=(Fn?"<":"(")+Ce[An][0]+(Fn?">":")"),bs=parseFloat(Ce[An][1]),ys=parseFloat(Ce[An][2]);break;case ws:Oi=(Fn?"<":"(")+Ce[An]+(Fn?">":")"),bs=Jn(S),ys=fi(B)}Ti!==void 0&&Ti[An]!==void 0&&(Fi=Ti[An]+` Tw
`),An===0?d.push(Fi+to(bs,ys,Qt)+Oi):xs===ws?d.push(Fi+Oi):xs===ra&&d.push(Fi+to(bs,ys,Qt)+Oi)}d=xs===ws?d.join(` Tj
T* `):d.join(` Tj
`),d+=` Tj
`;var kn=`BT
/`;return kn+=et+" "+Re+` Tf
`,kn+=G(Re*pn)+` TL
`,kn+=gs+`
`,kn+=xr,kn+=d,$(kn+="ET"),y[et]=!0,fr};var rc=v.__private__.clip=v.clip=function(d){return $(d==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return rc("evenodd")},v.__private__.discardPath=v.discardPath=function(){return $("n"),this};var Kn=v.__private__.isValidStyle=function(d){var S=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(d)!==-1&&(S=!0),S};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(d){return Kn(d)&&(f=d),this};var Do=v.__private__.getStyle=v.getStyle=function(d){var S=f;switch(d){case"D":case"S":S="S";break;case"F":S="f";break;case"FD":case"DF":S="B";break;case"f":case"f*":case"B":case"B*":S=d}return S},Mo=v.close=function(){return $("h"),this};v.stroke=function(){return $("S"),this},v.fill=function(d){return zs("f",d),this},v.fillEvenOdd=function(d){return zs("f*",d),this},v.fillStroke=function(d){return zs("B",d),this},v.fillStrokeEvenOdd=function(d){return zs("B*",d),this};var zs=function(d,S){Dt(S)==="object"?ic(S,d):$(d)},Da=function(d){d===null||F===I.ADVANCED&&d===void 0||(d=Do(d),$(d))};function nc(d,S,B,K,oe){var we=new _a(S||this.boundingBox,B||this.xStep,K||this.yStep,this.gState,oe||this.matrix);we.stream=this.stream;var Ce=d+"$$"+this.cloneIndex+++"$$";return Lr(Ce,we),we}var ic=function(d,S){var B=Hn[d.key],K=jt[B];if(K instanceof Cs)$("q"),$(sc(S)),K.gState&&v.setGState(K.gState),$(d.matrix.toString()+" cm"),$("/"+B+" sh"),$("Q");else if(K instanceof _a){var oe=new nt(1,0,0,-1,0,Ei());d.matrix&&(oe=oe.multiply(d.matrix||un),B=nc.call(K,d.key,d.boundingBox,d.xStep,d.yStep,oe).id),$("q"),$("/Pattern cs"),$("/"+B+" scn"),K.gState&&v.setGState(K.gState),$(S),$("Q")}},sc=function(d){switch(d){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ma=v.moveTo=function(d,S){return $(G(E(d))+" "+G(U(S))+" m"),this},fs=v.lineTo=function(d,S){return $(G(E(d))+" "+G(U(S))+" l"),this},Ii=v.curveTo=function(d,S,B,K,oe,we){return $([G(E(d)),G(U(S)),G(E(B)),G(U(K)),G(E(oe)),G(U(we)),"c"].join(" ")),this};v.__private__.line=v.line=function(d,S,B,K,oe){if(isNaN(d)||isNaN(S)||isNaN(B)||isNaN(K)||!Kn(oe))throw new Error("Invalid arguments passed to jsPDF.line");return F===I.COMPAT?this.lines([[B-d,K-S]],d,S,[1,1],oe||"S"):this.lines([[B-d,K-S]],d,S,[1,1]).stroke()},v.__private__.lines=v.lines=function(d,S,B,K,oe,we){var Ce,$e,tt,ft,ht,xt,Yt,Qt,fr,Rr,xr,Fn;if(typeof d=="number"&&(Fn=B,B=S,S=d,d=Fn),K=K||[1,1],we=we||!1,isNaN(S)||isNaN(B)||!Array.isArray(d)||!Array.isArray(K)||!Kn(oe)||typeof we!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ma(S,B),Ce=K[0],$e=K[1],ft=d.length,Rr=S,xr=B,tt=0;tt<ft;tt++)(ht=d[tt]).length===2?(Rr=ht[0]*Ce+Rr,xr=ht[1]*$e+xr,fs(Rr,xr)):(xt=ht[0]*Ce+Rr,Yt=ht[1]*$e+xr,Qt=ht[2]*Ce+Rr,fr=ht[3]*$e+xr,Rr=ht[4]*Ce+Rr,xr=ht[5]*$e+xr,Ii(xt,Yt,Qt,fr,Rr,xr));return we&&Mo(),Da(oe),this},v.path=function(d){for(var S=0;S<d.length;S++){var B=d[S],K=B.c;switch(B.op){case"m":Ma(K[0],K[1]);break;case"l":fs(K[0],K[1]);break;case"c":Ii.apply(this,K);break;case"h":Mo()}}return this},v.__private__.rect=v.rect=function(d,S,B,K,oe){if(isNaN(d)||isNaN(S)||isNaN(B)||isNaN(K)||!Kn(oe))throw new Error("Invalid arguments passed to jsPDF.rect");return F===I.COMPAT&&(K=-K),$([G(E(d)),G(U(S)),G(E(B)),G(E(K)),"re"].join(" ")),Da(oe),this},v.__private__.triangle=v.triangle=function(d,S,B,K,oe,we,Ce){if(isNaN(d)||isNaN(S)||isNaN(B)||isNaN(K)||isNaN(oe)||isNaN(we)||!Kn(Ce))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[B-d,K-S],[oe-B,we-K],[d-oe,S-we]],d,S,[1,1],Ce,!0),this},v.__private__.roundedRect=v.roundedRect=function(d,S,B,K,oe,we,Ce){if(isNaN(d)||isNaN(S)||isNaN(B)||isNaN(K)||isNaN(oe)||isNaN(we)||!Kn(Ce))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $e=4/3*(Math.SQRT2-1);return oe=Math.min(oe,.5*B),we=Math.min(we,.5*K),this.lines([[B-2*oe,0],[oe*$e,0,oe,we-we*$e,oe,we],[0,K-2*we],[0,we*$e,-oe*$e,we,-oe,we],[2*oe-B,0],[-oe*$e,0,-oe,-we*$e,-oe,-we],[0,2*we-K],[0,-we*$e,oe*$e,-we,oe,-we]],d+oe,S,[1,1],Ce,!0),this},v.__private__.ellipse=v.ellipse=function(d,S,B,K,oe){if(isNaN(d)||isNaN(S)||isNaN(B)||isNaN(K)||!Kn(oe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var we=4/3*(Math.SQRT2-1)*B,Ce=4/3*(Math.SQRT2-1)*K;return Ma(d+B,S),Ii(d+B,S-Ce,d+we,S-K,d,S-K),Ii(d-we,S-K,d-B,S-Ce,d-B,S),Ii(d-B,S+Ce,d-we,S+K,d,S+K),Ii(d+we,S+K,d+B,S+Ce,d+B,S),Da(oe),this},v.__private__.circle=v.circle=function(d,S,B,K){if(isNaN(d)||isNaN(S)||isNaN(B)||!Kn(K))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(d,S,B,B,K)},v.setFont=function(d,S,B){return B&&(S=re(S,B)),et=wt(d,S,{disableWarning:!1}),this};var ac=v.__private__.getFont=v.getFont=function(){return vt[wt.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var d,S,B={};for(d in Ct)if(Ct.hasOwnProperty(d))for(S in B[d]=[],Ct[d])Ct[d].hasOwnProperty(S)&&B[d].push(S);return B},v.addFont=function(d,S,B,K,oe){var we=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&we.indexOf(arguments[3])!==-1?oe=arguments[3]:arguments[3]&&we.indexOf(arguments[3])==-1&&(B=re(B,K)),oe=oe||"Identity-H",ds.call(this,d,S,B,oe)};var ps,Ba=n.lineWidth||.200025,Ws=v.__private__.getLineWidth=v.getLineWidth=function(){return Ba},Bo=v.__private__.setLineWidth=v.setLineWidth=function(d){return Ba=d,$(G(E(d))+" w"),this};v.__private__.setLineDash=at.API.setLineDash=at.API.setLineDashPattern=function(d,S){if(d=d||[],S=S||0,isNaN(S)||!Array.isArray(d))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return d=d.map(function(B){return G(E(B))}).join(" "),S=G(E(S)),$("["+d+"] "+S+" d"),this};var Uo=v.__private__.getLineHeight=v.getLineHeight=function(){return Re*ps};v.__private__.getLineHeight=v.getLineHeight=function(){return Re*ps};var $o=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(d){return typeof(d=d||1.15)=="number"&&(ps=d),this},qo=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return ps};$o(n.lineHeight);var Jn=v.__private__.getHorizontalCoordinate=function(d){return E(d)},fi=v.__private__.getVerticalCoordinate=function(d){return F===I.ADVANCED?d:ct[D].mediaBox.topRightY-ct[D].mediaBox.bottomLeftY-E(d)},oc=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(d){return G(Jn(d))},Ni=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(d){return G(fi(d))},On=n.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return Jr(On)},v.__private__.setStrokeColor=v.setDrawColor=function(d,S,B,K){return On=Yr({ch1:d,ch2:S,ch3:B,ch4:K,pdfColorType:"draw",precision:2}),$(On),this};var Ua=n.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return Jr(Ua)},v.__private__.setFillColor=v.setFillColor=function(d,S,B,K){return Ua=Yr({ch1:d,ch2:S,ch3:B,ch4:K,pdfColorType:"fill",precision:2}),$(Ua),this};var gs=n.textColor||"0 g",lc=v.__private__.getTextColor=v.getTextColor=function(){return Jr(gs)};v.__private__.setTextColor=v.setTextColor=function(d,S,B,K){return gs=Yr({ch1:d,ch2:S,ch3:B,ch4:K,pdfColorType:"text",precision:3}),this};var Vs=n.charSpace,cc=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Vs||0)};v.__private__.setCharSpace=v.setCharSpace=function(d){if(isNaN(d))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Vs=d,this};var $a=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(d){var S=v.CapJoinStyles[d];if(S===void 0)throw new Error("Line cap style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $a=S,$(S+" J"),this};var qa=0;v.__private__.setLineJoin=v.setLineJoin=function(d){var S=v.CapJoinStyles[d];if(S===void 0)throw new Error("Line join style of '"+d+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qa=S,$(S+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(d){if(d=d||0,isNaN(d))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(G(E(d))+" M"),this},v.GState=Ul,v.setGState=function(d){(d=typeof d=="string"?Ht[kr[d]]:zo(null,d)).equals(on)||($("/"+d.id+" gs"),on=d)};var zo=function(d,S){if(!d||!kr[d]){var B=!1;for(var K in Ht)if(Ht.hasOwnProperty(K)&&Ht[K].equals(S)){B=!0;break}if(B)S=Ht[K];else{var oe="GS"+(Object.keys(Ht).length+1).toString(10);Ht[oe]=S,S.id=oe}return d&&(kr[d]=S.id),At.publish("addGState",S),S}};v.addGState=function(d,S){return zo(d,S),this},v.saveGraphicsState=function(){return $("q"),Hr.push({key:et,size:Re,color:gs}),this},v.restoreGraphicsState=function(){$("Q");var d=Hr.pop();return et=d.key,Re=d.size,gs=d.color,on=null,this},v.setCurrentTransformationMatrix=function(d){return $(d.toString()+" cm"),this},v.comment=function(d){return $("#"+d),this};var Hs=function(d,S){var B=d||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return B},set:function(we){isNaN(we)||(B=parseFloat(we))}});var K=S||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return K},set:function(we){isNaN(we)||(K=parseFloat(we))}});var oe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return oe},set:function(we){oe=we.toString()}}),this},za=function(d,S,B,K){Hs.call(this,d,S),this.type="rect";var oe=B||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return oe},set:function(Ce){isNaN(Ce)||(oe=parseFloat(Ce))}});var we=K||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return we},set:function(Ce){isNaN(Ce)||(we=parseFloat(Ce))}}),this},Wa=function(){this.page=$t,this.currentPage=D,this.pages=Le.slice(0),this.pagesContext=ct.slice(0),this.x=Zt,this.y=mt,this.matrix=hr,this.width=ms(D),this.height=Ei(D),this.outputDestination=Ee,this.id="",this.objectNumber=-1};Wa.prototype.restore=function(){$t=this.page,D=this.currentPage,ct=this.pagesContext,Le=this.pages,Zt=this.x,mt=this.y,hr=this.matrix,Va(D,this.width),Ha(D,this.height),Ee=this.outputDestination};var Wo=function(d,S,B,K,oe){cn.push(new Wa),$t=D=0,Le=[],Zt=d,mt=S,hr=oe,rt([B,K])},uc=function(d){if(ln[d])cn.pop().restore();else{var S=new Wa,B="Xo"+(Object.keys(dr).length+1).toString(10);S.id=B,ln[d]=B,dr[B]=S,At.publish("addFormObject",S),cn.pop().restore()}};for(var Gs in v.beginFormObject=function(d,S,B,K,oe){return Wo(d,S,B,K,oe),this},v.endFormObject=function(d){return uc(d),this},v.doFormObject=function(d,S){var B=dr[ln[d]];return $("q"),$(S.toString()+" cm"),$("/"+B.id+" Do"),$("Q"),this},v.getFormObject=function(d){var S=dr[ln[d]];return{x:S.x,y:S.y,width:S.width,height:S.height,matrix:S.matrix}},v.save=function(d,S){return d=d||"generated.pdf",(S=S||{}).returnPromise=S.returnPromise||!1,S.returnPromise===!1?(ks($s(di()),d),typeof ks.unload=="function"&&ot.setTimeout&&setTimeout(ks.unload,911),this):new Promise(function(B,K){try{var oe=ks($s(di()),d);typeof ks.unload=="function"&&ot.setTimeout&&setTimeout(ks.unload,911),B(oe)}catch(we){K(we.message)}})},at.API)at.API.hasOwnProperty(Gs)&&(Gs==="events"&&at.API.events.length?function(d,S){var B,K,oe;for(oe=S.length-1;oe!==-1;oe--)B=S[oe][0],K=S[oe][1],d.subscribe.apply(d,[B].concat(typeof K=="function"?[K]:K))}(At,at.API.events):v[Gs]=at.API[Gs]);var ms=v.getPageWidth=function(d){return(ct[d=d||D].mediaBox.topRightX-ct[d].mediaBox.bottomLeftX)/Ie},Va=v.setPageWidth=function(d,S){ct[d].mediaBox.topRightX=S*Ie+ct[d].mediaBox.bottomLeftX},Ei=v.getPageHeight=function(d){return(ct[d=d||D].mediaBox.topRightY-ct[d].mediaBox.bottomLeftY)/Ie},Ha=v.setPageHeight=function(d,S){ct[d].mediaBox.topRightY=S*Ie+ct[d].mediaBox.bottomLeftY};return v.internal={pdfEscape:Ke,getStyle:Do,getFont:ac,getFontSize:Fe,getCharSpace:cc,getTextColor:lc,getLineHeight:Uo,getLineHeightFactor:qo,getLineWidth:Ws,write:it,getHorizontalCoordinate:Jn,getVerticalCoordinate:fi,getCoordinateString:oc,getVerticalCoordinateString:Ni,collections:{},newObject:Xt,newAdditionalObject:ci,newObjectDeferred:Kt,newObjectDeferredBegin:Er,getFilters:hn,putStream:$r,events:At,scaleFactor:Ie,pageSize:{getWidth:function(){return ms(D)},setWidth:function(d){Va(D,d)},getHeight:function(){return Ei(D)},setHeight:function(d){Ha(D,d)}},encryptionOptions:g,encryption:Tr,getEncryptor:ec,output:qs,getNumberOfPages:qt,pages:Le,out:$,f2:W,f3:j,getPageInfo:Fo,getPageInfoByObjId:ut,getCurrentPageInfo:tc,getPDFVersion:x,Point:Hs,Rectangle:za,Matrix:nt,hasHotfix:Oo},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return ms(D)},set:function(d){Va(D,d)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return Ei(D)},set:function(d){Ha(D,d)},enumerable:!0,configurable:!0}),Us.call(v,ke),et="F1",Cr(i,t),At.publish("initialized"),v}ya.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},ya.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ya.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},ya.prototype.processOwnerPassword=function(n,e){return Su(_u(e).substr(0,5),n)},ya.prototype.encryptor=function(n,e){var t=_u(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Su(t,r)}},Ul.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Dt(n)!==Dt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},at.API={events:[]},at.version="3.0.1";var rr=at.API,Ch=1,Os=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pa=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},dt=function(n){return n.toFixed(2)},Hi=function(n){return n.toFixed(5)};rr.__acroform__={};var an=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},rf=function(n){return n*Ch},ti=function(n){var e=new e1,t=Ge.internal.getHeight(n)||0,r=Ge.internal.getWidth(n)||0;return e.BBox=[0,0,Number(dt(r)),Number(dt(t))],e},ly=rr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},cy=rr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},uy=rr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},or=rr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return uy(n,e-1)},lr=rr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ly(n,e-1)},cr=rr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cy(n,e-1)},hy=rr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],a=n[2],u=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(s+u)||0,c.upperRight_X=t(i+a)||0,c.upperRight_Y=r(s)||0,[Number(dt(c.lowerLeft_X)),Number(dt(c.lowerLeft_Y)),Number(dt(c.upperRight_X)),Number(dt(c.upperRight_Y))]},dy=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=ju(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+dt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ti(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},ju=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(j){return j.split(`
`)}):i.map(function(j){return[j]});var s=t,a=Ge.internal.getHeight(n)||0;a=a<0?-a:a;var u=Ge.internal.getWidth(n)||0;u=u<0?-u:u;var c=function(j,E,V){if(j+1<i.length){var U=E+" "+i[j+1][0];return Sl(U,n,V).width<=u-4}return!1};s++;e:for(;s>0;){e="",s--;var f,g,m=Sl("3",n,s).height,y=n.multiline?a-s:(a-m)/2,v=y+=2,A=0,x=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Sl(e,n,s=12).width+", FieldWidth:"+u+`
`;break}for(var w="",I=0,F=0;F<i.length;F++)if(i.hasOwnProperty(F)){var Z=!1;if(i[F].length!==1&&k!==i[F].length-1){if((m+2)*(I+2)+2>a)continue e;w+=i[F][k],Z=!0,x=F,F--}else{w=(w+=i[F][k]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var ae=parseInt(F),re=c(ae,w,s),G=F>=i.length-1;if(re&&!G){w+=" ",k=0;continue}if(re||G){if(G)x=ae;else if(n.multiline&&(m+2)*(I+2)+2>a)continue e}else{if(!n.multiline||(m+2)*(I+2)+2>a)continue e;x=ae}}for(var M="",z=A;z<=x;z++){var W=i[z];if(n.multiline){if(z===x){M+=W[k]+" ",k=(k+1)%W.length;continue}if(z===A){M+=W[W.length-1]+" ";continue}}M+=W[0]+" "}switch(M=M.substr(M.length-1)==" "?M.substr(0,M.length-1):M,g=Sl(M,n,s).width,n.textAlign){case"right":f=u-g-2;break;case"center":f=(u-g)/2;break;case"left":default:f=2}e+=dt(f)+" "+dt(v)+` Td
`,e+="("+Os(M)+`) Tj
`,e+=-dt(f)+` 0 Td
`,v=-(s+2),g=0,A=Z?x:x+1,I++,w=""}break}return r.text=e,r.fontSize=s,r},Sl=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},fy={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},py=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},gy=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Dt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},my=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Wn.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(fy)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Ch=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new t1,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&py(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var u=r[a],c=[],f=u.Rect;if(u.Rect&&(u.Rect=hy(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=Ge.createDefaultAppearanceStream(u),Dt(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(c=u.getKeyValueListForStream()),u.Rect=f,u.hasAppearanceStream&&!u.appearanceStreamContent){var g=dy(u);c.push({key:"AP",value:"<</N "+g+">>"}),i.internal.acroformPlugin.xForms.push(g)}if(u.appearanceStreamContent){var m="";for(var y in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(y)){var v=u.appearanceStreamContent[y];if(m+="/"+y+" ",m+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var a in v)if(v.hasOwnProperty(a)){var A=v[a];typeof A=="function"&&(A=A.call(i,u)),m+="/"+a+" "+A+" ",i.internal.acroformPlugin.xForms.indexOf(A)>=0||i.internal.acroformPlugin.xForms.push(A)}}else typeof(A=v)=="function"&&(A=A.call(i,u)),m+="/"+a+" "+A,i.internal.acroformPlugin.xForms.indexOf(A)>=0||i.internal.acroformPlugin.xForms.push(A);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:u.objId}),i.internal.out("endobj")}s&&gy(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},Qp=rr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),Dt(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Os(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Gc=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Os(r(n))+")"},ii=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ii.prototype.toString=function(){return this.objId+" 0 R"},ii.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ii.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:Qp(i,this.objId,this.scope)}):i instanceof ii?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var e1=function(){ii.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};an(e1,ii);var t1=function(){ii.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Os(t(n))+")"}},set:function(t){n=t}})};an(t1,ii);var Wn=function n(){ii.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!or(e,3)},set:function(w){w?this.F=lr(e,3):this.F=cr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');t=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof $l)return;s="FieldObject"+n.FieldNum++}var w=function(I){return I};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Os(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Ch:f},set:function(w){f=w}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(w){g=w}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof $l||this instanceof Is))return Gc(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=w}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Ar?y:Gc(y,this.objId,this.scope)},set:function(w){w=w.toString(),y=this instanceof Ar?w:w.substr(0,1)==="("?pa(w.substr(1,w.length-2)):pa(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ar?pa(y.substr(1,y.length-1)):y},set:function(w){w=w.toString(),y=this instanceof Ar?"/"+w:w}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Ar?v:Gc(v,this.objId,this.scope)},set:function(w){w=w.toString(),v=this instanceof Ar?w:w.substr(0,1)==="("?pa(w.substr(1,w.length-2)):pa(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ar?pa(v.substr(1,v.length-1)):v},set:function(w){w=w.toString(),v=this instanceof Ar?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(w){w=!!w,x=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(w){A=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,1)},set:function(w){w?this.Ff=lr(this.Ff,1):this.Ff=cr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,2)},set:function(w){w?this.Ff=lr(this.Ff,2):this.Ff=cr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,3)},set:function(w){w?this.Ff=lr(this.Ff,3):this.Ff=cr(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');k=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(k){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};an(Wn,ii);var Sa=function(){Wn.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Qp(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,a,u){u||(u=1);for(var c,f=[];c=a.exec(s);)f.push(c[u]);return f}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,18)},set:function(t){t?this.Ff=lr(this.Ff,18):this.Ff=cr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=lr(this.Ff,19):this.Ff=cr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,20)},set:function(t){t?(this.Ff=lr(this.Ff,20),e.sort()):this.Ff=cr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,22)},set:function(t){t?this.Ff=lr(this.Ff,22):this.Ff=cr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,23)},set:function(t){t?this.Ff=lr(this.Ff,23):this.Ff=cr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,27)},set:function(t){t?this.Ff=lr(this.Ff,27):this.Ff=cr(this.Ff,27)}}),this.hasAppearanceStream=!1};an(Sa,Wn);var ja=function(){Sa.call(this),this.fontName="helvetica",this.combo=!1};an(ja,Sa);var Aa=function(){ja.call(this),this.combo=!0};an(Aa,ja);var Il=function(){Aa.call(this),this.edit=!0};an(Il,Aa);var Ar=function(){Wn.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,15)},set:function(t){t?this.Ff=lr(this.Ff,15):this.Ff=cr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,16)},set:function(t){t?this.Ff=lr(this.Ff,16):this.Ff=cr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,17)},set:function(t){t?this.Ff=lr(this.Ff,17):this.Ff=cr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,26)},set:function(t){t?this.Ff=lr(this.Ff,26):this.Ff=cr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Os(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Dt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};an(Ar,Wn);var Nl=function(){Ar.call(this),this.pushButton=!0};an(Nl,Ar);var ka=function(){Ar.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};an(ka,Ar);var $l=function(){var n,e;Wn.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Os(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Dt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ge.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};an($l,Wn),ka.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},ka.prototype.createOption=function(n){var e=new $l;return e.Parent=this,e.optionName=n,this.Kids.push(e),vy.call(this.scope,e),e};var El=function(){Ar.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ge.CheckBox.createAppearanceStream()};an(El,Ar);var Is=function(){Wn.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,13)},set:function(e){e?this.Ff=lr(this.Ff,13):this.Ff=cr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,21)},set:function(e){e?this.Ff=lr(this.Ff,21):this.Ff=cr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,23)},set:function(e){e?this.Ff=lr(this.Ff,23):this.Ff=cr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,24)},set:function(e){e?this.Ff=lr(this.Ff,24):this.Ff=cr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,25)},set:function(e){e?this.Ff=lr(this.Ff,25):this.Ff=cr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,26)},set:function(e){e?this.Ff=lr(this.Ff,26):this.Ff=cr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};an(Is,Wn);var Tl=function(){Is.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!or(this.Ff,14)},set:function(n){n?this.Ff=lr(this.Ff,14):this.Ff=cr(this.Ff,14)}}),this.password=!0};an(Tl,Is);var Ge={CheckBox:{createAppearanceStream:function(){return{N:{On:Ge.CheckBox.YesNormal},D:{On:Ge.CheckBox.YesPushDown,Off:Ge.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=ti(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=ju(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+dt(Ge.internal.getWidth(n))+" "+dt(Ge.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+dt(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=ti(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Ge.internal.getHeight(n),a=Ge.internal.getWidth(n),u=ju(n,n.caption);return i.push("1 g"),i.push("0 0 "+dt(a)+" "+dt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+dt(a-1)+" "+dt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+dt(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=ti(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+dt(Ge.internal.getWidth(n))+" "+dt(Ge.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ge.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ge.RadioButton.Circle.YesNormal,e.D[n]=Ge.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=ti(n);e.scope=n.scope;var t=[],r=Ge.internal.getWidth(n)<=Ge.internal.getHeight(n)?Ge.internal.getWidth(n)/4:Ge.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Ge.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Hi(Ge.internal.getWidth(n)/2)+" "+Hi(Ge.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ti(n);e.scope=n.scope;var t=[],r=Ge.internal.getWidth(n)<=Ge.internal.getHeight(n)?Ge.internal.getWidth(n)/4:Ge.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ge.internal.Bezier_C).toFixed(5)),a=Number((r*Ge.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hi(Ge.internal.getWidth(n)/2)+" "+Hi(Ge.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Hi(Ge.internal.getWidth(n)/2)+" "+Hi(Ge.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=ti(n);e.scope=n.scope;var t=[],r=Ge.internal.getWidth(n)<=Ge.internal.getHeight(n)?Ge.internal.getWidth(n)/4:Ge.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ge.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hi(Ge.internal.getWidth(n)/2)+" "+Hi(Ge.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ge.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ge.RadioButton.Cross.YesNormal,e.D[n]=Ge.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=ti(n);e.scope=n.scope;var t=[],r=Ge.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+dt(Ge.internal.getWidth(n)-2)+" "+dt(Ge.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(dt(r.x1.x)+" "+dt(r.x1.y)+" m"),t.push(dt(r.x2.x)+" "+dt(r.x2.y)+" l"),t.push(dt(r.x4.x)+" "+dt(r.x4.y)+" m"),t.push(dt(r.x3.x)+" "+dt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ti(n);e.scope=n.scope;var t=Ge.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+dt(Ge.internal.getWidth(n))+" "+dt(Ge.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+dt(Ge.internal.getWidth(n)-2)+" "+dt(Ge.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(dt(t.x1.x)+" "+dt(t.x1.y)+" m"),r.push(dt(t.x2.x)+" "+dt(t.x2.y)+" l"),r.push(dt(t.x4.x)+" "+dt(t.x4.y)+" m"),r.push(dt(t.x3.x)+" "+dt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=ti(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+dt(Ge.internal.getWidth(n))+" "+dt(Ge.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ge.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ge.internal.getWidth(n),t=Ge.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ge.internal.getWidth=function(n){var e=0;return Dt(n)==="object"&&(e=rf(n.Rect[2])),e},Ge.internal.getHeight=function(n){var e=0;return Dt(n)==="object"&&(e=rf(n.Rect[3])),e};var vy=rr.addField=function(n){if(my(this,n),!(n instanceof Wn))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};rr.AcroFormChoiceField=Sa,rr.AcroFormListBox=ja,rr.AcroFormComboBox=Aa,rr.AcroFormEditBox=Il,rr.AcroFormButton=Ar,rr.AcroFormPushButton=Nl,rr.AcroFormRadioButton=ka,rr.AcroFormCheckBox=El,rr.AcroFormTextField=Is,rr.AcroFormPasswordField=Tl,rr.AcroFormAppearance=Ge,rr.AcroForm={ChoiceField:Sa,ListBox:ja,ComboBox:Aa,EditBox:Il,Button:Ar,PushButton:Nl,RadioButton:ka,CheckBox:El,TextField:Is,PasswordField:Tl,Appearance:Ge},at.AcroForm={ChoiceField:Sa,ListBox:ja,ComboBox:Aa,EditBox:Il,Button:Ar,PushButton:Nl,RadioButton:ka,CheckBox:El,TextField:Is,PasswordField:Tl,Appearance:Ge};at.AcroForm;function r1(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(j,E){var V,U,X,ie,le,Q=e;if((E=E||e)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(re(j))for(le in t)for(X=t[le],V=0;V<X.length;V+=1){for(ie=!0,U=0;U<X[V].length;U+=1)if(X[V][U]!==void 0&&X[V][U]!==j[U]){ie=!1;break}if(ie===!0){Q=le;break}}else for(le in t)for(X=t[le],V=0;V<X.length;V+=1){for(ie=!0,U=0;U<X[V].length;U+=1)if(X[V][U]!==void 0&&X[V][U]!==j.charCodeAt(U)){ie=!1;break}if(ie===!0){Q=le;break}}return Q===e&&E!==e&&(Q=E),Q},i=function j(E){for(var V=this.internal.write,U=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var ie=[];if(ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Image"}),ie.push({key:"Width",value:E.width}),ie.push({key:"Height",value:E.height}),E.colorSpace===k.INDEXED?ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(ie.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===k.DEVICE_CMYK&&ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ie.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&ie.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var le="",Q=0,ce=E.transparency.length;Q<ce;Q++)le+=E.transparency[Q]+" "+E.transparency[Q]+" ";ie.push({key:"Mask",value:"["+le+"]"})}E.sMask!==void 0&&ie.push({key:"SMask",value:E.objectId+1+" 0 R"});var ve=E.filter!==void 0?["/"+E.filter]:void 0;if(U({data:E.data,additionalKeyValues:ie,alreadyAppliedFilters:ve,objectId:E.objectId}),V("endobj"),"sMask"in E&&E.sMask!==void 0){var Oe="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,P={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:Oe,data:E.sMask};"filter"in E&&(P.filter=E.filter),j.call(this,P)}if(E.colorSpace===k.INDEXED){var D=this.internal.newObject();U({data:M(new Uint8Array(E.palette)),objectId:D}),V("endobj")}},s=function(){var j=this.internal.collections.addImage_images;for(var E in j)i.call(this,j[E])},a=function(){var j,E=this.internal.collections.addImage_images,V=this.internal.write;for(var U in E)V("/I"+(j=E[U]).index,j.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var j=this.internal.collections.addImage_images;return u.call(this),j},f=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(j){return typeof n["process"+j.toUpperCase()]=="function"},m=function(j){return Dt(j)==="object"&&j.nodeType===1},y=function(j,E){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var V=""+j.getAttribute("src");if(V.indexOf("data:image/")===0)return So(unescape(V).split("base64,").pop());var U=n.loadFile(V,!0);if(U!==void 0)return U}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var X;switch(E){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;case"JPEG":case"JPG":default:X="image/jpeg"}return So(j.toDataURL(X,1).split("base64,").pop())}},v=function(j){var E=this.internal.collections.addImage_images;if(E){for(var V in E)if(j===E[V].alias)return E[V]}},A=function(j,E,V){return j||E||(j=-96,E=-96),j<0&&(j=-1*V.width*72/j/this.internal.scaleFactor),E<0&&(E=-1*V.height*72/E/this.internal.scaleFactor),j===0&&(j=E*V.width/V.height),E===0&&(E=j*V.height/V.width),[j,E]},x=function(j,E,V,U,X,ie){var le=A.call(this,V,U,X),Q=this.internal.getCoordinateString,ce=this.internal.getVerticalCoordinateString,ve=c.call(this);if(V=le[0],U=le[1],ve[X.index]=X,ie){ie*=Math.PI/180;var Oe=Math.cos(ie),P=Math.sin(ie),D=function(H){return H.toFixed(4)},q=[D(Oe),D(P),D(-1*P),D(Oe),0,0,"cm"]}this.internal.write("q"),ie?(this.internal.write([1,"0","0",1,Q(j),ce(E+U),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([Q(V),"0","0",Q(U),"0","0","cm"].join(" "))):this.internal.write([Q(V),"0","0",Q(U),Q(j),ce(E+U),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},k=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=n.__addimage__.sHashCode=function(j){var E,V,U=0;if(typeof j=="string")for(V=j.length,E=0;E<V;E++)U=(U<<5)-U+j.charCodeAt(E),U|=0;else if(re(j))for(V=j.byteLength/2,E=0;E<V;E++)U=(U<<5)-U+j[E],U|=0;return U},F=n.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var E=!0;return j.length===0&&(E=!1),j.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(E=!1),E},Z=n.__addimage__.extractImageFromDataUrl=function(j){if(j==null||!(j=j.trim()).startsWith("data:"))return null;var E=j.indexOf(",");return E<0?null:j.substring(0,E).trim().endsWith("base64")?j.substring(E+1):null},ae=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(j){return ae()&&j instanceof ArrayBuffer};var re=n.__addimage__.isArrayBufferView=function(j){return ae()&&typeof Uint32Array<"u"&&(j instanceof Int8Array||j instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array)},G=n.__addimage__.binaryStringToUint8Array=function(j){for(var E=j.length,V=new Uint8Array(E),U=0;U<E;U++)V[U]=j.charCodeAt(U);return V},M=n.__addimage__.arrayBufferToBinaryString=function(j){for(var E="",V=re(j)?j:new Uint8Array(j),U=0;U<V.length;U+=8192)E+=String.fromCharCode.apply(null,V.subarray(U,U+8192));return E};n.addImage=function(){var j,E,V,U,X,ie,le,Q,ce;if(typeof arguments[1]=="number"?(E=e,V=arguments[1],U=arguments[2],X=arguments[3],ie=arguments[4],le=arguments[5],Q=arguments[6],ce=arguments[7]):(E=arguments[1],V=arguments[2],U=arguments[3],X=arguments[4],ie=arguments[5],le=arguments[6],Q=arguments[7],ce=arguments[8]),Dt(j=arguments[0])==="object"&&!m(j)&&"imageData"in j){var ve=j;j=ve.imageData,E=ve.format||E||e,V=ve.x||V||0,U=ve.y||U||0,X=ve.w||ve.width||X,ie=ve.h||ve.height||ie,le=ve.alias||le,Q=ve.compression||Q,ce=ve.rotation||ve.angle||ce}var Oe=this.internal.getFilters();if(Q===void 0&&Oe.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(V)||isNaN(U))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var P=z.call(this,j,E,le,Q);return x.call(this,V,U,X,ie,P,ce),this};var z=function(j,E,V,U){var X,ie,le;if(typeof j=="string"&&r(j)===e){j=unescape(j);var Q=W(j,!1);(Q!==""||(Q=n.loadFile(j,!0))!==void 0)&&(j=Q)}if(m(j)&&(j=y(j,E)),E=r(j,E),!g(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((le=V)==null||le.length===0)&&(V=function(ce){return typeof ce=="string"||re(ce)?I(ce):re(ce.data)?I(ce.data):null}(j)),(X=v.call(this,V))||(ae()&&(j instanceof Uint8Array||E==="RGBA"||(ie=j,j=G(j))),X=this["process"+E.toUpperCase()](j,f.call(this),V,function(ce){return ce&&typeof ce=="string"&&(ce=ce.toUpperCase()),ce in n.image_compression?ce:w.NONE}(U),ie)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},W=n.__addimage__.convertBase64ToBinaryString=function(j,E){E=typeof E!="boolean"||E;var V,U="";if(typeof j=="string"){var X;V=(X=Z(j))!==null&&X!==void 0?X:j;try{U=So(V)}catch(ie){if(E)throw F(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};n.getImageProperties=function(j){var E,V,U="";if(m(j)&&(j=y(j)),typeof j=="string"&&r(j)===e&&((U=W(j,!1))===""&&(U=n.loadFile(j)||""),j=U),V=r(j),!g(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!ae()||j instanceof Uint8Array||(j=G(j)),!(E=this["process"+V.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=V,E}})(at.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};at.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,a=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),f=t.pageContext.annotations,g=!1,m=0;m<f.length&&!g;m++)switch((r=f[m]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var y=0;y<f.length;y++){r=f[y];var v=this.internal.pdfEscape,A=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(x.objId),I=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+v(w(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+v(w(I))+") >>",x.content=s;var F=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+F,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(x.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+u(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var Z=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(A(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var ae=this.annotations._nameMap[r.options.name];r.options.pageNumber=ae.page,r.options.top=ae.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(A(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var re=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+re+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,a){var u=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:c(t),y:f(r),w:c(t+i),h:f(r+s)},options:a,type:"link"})},n.textWithLink=function(t,r,i,s){var a,u,c=this.getTextWidth(t),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var g=this.splitTextToSize(t,u).length;a=Math.ceil(f*g)}else u=c,a=f;return this.text(t,r,i,s),i+=.2*f,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-f,u,a,s),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(at.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},u=n.__arabicParser__.isArabicEndLetter=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(x){return a(x)&&i.indexOf(x.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var f=n.__arabicParser__.arabicLetterHasFinalForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var g=n.__arabicParser__.arabicLetterHasMedialForm=function(x){return a(x)&&s(x)&&e[x.charCodeAt(0)].length==4},m=n.__arabicParser__.resolveLigatures=function(x){var k=0,w=t,I="",F=0;for(k=0;k<x.length;k+=1)w[x.charCodeAt(k)]!==void 0?(F++,typeof(w=w[x.charCodeAt(k)])=="number"&&(I+=String.fromCharCode(w),w=t,F=0),k===x.length-1&&(w=t,I+=x.charAt(k-(F-1)),k-=F-1,F=0)):(w=t,I+=x.charAt(k-F),k-=F,F=0);return I};n.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var y=n.__arabicParser__.getCorrectForm=function(x,k,w){return a(x)?s(x)===!1?-1:!f(x)||!a(k)&&!a(w)||!a(w)&&u(k)||u(x)&&!a(k)||u(x)&&c(k)||u(x)&&u(k)?0:g(x)&&a(k)&&!u(k)&&a(w)&&f(w)?3:u(x)||!a(w)?1:2:-1},v=function(x){var k=0,w=0,I=0,F="",Z="",ae="",re=(x=x||"").split("\\s+"),G=[];for(k=0;k<re.length;k+=1){for(G.push(""),w=0;w<re[k].length;w+=1)F=re[k][w],Z=re[k][w-1],ae=re[k][w+1],a(F)?(I=y(F,Z,ae),G[k]+=I!==-1?String.fromCharCode(e[F.charCodeAt(0)][I]):F):G[k]+=F;G[k]=m(G[k])}return G.join(" ")},A=n.__arabicParser__.processArabic=n.processArabic=function(){var x,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(k)){var I=0;for(w=[],I=0;I<k.length;I+=1)Array.isArray(k[I])?w.push([v(k[I][0]),k[I][1],k[I][2]]):w.push([v(k[I])]);x=w}else x=v(k);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};n.events.push(["preProcessText",A])}(at.API),at.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(u){a=u}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(at.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(x){g=x}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(x){m=x}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(x){y=x}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(x){v=x}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(x){A=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,f){r.call(this);var g=(f=f||{}).fontSize||this.getFontSize(),m=f.font||this.getFont(),y=f.scaleFactor||this.internal.scaleFactor,v=0,A=0,x=0,k=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var w=f.maxWidth;w>0?typeof c=="string"?c=this.splitTextToSize(c,w):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(F,Z){return F.concat(k.splitTextToSize(Z,w))},[])):c=Array.isArray(c)?c:[c];for(var I=0;I<c.length;I++)v<(x=this.getStringUnitWidth(c[I],{font:m})*g)&&(v=x);return v!==0&&(A=c.length),{w:v/=y,h:Math.max((A*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/y,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var f=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===c.lineNumber?(c.x=(f.x||0)+(f.width||0),c.y=f.y||0):f.y+f.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,v&&y&&(this.printHeaderRow(c.lineNumber,!0),c.y+=y[0].height)):c.y=f.y+f.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-g,c.y+g,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+g,{align:"center",baseline:"top",maxWidth:c.width-g-g}):this.text(c.text,c.x+g,c.y+g,{align:"left",baseline:"top",maxWidth:c.width-g-g})),this.internal.__cell__.lastCell=c,this};n.table=function(c,f,g,m,y){if(r.call(this),!g)throw new Error("No data for PDF table.");var v,A,x,k,w=[],I=[],F=[],Z={},ae={},re=[],G=[],M=(y=y||{}).autoSize||!1,z=y.printHeaders!==!1,W=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,j=y.margins||Object.assign({width:this.getPageWidth()},e),E=typeof y.padding=="number"?y.padding:3,V=y.headerBackgroundColor||"#c8c8c8",U=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=W,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=U,this.setFontSize(W),m==null)I=w=Object.keys(g[0]),F=w.map(function(){return"left"});else if(Array.isArray(m)&&Dt(m[0])==="object")for(w=m.map(function(ve){return ve.name}),I=m.map(function(ve){return ve.prompt||ve.name||""}),F=m.map(function(ve){return ve.align||"left"}),v=0;v<m.length;v+=1)ae[m[v].name]=m[v].width*(19.049976/25.4);else Array.isArray(m)&&typeof m[0]=="string"&&(I=w=m,F=w.map(function(){return"left"}));if(M||Array.isArray(m)&&typeof m[0]=="string")for(v=0;v<w.length;v+=1){for(Z[k=w[v]]=g.map(function(ve){return ve[k]}),this.setFont(void 0,"bold"),re.push(this.getTextDimensions(I[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=Z[k],this.setFont(void 0,"normal"),x=0;x<A.length;x+=1)re.push(this.getTextDimensions(A[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ae[k]=Math.max.apply(null,re)+E+E,re=[]}if(z){var X={};for(v=0;v<w.length;v+=1)X[w[v]]={},X[w[v]].text=I[v],X[w[v]].align=F[v];var ie=u.call(this,X,ae);G=w.map(function(ve){return new s(c,f,ae[ve],ie,X[ve].text,void 0,X[ve].align)}),this.setTableHeaderRow(G),this.printHeaderRow(1,!1)}var le=m.reduce(function(ve,Oe){return ve[Oe.name]=Oe.align,ve},{});for(v=0;v<g.length;v+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:v,data:g[v]},this);var Q=u.call(this,g[v],ae);for(x=0;x<w.length;x+=1){var ce=g[v][w[x]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:v,col:x,data:ce},this),a.call(this,new s(c,f,ae[w[x]],Q,ce,v+2,le[w[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=f,this};var u=function(c,f){var g=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(c).map(function(v){var A=c[v];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,f[v]-g-g)},this).map(function(v){return this.getLineHeightFactor()*v.length*m/y+g+g},this).reduce(function(v,A){return Math.max(v,A)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,f){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){g=this.internal.__cell__.tableHeaderRow[v].clone(),f&&(g.y=this.internal.__cell__.margins.top||0,y.push(g)),g.lineNumber=c;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,g),this.setTextColor(A)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),t=!1}}(at.API);var n1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},i1=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Au=r1(i1),s1=[100,200,300,400,500,600,700,800,900],by=r1(s1);function ku(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return n1[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof Au[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function nf(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var yy={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},sf={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function af(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function wy(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},yy,t.genericFontFamilies||{}),s=null,a=null,u=0;u<e.length;++u)if(i[(s=ku(e[u])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){a=n[s.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+af(s)+"' and default family '"+r+"'.");if(a=function(c,f){if(f[c])return f[c];var g=Au[c],m=g<=Au.normal?-1:1,y=nf(f,i1,g,m);if(!y)throw new Error("Could not find a matching font-stretch value for "+c);return y}(s.stretch,a),a=function(c,f){if(f[c])return f[c];for(var g=n1[c],m=0;m<g.length;++m)if(f[g[m]])return f[g[m]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,f){if(f[c])return f[c];if(c===400&&f[500])return f[500];if(c===500&&f[400])return f[400];var g=by[c],m=nf(f,s1,g,c<400?-1:1);if(!m)throw new Error("Could not find a matching font-weight for value "+c);return m}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+af(s)+"'.");return a}function of(n){return n.trimLeft()}function xy(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function _y(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var jl,lf,cf,Kc=["times"];(function(n){var e,t,r,i,s,a,u,c,f,g=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,u=this.internal.Rectangle,c=this.internal.Matrix,f=new g}]);var m=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=P;Object.defineProperty(this,"pdf",{get:function(){return D}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(ye){q=!!ye}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(ye){H=!!ye}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(ye){isNaN(ye)||(ne=ye)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(ye){isNaN(ye)||(fe=ye)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(ye){var $;typeof ye=="number"?$=[ye,ye,ye,ye]:(($=new Array(4))[0]=ye[0],$[1]=ye.length>=2?ye[1]:$[0],$[2]=ye.length>=3?ye[2]:$[0],$[3]=ye.length>=4?ye[3]:$[1]),f.margin=$}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(ye){me=ye}});var pe=0;Object.defineProperty(this,"lastBreak",{get:function(){return pe},set:function(ye){pe=ye}});var _e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return _e},set:function(ye){_e=ye}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(ye){ye instanceof g&&(f=ye)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(ye){f.path=ye}});var Le=[];Object.defineProperty(this,"ctxStack",{get:function(){return Le},set:function(ye){Le=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var $;$=y(ye),this.ctx.fillStyle=$.style,this.ctx.isFillTransparent=$.a===0,this.ctx.fillOpacity=$.a,this.pdf.setFillColor($.r,$.g,$.b,{a:$.a}),this.pdf.setTextColor($.r,$.g,$.b,{a:$.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var $=y(ye);this.ctx.strokeStyle=$.style,this.ctx.isStrokeTransparent=$.a===0,this.ctx.strokeOpacity=$.a,$.a===0?this.pdf.setDrawColor(255,255,255):($.a,this.pdf.setDrawColor($.r,$.g,$.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Te=null;function Ee(ye,$){if(Te===null){var it=function(ze){var ke=[];return Object.keys(ze).forEach(function(Re){ze[Re].forEach(function(Me){var Fe=null;switch(Me){case"bold":Fe={family:Re,weight:"bold"};break;case"italic":Fe={family:Re,style:"italic"};break;case"bolditalic":Fe={family:Re,weight:"bold",style:"italic"};break;case"":case"normal":Fe={family:Re}}Fe!==null&&(Fe.ref={name:Re,style:Me},ke.push(Fe))})}),ke}(ye.getFontList());Te=function(ze){for(var ke={},Re=0;Re<ze.length;++Re){var Me=ku(ze[Re]),Fe=Me.family,Je=Me.stretch,Pe=Me.style,Be=Me.weight;ke[Fe]=ke[Fe]||{},ke[Fe][Je]=ke[Fe][Je]||{},ke[Fe][Je][Pe]=ke[Fe][Je][Pe]||{},ke[Fe][Je][Pe][Be]=Me}return ke}(it.concat($))}return Te}var Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(ye){Te=null,Xe=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var $;if(this.ctx.font=ye,($=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var it=$[1];$[2];var ze=$[3],ke=$[4];$[5];var Re=$[6],Me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ke)[2];ke=Math.floor(Me==="px"?parseFloat(ke)*this.pdf.internal.scaleFactor:Me==="em"?parseFloat(ke)*this.pdf.getFontSize():parseFloat(ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ke);var Fe=function(Ve){var et,Ie,Zt=[],mt=Ve.trim();if(mt==="")return Kc;if(mt in sf)return[sf[mt]];for(;mt!=="";){switch(Ie=null,et=(mt=of(mt)).charAt(0)){case'"':case"'":Ie=xy(mt.substring(1),et);break;default:Ie=_y(mt)}if(Ie===null||(Zt.push(Ie[0]),(mt=of(Ie[1]))!==""&&mt.charAt(0)!==","))return Kc;mt=mt.replace(/^,/,"")}return Zt}(Re);if(this.fontFaces){var Je=wy(Ee(this.pdf,this.fontFaces),Fe.map(function(Ve){return{family:Ve,stretch:"normal",weight:ze,style:it}}));this.pdf.setFont(Je.ref.name,Je.ref.style)}else{var Pe="";(ze==="bold"||parseInt(ze,10)>=700||it==="bold")&&(Pe="bold"),it==="italic"&&(Pe+="italic"),Pe.length===0&&(Pe="normal");for(var Be="",Ne={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},We=0;We<Fe.length;We++){if(this.pdf.internal.getFont(Fe[We],Pe,{noFallback:!0,disableWarning:!0})!==void 0){Be=Fe[We];break}if(Pe==="bolditalic"&&this.pdf.internal.getFont(Fe[We],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Be=Fe[We],Pe="bold";else if(this.pdf.internal.getFont(Fe[We],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Be=Fe[We],Pe="normal";break}}if(Be===""){for(var Qe=0;Qe<Fe.length;Qe++)if(Ne[Fe[Qe]]){Be=Ne[Fe[Qe]];break}}Be=Be===""?"Times":Be,this.pdf.setFont(Be,Pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,Oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,Oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};m.prototype.setLineDash=function(P){this.lineDash=P},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){Z.call(this,"fill",!1)},m.prototype.stroke=function(){Z.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(P,D){if(isNaN(P)||isNaN(D))throw Ft.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new a(P,D));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new a(P,D)},m.prototype.closePath=function(){var P=new a(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&Dt(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){P=new a(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},m.prototype.lineTo=function(P,D){if(isNaN(P)||isNaN(D))throw Ft.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new a(P,D));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new a(q.x,q.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},m.prototype.quadraticCurveTo=function(P,D,q,H){if(isNaN(q)||isNaN(H)||isNaN(P)||isNaN(D))throw Ft.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new a(q,H)),fe=this.ctx.transform.applyToPoint(new a(P,D));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new a(ne.x,ne.y)},m.prototype.bezierCurveTo=function(P,D,q,H,ne,fe){if(isNaN(ne)||isNaN(fe)||isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H))throw Ft.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new a(ne,fe)),pe=this.ctx.transform.applyToPoint(new a(P,D)),_e=this.ctx.transform.applyToPoint(new a(q,H));this.path.push({type:"bct",x1:pe.x,y1:pe.y,x2:_e.x,y2:_e.y,x:me.x,y:me.y}),this.ctx.lastPoint=new a(me.x,me.y)},m.prototype.arc=function(P,D,q,H,ne,fe){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H)||isNaN(ne))throw Ft.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new a(P,D));P=me.x,D=me.y;var pe=this.ctx.transform.applyToPoint(new a(0,q)),_e=this.ctx.transform.applyToPoint(new a(0,0));q=Math.sqrt(Math.pow(pe.x-_e.x,2)+Math.pow(pe.y-_e.y,2))}Math.abs(ne-H)>=2*Math.PI&&(H=0,ne=2*Math.PI),this.path.push({type:"arc",x:P,y:D,radius:q,startAngle:H,endAngle:ne,counterclockwise:fe})},m.prototype.arcTo=function(P,D,q,H,ne){throw new Error("arcTo not implemented.")},m.prototype.rect=function(P,D,q,H){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H))throw Ft.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,D),this.lineTo(P+q,D),this.lineTo(P+q,D+H),this.lineTo(P,D+H),this.lineTo(P,D),this.lineTo(P+q,D),this.lineTo(P,D)},m.prototype.fillRect=function(P,D,q,H){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H))throw Ft.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,D,q,H),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},m.prototype.strokeRect=function(P,D,q,H){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H))throw Ft.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(P,D,q,H),this.stroke())},m.prototype.clearRect=function(P,D,q,H){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H))throw Ft.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,D,q,H))},m.prototype.save=function(P){P=typeof P!="boolean"||P;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},m.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(D),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(P){var D,q,H,ne;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))D=0,q=0,H=0,ne=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(fe!==null)D=parseInt(fe[1]),q=parseInt(fe[2]),H=parseInt(fe[3]),ne=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)D=parseInt(fe[1]),q=parseInt(fe[2]),H=parseInt(fe[3]),ne=parseFloat(fe[4]);else{if(ne=1,typeof P=="string"&&P.charAt(0)!=="#"){var me=new Yp(P);P=me.ok?me.toHex():"#000000"}P.length===4?(D=P.substring(1,2),D+=D,q=P.substring(2,3),q+=q,H=P.substring(3,4),H+=H):(D=P.substring(1,3),q=P.substring(3,5),H=P.substring(5,7)),D=parseInt(D,16),q=parseInt(q,16),H=parseInt(H,16)}}return{r:D,g:q,b:H,a:ne,style:P}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(P,D,q,H){if(isNaN(D)||isNaN(q)||typeof P!="string")throw Ft.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!v.call(this)){var ne=Q(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;E.call(this,{text:P,x:D,y:q,scale:fe,angle:ne,align:this.textAlign,maxWidth:H})}},m.prototype.strokeText=function(P,D,q,H){if(isNaN(D)||isNaN(q)||typeof P!="string")throw Ft.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){H=isNaN(H)?void 0:H;var ne=Q(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;E.call(this,{text:P,x:D,y:q,scale:fe,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:H})}},m.prototype.measureText=function(P){if(typeof P!="string")throw Ft.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,q=this.pdf.internal.scaleFactor,H=D.internal.getFontSize(),ne=D.getStringUnitWidth(P)*H/D.internal.scaleFactor,fe=function(me){var pe=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this};return new fe({width:ne*=Math.round(96*q/72*1e4)/1e4})},m.prototype.scale=function(P,D){if(isNaN(P)||isNaN(D))throw Ft.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new c(P,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.rotate=function(P){if(isNaN(P))throw Ft.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},m.prototype.translate=function(P,D){if(isNaN(P)||isNaN(D))throw Ft.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new c(1,0,0,1,P,D);this.ctx.transform=this.ctx.transform.multiply(q)},m.prototype.transform=function(P,D,q,H,ne,fe){if(isNaN(P)||isNaN(D)||isNaN(q)||isNaN(H)||isNaN(ne)||isNaN(fe))throw Ft.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(P,D,q,H,ne,fe);this.ctx.transform=this.ctx.transform.multiply(me)},m.prototype.setTransform=function(P,D,q,H,ne,fe){P=isNaN(P)?1:P,D=isNaN(D)?0:D,q=isNaN(q)?0:q,H=isNaN(H)?1:H,ne=isNaN(ne)?0:ne,fe=isNaN(fe)?0:fe,this.ctx.transform=new c(P,D,q,H,ne,fe)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(P,D,q,H,ne,fe,me,pe,_e){var Le=this.pdf.getImageProperties(P),Te=1,Ee=1,Xe=1,ye=1;H!==void 0&&pe!==void 0&&(Xe=pe/H,ye=_e/ne,Te=Le.width/H*pe/H,Ee=Le.height/ne*_e/ne),fe===void 0&&(fe=D,me=q,D=0,q=0),H!==void 0&&pe===void 0&&(pe=H,_e=ne),H===void 0&&pe===void 0&&(pe=Le.width,_e=Le.height);for(var $,it=this.ctx.transform.decompose(),ze=Q(it.rotate.shx),ke=new c,Re=(ke=(ke=(ke=ke.multiply(it.translate)).multiply(it.skew)).multiply(it.scale)).applyToRectangle(new u(fe-D*Xe,me-q*ye,H*Te,ne*Ee)),Me=k.call(this,Re),Fe=[],Je=0;Je<Me.length;Je+=1)Fe.indexOf(Me[Je])===-1&&Fe.push(Me[Je]);if(F(Fe),this.autoPaging)for(var Pe=Fe[0],Be=Fe[Fe.length-1],Ne=Pe;Ne<Be+1;Ne++){this.pdf.setPage(Ne);var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qe=Ne===1?this.posY+this.margin[0]:this.margin[0],Ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=Ne===1?0:Ve+(Ne-2)*et;if(this.ctx.clip_path.length!==0){var Zt=this.path;$=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I($,this.posX+this.margin[3],-Ie+Qe+this.ctx.prevPageLastElemOffset),ae.call(this,"fill",!0),this.path=Zt}var mt=JSON.parse(JSON.stringify(Re));mt=I([mt],this.posX+this.margin[3],-Ie+Qe+this.ctx.prevPageLastElemOffset)[0];var hr=(Ne>Pe||Ne<Be)&&x.call(this);hr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,et,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,ze),hr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Re.x,Re.y,Re.w,Re.h,null,null,ze)};var k=function(P,D,q){var H=[];D=D||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":H.push(Math.floor((P.y+ne)/q)+1);break;case"arc":H.push(Math.floor((P.y+ne-P.radius)/q)+1),H.push(Math.floor((P.y+ne+P.radius)/q)+1);break;case"qct":var fe=ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);H.push(Math.floor((fe.y+ne)/q)+1),H.push(Math.floor((fe.y+fe.h+ne)/q)+1);break;case"bct":var me=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);H.push(Math.floor((me.y+ne)/q)+1),H.push(Math.floor((me.y+me.h+ne)/q)+1);break;case"rect":H.push(Math.floor((P.y+ne)/q)+1),H.push(Math.floor((P.y+P.h+ne)/q)+1)}for(var pe=0;pe<H.length;pe+=1)for(;this.pdf.internal.getNumberOfPages()<H[pe];)w.call(this);return H},w=function(){var P=this.fillStyle,D=this.strokeStyle,q=this.font,H=this.lineCap,ne=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=D,this.font=q,this.lineCap=H,this.lineWidth=ne,this.lineJoin=fe},I=function(P,D,q){for(var H=0;H<P.length;H++)switch(P[H].type){case"bct":P[H].x2+=D,P[H].y2+=q;case"qct":P[H].x1+=D,P[H].y1+=q;case"mt":case"lt":case"arc":default:P[H].x+=D,P[H].y+=q}return P},F=function(P){return P.sort(function(D,q){return D-q})},Z=function(P,D){for(var q,H,ne=this.fillStyle,fe=this.strokeStyle,me=this.lineCap,pe=this.lineWidth,_e=Math.abs(pe*this.ctx.transform.scaleX),Le=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Ee=JSON.parse(JSON.stringify(this.path)),Xe=[],ye=0;ye<Ee.length;ye++)if(Ee[ye].x!==void 0)for(var $=k.call(this,Ee[ye]),it=0;it<$.length;it+=1)Xe.indexOf($[it])===-1&&Xe.push($[it]);for(var ze=0;ze<Xe.length;ze++)for(;this.pdf.internal.getNumberOfPages()<Xe[ze];)w.call(this);if(F(Xe),this.autoPaging)for(var ke=Xe[0],Re=Xe[Xe.length-1],Me=ke;Me<Re+1;Me++){this.pdf.setPage(Me),this.fillStyle=ne,this.strokeStyle=fe,this.lineCap=me,this.lineWidth=_e,this.lineJoin=Le;var Fe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Je=Me===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ne=Me===1?0:Pe+(Me-2)*Be;if(this.ctx.clip_path.length!==0){var We=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(q,this.posX+this.margin[3],-Ne+Je+this.ctx.prevPageLastElemOffset),ae.call(this,P,!0),this.path=We}if(H=JSON.parse(JSON.stringify(Te)),this.path=I(H,this.posX+this.margin[3],-Ne+Je+this.ctx.prevPageLastElemOffset),D===!1||Me===0){var Qe=(Me>ke||Me<Re)&&x.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fe,Be,null).clip().discardPath()),ae.call(this,P,D),Qe&&this.pdf.restoreGraphicsState()}this.lineWidth=pe}else this.lineWidth=_e,ae.call(this,P,D),this.lineWidth=pe;this.path=Te},ae=function(P,D){if((P!=="stroke"||D||!A.call(this))&&(P==="stroke"||D||!v.call(this))){for(var q,H,ne=[],fe=this.path,me=0;me<fe.length;me++){var pe=fe[me];switch(pe.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:pe,deltas:[],abs:[]});break;case"lt":var _e=ne.length;if(fe[me-1]&&!isNaN(fe[me-1].x)&&(q=[pe.x-fe[me-1].x,pe.y-fe[me-1].y],_e>0)){for(;_e>=0;_e--)if(ne[_e-1].close!==!0&&ne[_e-1].begin!==!0){ne[_e-1].deltas.push(q),ne[_e-1].abs.push(pe);break}}break;case"bct":q=[pe.x1-fe[me-1].x,pe.y1-fe[me-1].y,pe.x2-fe[me-1].x,pe.y2-fe[me-1].y,pe.x-fe[me-1].x,pe.y-fe[me-1].y],ne[ne.length-1].deltas.push(q);break;case"qct":var Le=fe[me-1].x+2/3*(pe.x1-fe[me-1].x),Te=fe[me-1].y+2/3*(pe.y1-fe[me-1].y),Ee=pe.x+2/3*(pe.x1-pe.x),Xe=pe.y+2/3*(pe.y1-pe.y),ye=pe.x,$=pe.y;q=[Le-fe[me-1].x,Te-fe[me-1].y,Ee-fe[me-1].x,Xe-fe[me-1].y,ye-fe[me-1].x,$-fe[me-1].y],ne[ne.length-1].deltas.push(q);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(pe)}}H=D?null:P==="stroke"?"stroke":"fill";for(var it=!1,ze=0;ze<ne.length;ze++)if(ne[ze].arc)for(var ke=ne[ze].abs,Re=0;Re<ke.length;Re++){var Me=ke[Re];Me.type==="arc"?M.call(this,Me.x,Me.y,Me.radius,Me.startAngle,Me.endAngle,Me.counterclockwise,void 0,D,!it):V.call(this,Me.x,Me.y),it=!0}else if(ne[ze].close===!0)this.pdf.internal.out("h"),it=!1;else if(ne[ze].begin!==!0){var Fe=ne[ze].start.x,Je=ne[ze].start.y;U.call(this,ne[ze].deltas,Fe,Je),it=!0}H&&z.call(this,H),D&&W.call(this)}},re=function(P){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-q;case"top":return P+D-q;case"hanging":return P+D-2*q;case"middle":return P+D/2-q;case"ideographic":return P;case"alphabetic":default:return P}},G=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(D,q){this.colorStops.push([D,q])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(P,D,q,H,ne,fe,me,pe,_e){for(var Le=ie.call(this,q,H,ne,fe),Te=0;Te<Le.length;Te++){var Ee=Le[Te];Te===0&&(_e?j.call(this,Ee.x1+P,Ee.y1+D):V.call(this,Ee.x1+P,Ee.y1+D)),X.call(this,P,D,Ee.x2,Ee.y2,Ee.x3,Ee.y3,Ee.x4,Ee.y4)}pe?W.call(this):z.call(this,me)},z=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},W=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(P,D){this.pdf.internal.out(t(P)+" "+r(D)+" m")},E=function(P){var D;switch(P.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var q=this.pdf.getTextDimensions(P.text),H=re.call(this,P.y),ne=G.call(this,H)-q.h,fe=this.ctx.transform.applyToPoint(new a(P.x,H)),me=this.ctx.transform.decompose(),pe=new c;pe=(pe=(pe=pe.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var _e,Le,Te,Ee=this.ctx.transform.applyToRectangle(new u(P.x,H,q.w,q.h)),Xe=pe.applyToRectangle(new u(P.x,ne,q.w,q.h)),ye=k.call(this,Xe),$=[],it=0;it<ye.length;it+=1)$.indexOf(ye[it])===-1&&$.push(ye[it]);if(F($),this.autoPaging)for(var ze=$[0],ke=$[$.length-1],Re=ze;Re<ke+1;Re++){this.pdf.setPage(Re);var Me=Re===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[2],Pe=Je-this.margin[0],Be=this.pdf.internal.pageSize.width-this.margin[1],Ne=Be-this.margin[3],We=Re===1?0:Fe+(Re-2)*Pe;if(this.ctx.clip_path.length!==0){var Qe=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=I(_e,this.posX+this.margin[3],-1*We+Me),ae.call(this,"fill",!0),this.path=Qe}var Ve=I([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-We+Me+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*P.scale),Te=this.lineWidth,this.lineWidth=Te*P.scale);var et=this.autoPaging!=="text";if(et||Ve.y+Ve.h<=Je){if(et||Ve.y>=Me&&Ve.x<=Be){var Ie=et?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Be-Ve.x)[0],Zt=I([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-We+Me+this.ctx.prevPageLastElemOffset)[0],mt=et&&(Re>ze||Re<ke)&&x.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ne,Pe,null).clip().discardPath()),this.pdf.text(Ie,Zt.x,Zt.y,{angle:P.angle,align:D,renderingMode:P.renderingMode}),mt&&this.pdf.restoreGraphicsState()}}else Ve.y<Je&&(this.ctx.prevPageLastElemOffset+=Je-Ve.y);P.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=Te)}else P.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*P.scale),Te=this.lineWidth,this.lineWidth=Te*P.scale),this.pdf.text(P.text,fe.x+this.posX,fe.y+this.posY,{angle:P.angle,align:D,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=Te)},V=function(P,D,q,H){q=q||0,H=H||0,this.pdf.internal.out(t(P+q)+" "+r(D+H)+" l")},U=function(P,D,q){return this.pdf.lines(P,D,q,null,null)},X=function(P,D,q,H,ne,fe,me,pe){this.pdf.internal.out([e(i(q+P)),e(s(H+D)),e(i(ne+P)),e(s(fe+D)),e(i(me+P)),e(s(pe+D)),"c"].join(" "))},ie=function(P,D,q,H){for(var ne=2*Math.PI,fe=Math.PI/2;D>q;)D-=ne;var me=Math.abs(q-D);me<ne&&H&&(me=ne-me);for(var pe=[],_e=H?-1:1,Le=D;me>1e-5;){var Te=Le+_e*Math.min(me,fe);pe.push(le.call(this,P,Le,Te)),me-=Math.abs(Te-Le),Le=Te}return pe},le=function(P,D,q){var H=(q-D)/2,ne=P*Math.cos(H),fe=P*Math.sin(H),me=ne,pe=-fe,_e=me*me+pe*pe,Le=_e+me*ne+pe*fe,Te=4/3*(Math.sqrt(2*_e*Le)-Le)/(me*fe-pe*ne),Ee=me-Te*pe,Xe=pe+Te*me,ye=Ee,$=-Xe,it=H+D,ze=Math.cos(it),ke=Math.sin(it);return{x1:P*Math.cos(D),y1:P*Math.sin(D),x2:Ee*ze-Xe*ke,y2:Ee*ke+Xe*ze,x3:ye*ze-$*ke,y3:ye*ke+$*ze,x4:P*Math.cos(q),y4:P*Math.sin(q)}},Q=function(P){return 180*P/Math.PI},ce=function(P,D,q,H,ne,fe){var me=P+.5*(q-P),pe=D+.5*(H-D),_e=ne+.5*(q-ne),Le=fe+.5*(H-fe),Te=Math.min(P,ne,me,_e),Ee=Math.max(P,ne,me,_e),Xe=Math.min(D,fe,pe,Le),ye=Math.max(D,fe,pe,Le);return new u(Te,Xe,Ee-Te,ye-Xe)},ve=function(P,D,q,H,ne,fe,me,pe){var _e,Le,Te,Ee,Xe,ye,$,it,ze,ke,Re,Me,Fe,Je,Pe=q-P,Be=H-D,Ne=ne-q,We=fe-H,Qe=me-ne,Ve=pe-fe;for(Le=0;Le<41;Le++)ze=($=(Te=P+(_e=Le/40)*Pe)+_e*((Xe=q+_e*Ne)-Te))+_e*(Xe+_e*(ne+_e*Qe-Xe)-$),ke=(it=(Ee=D+_e*Be)+_e*((ye=H+_e*We)-Ee))+_e*(ye+_e*(fe+_e*Ve-ye)-it),Le==0?(Re=ze,Me=ke,Fe=ze,Je=ke):(Re=Math.min(Re,ze),Me=Math.min(Me,ke),Fe=Math.max(Fe,ze),Je=Math.max(Je,ke));return new u(Math.round(Re),Math.round(Me),Math.round(Fe-Re),Math.round(Je-Me))},Oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,D,q=(P=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:D}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(at.API),function(n){var e=function(s){var a,u,c,f,g,m,y,v,A,x;for(u=[],c=0,f=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;f>c;c+=4)(g=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(m=(g=((g=((g=((g=(g-(x=g%85))/85)-(A=g%85))/85)-(v=g%85))/85)-(y=g%85))/85)%85,u.push(m+33,y+33,v+33,A+33,x+33)):u.push(122);return function(k,w){for(var I=w;I>0;I--)k.pop()}(u,a.length),String.fromCharCode.apply(String,u)+"~>"},t=function(s){var a,u,c,f,g,m=String,y="length",v=255,A="charCodeAt",x="slice",k="replace";for(s[x](-2),s=s[x](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),c=[],f=0,g=(s+=a="uuuuu"[x](s[y]%5||5))[y];g>f;f+=5)u=52200625*(s[A](f)-33)+614125*(s[A](f+1)-33)+7225*(s[A](f+2)-33)+85*(s[A](f+3)-33)+(s[A](f+4)-33),c.push(v&u>>24,v&u>>16,v&u>>8,v&u);return function(w,I){for(var F=I;F>0;F--)w.pop()}(c,a[y]),m.fromCharCode.apply(m,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var u="",c=0;c<s.length;c+=2)u+=String.fromCharCode("0x"+(s[c]+s[c+1]));return u},i=function(s){for(var a=new Uint8Array(s.length),u=s.length;u--;)a[u]=s.charCodeAt(u);return s=(a=wu(a)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};n.processDataByFilters=function(s,a){var u=0,c=s||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),u=0;u<a.length;u+=1)switch(a[u]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[u]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}}(at.API),function(n){n.loadFile=function(e,t,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var u=void 0;try{u=function(c,f,g){var m=new XMLHttpRequest,y=0,v=function(A){var x=A.length,k=[],w=String.fromCharCode;for(y=0;y<x;y+=1)k.push(w(255&A.charCodeAt(y)));return k.join("")};if(m.open("GET",c,!f),m.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(m.onload=function(){m.status===200?g(v(this.responseText)):g(void 0)}),m.send(null),f&&m.status===200)return v(m.responseText)}(i,s,a)}catch{}return u}(e,t,r)},n.loadImageFile=n.loadFile}(at.API),function(n){function e(){return(ot.html2canvas?Promise.resolve(ot.html2canvas):es(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(ot.DOMPurify?Promise.resolve(ot.DOMPurify):es(()=>import("./purify.es-Bf0oSh3b.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var u=Dt(a);return u==="undefined"?"undefined":u==="string"||a instanceof String?"string":u==="number"||a instanceof Number?"number":u==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(a,u){var c=document.createElement(a);for(var f in u.className&&(c.className=u.className),u.innerHTML&&u.dompurify&&(c.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)c.style[f]=u.style[f];return c},s=function a(u){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),c);return f=(f=f.setProgress(1,a,1,[a])).set(u)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,u){return a.__proto__=u||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,u){return this.then(function(){switch(u=u||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function c(f,g){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),y=f.firstChild;y;y=y.nextSibling)g!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||m.appendChild(c(y,g));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(u){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,u(this.prop.container,c)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(u){var c=this.opt.jsPDF,f=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var y=0;y<f.length;++y){var v=f[y],A=v.src.find(function(x){return x.format==="truetype"});A&&c.addFont(A.url,v.ref.name,v.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,c.context2d.save(!0),u(this.prop.container,m)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,u,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,u):this.outputPdf(a,u)},s.prototype.outputPdf=function(a,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,u)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var u=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(u)})},s.prototype.get=function(a,u){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return u?u(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function u(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(a=a||at.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:u(a.inner.width,a.k),height:u(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,u,c,f){return a!=null&&(this.progress.val=a),u!=null&&(this.progress.state=u),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,u,c,f){return this.setProgress(a?this.progress.val+a:null,u||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(a,u){var c=this;return this.thenCore(a,u,function(f,g){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(m){return c.updateProgress(null,f),m}).then(f,g).then(function(m){return c.updateProgress(1),m})})},s.prototype.thenCore=function(a,u,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),u&&(u=u.bind(this));var f=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),g=c.call(f,a,u);return s.convert(g,this.__proto__)},s.prototype.thenExternal=function(a,u){return Promise.prototype.then.call(this,a,u)},s.prototype.thenList=function(a){var u=this;return a.forEach(function(c){u=u.thenCore(c)}),u},s.prototype.catch=function(a){a&&(a=a.bind(this));var u=Promise.prototype.catch.call(this,a);return s.convert(u,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,at.getPageSize=function(a,u,c){if(Dt(a)==="object"){var f=a;a=f.orientation,u=f.unit||u,c=f.format||c}u=u||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var g,m=(""+c).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+u}var v,A=0,x=0;if(y.hasOwnProperty(m))A=y[m][1]/g,x=y[m][0]/g;else try{A=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",x>A&&(v=x,x=A,A=v);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",A>x&&(v=x,x=A,A=v)}return{width:x,height:A,unit:u,k:g,orientation:a}},n.html=function(a,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(ku):null;var c=new s(u);return u.worker?c:c.from(a).doCallback()}}(at.API),at.API.addJS=function(n){return cf=n,this.internal.events.subscribe("postPutResources",function(){jl=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(jl+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),lf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+cf+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){jl!==void 0&&lf!==void 0&&this.internal.out("/Names <</JavaScript "+jl+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],u=r.exec(a);if(u!=null){var c=u[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,g=[];for(s=0;s<f;s++){var m=t.internal.newObject();g.push(m);var y=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<g.length;s++)t.internal.write("(page_"+(s+1)+")"+g[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var u=this.count=this.count_r({count:0},a);if(u>0&&this.line("/Count "+u),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<r.children.length;f++)this.renderItems(r.children[f])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(at.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,a,u){var c,f=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(m){for(var y,v=256*m.charCodeAt(4)+m.charCodeAt(5),A=m.length,x={width:0,height:0,numcomponents:1},k=4;k<A;k+=2){if(k+=v,e.indexOf(m.charCodeAt(k+1))!==-1){y=256*m.charCodeAt(k+5)+m.charCodeAt(k+6),x={width:256*m.charCodeAt(k+7)+m.charCodeAt(k+8),height:y,numcomponents:m.charCodeAt(k+9)};break}v=256*m.charCodeAt(k+2)+m.charCodeAt(k+3)}return x}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}g={data:t,width:c.width,height:c.height,colorSpace:u,bitsPerComponent:8,filter:f,index:r,alias:i}}return g}}(at.API);var ga,Al,uf,hf,df,Sy=function(){var n,e,t;function r(s){var a,u,c,f,g,m,y,v,A,x,k,w,I,F;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(a=this.readUInt32(),A=(function(){var Z,ae;for(ae=[],Z=0;Z<4;++Z)ae.push(String.fromCharCode(this.data[this.pos++]));return ae}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),f=this.readUInt16()||100,m.delay=1e3*g/f,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(A==="fdAT"&&(this.pos+=4,a-=4),s=(m!=null?m.data:void 0)||this.imgData,w=0;0<=a?w<a:w>a;0<=a?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(I=0;0<=x?I<x:I>x;0<=x?++I:--I)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":y=(k=this.read(a)).indexOf(0),v=String.fromCharCode.apply(String,k.slice(0,y)),this.text[v]=String.fromCharCode.apply(String,k.slice(y+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(F=this.colorType)===4||F===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,u;for(u=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*a),c=0,f=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function g(m,y,v,A){var x,k,w,I,F,Z,ae,re,G,M,z,W,j,E,V,U,X,ie,le,Q,ce,ve=Math.ceil((f.width-m)/v),Oe=Math.ceil((f.height-y)/A),P=f.width==ve&&f.height==Oe;for(E=a*ve,W=P?u:new Uint8Array(E*Oe),Z=s.length,j=0,k=0;j<Oe&&c<Z;){switch(s[c++]){case 0:for(I=X=0;X<E;I=X+=1)W[k++]=s[c++];break;case 1:for(I=ie=0;ie<E;I=ie+=1)x=s[c++],F=I<a?0:W[k-a],W[k++]=(x+F)%256;break;case 2:for(I=le=0;le<E;I=le+=1)x=s[c++],w=(I-I%a)/a,V=j&&W[(j-1)*E+w*a+I%a],W[k++]=(V+x)%256;break;case 3:for(I=Q=0;Q<E;I=Q+=1)x=s[c++],w=(I-I%a)/a,F=I<a?0:W[k-a],V=j&&W[(j-1)*E+w*a+I%a],W[k++]=(x+Math.floor((F+V)/2))%256;break;case 4:for(I=ce=0;ce<E;I=ce+=1)x=s[c++],w=(I-I%a)/a,F=I<a?0:W[k-a],j===0?V=U=0:(V=W[(j-1)*E+w*a+I%a],U=w&&W[(j-1)*E+(w-1)*a+I%a]),ae=F+V-U,re=Math.abs(ae-F),M=Math.abs(ae-V),z=Math.abs(ae-U),G=re<=M&&re<=z?F:M<=z?V:U,W[k++]=(x+G)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!P){var D=((y+j*A)*f.width+m)*a,q=j*E;for(I=0;I<ve;I+=1){for(var H=0;H<a;H+=1)u[D++]=W[q++];D+=(v-1)*a}}j++}}return s=ty(s),f.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),u},r.prototype.decodePalette=function(){var s,a,u,c,f,g,m,y,v;for(u=this.palette,g=this.transparency.indexed||[],f=new Uint8Array((g.length||0)+u.length),c=0,s=0,a=m=0,y=u.length;m<y;a=m+=3)f[c++]=u[a],f[c++]=u[a+1],f[c++]=u[a+2],f[c++]=(v=g[s++])!=null?v:255;return f},r.prototype.copyToImageData=function(s,a){var u,c,f,g,m,y,v,A,x,k,w;if(c=this.colors,x=null,u=this.hasAlphaChannel,this.palette.length&&(x=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),c=4,u=!0),A=(f=s.data||s).length,m=x||a,g=y=0,c===1)for(;g<A;)v=x?4*a[g/4]:y,k=m[v++],f[g++]=k,f[g++]=k,f[g++]=k,f[g++]=u?m[v++]:255,y=v;else for(;g<A;)v=x?4*a[g/4]:y,f[g++]=m[v++],f[g++]=m[v++],f[g++]=m[v++],f[g++]=u?m[v++]:255,y=v},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(ot)==="[object Window]"){try{e=ot.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var a;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,u,c,f,g,m,y,v;if(this.animation){for(v=[],u=g=0,m=(y=this.animation.frames).length;g<m;u=++g)a=y[u],c=s.createImageData(a.width,a.height),f=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,f),a.imageData=c,v.push(a.image=n(c));return v}},r.prototype.renderFrame=function(s,a){var u,c,f;return u=(c=this.animation.frames)[a],f=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(f!=null?f.disposeOp:void 0)===1?s.clearRect(f.xOffset,f.yOffset,f.width,f.height):(f!=null?f.disposeOp:void 0)===2&&s.putImageData(f.imageData,f.xOffset,f.yOffset),u.blendOp===0&&s.clearRect(u.xOffset,u.yOffset,u.width,u.height),s.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(s){var a,u,c,f,g,m,y=this;return u=0,m=this.animation,f=m.numFrames,c=m.frames,g=m.numPlays,(a=function(){var v,A;if(v=u++%f,A=c[v],y.renderFrame(s,v),f>1&&u/f<g)return y.animation._timeout=setTimeout(a,A.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,u;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(u=a.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),a.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function jy(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,a=1<<(7&i)+1;n[e++],n[e++];var u=null,c=null;s&&(u=e,c=a,e+=3*a);var f=!0,g=[],m=0,y=null,v=0,A=null;for(this.width=t,this.height=r;f&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,A=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=n[e++];m=n[e++]|n[e++]<<8,y=n[e++],!(1&x)&&(y=null),v=x>>2&7,e++;break;case 254:for(;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var k=n[e++]|n[e++]<<8,w=n[e++]|n[e++]<<8,I=n[e++]|n[e++]<<8,F=n[e++]|n[e++]<<8,Z=n[e++],ae=Z>>6&1,re=1<<(7&Z)+1,G=u,M=c,z=!1;Z>>7&&(z=!0,G=e,M=re,e+=3*re);var W=e;for(e++;;){var j;if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}g.push({x:k,y:w,width:I,height:F,has_local_palette:z,palette_offset:G,palette_size:M,data_offset:W,data_length:e-W,transparent_index:y,interlaced:!!ae,delay:m,disposal:v});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return A},this.frameInfo=function(E){if(E<0||E>=g.length)throw new Error("Frame index out of range.");return g[E]},this.decodeAndBlitFrameBGRA=function(E,V){var U=this.frameInfo(E),X=U.width*U.height,ie=new Uint8Array(X);ff(n,U.data_offset,ie,X);var le=U.palette_offset,Q=U.transparent_index;Q===null&&(Q=256);var ce=U.width,ve=t-ce,Oe=ce,P=4*(U.y*t+U.x),D=4*((U.y+U.height)*t+U.x),q=P,H=4*ve;U.interlaced===!0&&(H+=4*t*7);for(var ne=8,fe=0,me=ie.length;fe<me;++fe){var pe=ie[fe];if(Oe===0&&(Oe=ce,(q+=H)>=D&&(H=4*ve+4*t*(ne-1),q=P+(ce+ve)*(ne<<1),ne>>=1)),pe===Q)q+=4;else{var _e=n[le+3*pe],Le=n[le+3*pe+1],Te=n[le+3*pe+2];V[q++]=Te,V[q++]=Le,V[q++]=_e,V[q++]=255}--Oe}},this.decodeAndBlitFrameRGBA=function(E,V){var U=this.frameInfo(E),X=U.width*U.height,ie=new Uint8Array(X);ff(n,U.data_offset,ie,X);var le=U.palette_offset,Q=U.transparent_index;Q===null&&(Q=256);var ce=U.width,ve=t-ce,Oe=ce,P=4*(U.y*t+U.x),D=4*((U.y+U.height)*t+U.x),q=P,H=4*ve;U.interlaced===!0&&(H+=4*t*7);for(var ne=8,fe=0,me=ie.length;fe<me;++fe){var pe=ie[fe];if(Oe===0&&(Oe=ce,(q+=H)>=D&&(H=4*ve+4*t*(ne-1),q=P+(ce+ve)*(ne<<1),ne>>=1)),pe===Q)q+=4;else{var _e=n[le+3*pe],Le=n[le+3*pe+1],Te=n[le+3*pe+2];V[q++]=_e,V[q++]=Le,V[q++]=Te,V[q++]=255}--Oe}}}function ff(n,e,t,r){for(var i=n[e++],s=1<<i,a=s+1,u=a+1,c=i+1,f=(1<<c)-1,g=0,m=0,y=0,v=n[e++],A=new Int32Array(4096),x=null;;){for(;g<16&&v!==0;)m|=n[e++]<<g,g+=8,v===1?v=n[e++]:--v;if(g<c)break;var k=m&f;if(m>>=c,g-=c,k!==s){if(k===a)break;for(var w=k<u?k:x,I=0,F=w;F>s;)F=A[F]>>8,++I;var Z=F;if(y+I+(w!==k?1:0)>r)return void Ft.log("Warning, gif stream longer than expected.");t[y++]=Z;var ae=y+=I;for(w!==k&&(t[y++]=Z),F=w;I--;)F=A[F],t[--ae]=255&F,F>>=8;x!==null&&u<4096&&(A[u++]=x<<8|Z,u>=f+1&&c<12&&(++c,f=f<<1|1)),x=k}else u=a+1,f=(1<<(c=i+1))-1,x=null}return y!==r&&Ft.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Jc(n){var e,t,r,i,s,a=Math.floor,u=new Array(64),c=new Array(64),f=new Array(64),g=new Array(64),m=new Array(65535),y=new Array(65535),v=new Array(64),A=new Array(64),x=[],k=0,w=7,I=new Array(64),F=new Array(64),Z=new Array(64),ae=new Array(256),re=new Array(2048),G=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],M=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(P,D){for(var q=0,H=0,ne=new Array,fe=1;fe<=16;fe++){for(var me=1;me<=P[fe];me++)ne[D[H]]=[],ne[D[H]][0]=q,ne[D[H]][1]=fe,H++,q++;q*=2}return ne}function le(P){for(var D=P[0],q=P[1]-1;q>=0;)D&1<<q&&(k|=1<<w),q--,--w<0&&(k==255?(Q(255),Q(0)):Q(k),w=7,k=0)}function Q(P){x.push(P)}function ce(P){Q(P>>8&255),Q(255&P)}function ve(P,D,q,H,ne){for(var fe,me=ne[0],pe=ne[240],_e=function(ke,Re){var Me,Fe,Je,Pe,Be,Ne,We,Qe,Ve,et,Ie=0;for(Ve=0;Ve<8;++Ve){Me=ke[Ie],Fe=ke[Ie+1],Je=ke[Ie+2],Pe=ke[Ie+3],Be=ke[Ie+4],Ne=ke[Ie+5],We=ke[Ie+6];var Zt=Me+(Qe=ke[Ie+7]),mt=Me-Qe,hr=Fe+We,vt=Fe-We,Ct=Je+Ne,Hr=Je-Ne,jt=Pe+Be,Hn=Pe-Be,Ht=Zt+jt,kr=Zt-jt,on=hr+Ct,$t=hr-Ct;ke[Ie]=Ht+on,ke[Ie+4]=Ht-on;var ct=.707106781*($t+kr);ke[Ie+2]=kr+ct,ke[Ie+6]=kr-ct;var At=.382683433*((Ht=Hn+Hr)-($t=vt+mt)),Gn=.5411961*Ht+At,dr=1.306562965*$t+At,ln=.707106781*(on=Hr+vt),cn=mt+ln,nt=mt-ln;ke[Ie+5]=nt+Gn,ke[Ie+3]=nt-Gn,ke[Ie+1]=cn+dr,ke[Ie+7]=cn-dr,Ie+=8}for(Ie=0,Ve=0;Ve<8;++Ve){Me=ke[Ie],Fe=ke[Ie+8],Je=ke[Ie+16],Pe=ke[Ie+24],Be=ke[Ie+32],Ne=ke[Ie+40],We=ke[Ie+48];var Gr=Me+(Qe=ke[Ie+56]),un=Me-Qe,Lr=Fe+We,Xt=Fe-We,Kt=Je+Ne,Er=Je-Ne,ci=Pe+Be,_n=Pe-Be,Kr=Gr+ci,Jr=Gr-ci,Yr=Lr+Kt,hn=Lr-Kt;ke[Ie]=Kr+Yr,ke[Ie+32]=Kr-Yr;var $r=.707106781*(hn+Jr);ke[Ie+16]=Jr+$r,ke[Ie+48]=Jr-$r;var dn=.382683433*((Kr=_n+Er)-(hn=Xt+un)),ui=.5411961*Kr+dn,ki=1.306562965*hn+dn,fn=.707106781*(Yr=Er+Xt),Zr=un+fn,Tn=un-fn;ke[Ie+40]=Tn+ui,ke[Ie+24]=Tn-ui,ke[Ie+8]=Zr+ki,ke[Ie+56]=Zr-ki,Ie++}for(Ve=0;Ve<64;++Ve)et=ke[Ve]*Re[Ve],v[Ve]=et>0?et+.5|0:et-.5|0;return v}(P,D),Le=0;Le<64;++Le)A[G[Le]]=_e[Le];var Te=A[0]-q;q=A[0],Te==0?le(H[0]):(le(H[y[fe=32767+Te]]),le(m[fe]));for(var Ee=63;Ee>0&&A[Ee]==0;)Ee--;if(Ee==0)return le(me),q;for(var Xe,ye=1;ye<=Ee;){for(var $=ye;A[ye]==0&&ye<=Ee;)++ye;var it=ye-$;if(it>=16){Xe=it>>4;for(var ze=1;ze<=Xe;++ze)le(pe);it&=15}fe=32767+A[ye],le(ne[(it<<4)+y[fe]]),le(m[fe]),ye++}return Ee!=63&&le(me),q}function Oe(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(D){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var ne=a((q[H]*D+50)/100);ne=Math.min(Math.max(ne,1),255),u[G[H]]=ne}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var pe=a((fe[me]*D+50)/100);pe=Math.min(Math.max(pe,1),255),c[G[me]]=pe}for(var _e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Le=0,Te=0;Te<8;Te++)for(var Ee=0;Ee<8;Ee++)f[Le]=1/(u[G[Le]]*_e[Te]*_e[Ee]*8),g[Le]=1/(c[G[Le]]*_e[Te]*_e[Ee]*8),Le++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,D){D&&Oe(D),x=new Array,k=0,w=7,ce(65496),ce(65504),ce(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),ce(1),ce(1),Q(0),Q(0),function(){ce(65499),ce(132),Q(0);for(var Fe=0;Fe<64;Fe++)Q(u[Fe]);Q(1);for(var Je=0;Je<64;Je++)Q(c[Je])}(),function(Fe,Je){ce(65472),ce(17),Q(8),ce(Je),ce(Fe),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(P.width,P.height),function(){ce(65476),ce(418),Q(0);for(var Fe=0;Fe<16;Fe++)Q(M[Fe+1]);for(var Je=0;Je<=11;Je++)Q(z[Je]);Q(16);for(var Pe=0;Pe<16;Pe++)Q(W[Pe+1]);for(var Be=0;Be<=161;Be++)Q(j[Be]);Q(1);for(var Ne=0;Ne<16;Ne++)Q(E[Ne+1]);for(var We=0;We<=11;We++)Q(V[We]);Q(17);for(var Qe=0;Qe<16;Qe++)Q(U[Qe+1]);for(var Ve=0;Ve<=161;Ve++)Q(X[Ve])}(),ce(65498),ce(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var q=0,H=0,ne=0;k=0,w=7,this.encode.displayName="_encode_";for(var fe,me,pe,_e,Le,Te,Ee,Xe,ye,$=P.data,it=P.width,ze=P.height,ke=4*it,Re=0;Re<ze;){for(fe=0;fe<ke;){for(Le=ke*Re+fe,Ee=-1,Xe=0,ye=0;ye<64;ye++)Te=Le+(Xe=ye>>3)*ke+(Ee=4*(7&ye)),Re+Xe>=ze&&(Te-=ke*(Re+1+Xe-ze)),fe+Ee>=ke&&(Te-=fe+Ee-ke+4),me=$[Te++],pe=$[Te++],_e=$[Te++],I[ye]=(re[me]+re[pe+256>>0]+re[_e+512>>0]>>16)-128,F[ye]=(re[me+768>>0]+re[pe+1024>>0]+re[_e+1280>>0]>>16)-128,Z[ye]=(re[me+1280>>0]+re[pe+1536>>0]+re[_e+1792>>0]>>16)-128;q=ve(I,f,q,e,r),H=ve(F,g,H,t,i),ne=ve(Z,g,ne,t,i),fe+=32}Re+=8}if(w>=0){var Me=[];Me[1]=w+1,Me[0]=(1<<w+1)-1,le(Me)}return ce(65497),new Uint8Array(x)},n=n||50,function(){for(var P=String.fromCharCode,D=0;D<256;D++)ae[D]=P(D)}(),e=ie(M,z),t=ie(E,V),r=ie(W,j),i=ie(U,X),function(){for(var P=1,D=2,q=1;q<=15;q++){for(var H=P;H<D;H++)y[32767+H]=q,m[32767+H]=[],m[32767+H][1]=q,m[32767+H][0]=H;for(var ne=-(D-1);ne<=-P;ne++)y[32767+ne]=q,m[32767+ne]=[],m[32767+ne][1]=q,m[32767+ne][0]=D-1+ne;P<<=1,D<<=1}}(),function(){for(var P=0;P<256;P++)re[P]=19595*P,re[P+256>>0]=38470*P,re[P+512>>0]=7471*P+32768,re[P+768>>0]=-11059*P,re[P+1024>>0]=-21709*P,re[P+1280>>0]=32768*P+8421375,re[P+1536>>0]=-27439*P,re[P+1792>>0]=-5329*P}(),Oe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Un(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function pf(n){function e(M){if(!M)throw Error("assert :P")}function t(M,z,W){for(var j=0;4>j;j++)if(M[z+j]!=W.charCodeAt(j))return!0;return!1}function r(M,z,W,j,E){for(var V=0;V<E;V++)M[z+V]=W[j+V]}function i(M,z,W,j){for(var E=0;E<j;E++)M[z+E]=W}function s(M){return new Int32Array(M)}function a(M,z){for(var W=[],j=0;j<M;j++)W.push(new z);return W}function u(M,z){var W=[];return function j(E,V,U){for(var X=U[V],ie=0;ie<X&&(E.push(U.length>V+1?[]:new z),!(U.length<V+1));ie++)j(E[ie],V+1,U)}(W,0,M),W}var c=function(){var M=this;function z(o,h){for(var p=1<<h-1>>>0;o&p;)p>>>=1;return p?(o&p-1)+p:o}function W(o,h,p,b,_){e(!(b%p));do o[h+(b-=p)]=_;while(0<b)}function j(o,h,p,b,_){if(e(2328>=_),512>=_)var L=s(512);else if((L=s(_))==null)return 0;return function(C,N,T,O,J,he){var de,se,je=N,be=1<<T,Y=s(16),ee=s(16);for(e(J!=0),e(O!=null),e(C!=null),e(0<T),se=0;se<J;++se){if(15<O[se])return 0;++Y[O[se]]}if(Y[0]==J)return 0;for(ee[1]=0,de=1;15>de;++de){if(Y[de]>1<<de)return 0;ee[de+1]=ee[de]+Y[de]}for(se=0;se<J;++se)de=O[se],0<O[se]&&(he[ee[de]++]=se);if(ee[15]==1)return(O=new E).g=0,O.value=he[0],W(C,je,1,be,O),be;var xe,Ae=-1,Se=be-1,qe=0,De=1,st=1,Ue=1<<T;for(se=0,de=1,J=2;de<=T;++de,J<<=1){if(De+=st<<=1,0>(st-=Y[de]))return 0;for(;0<Y[de];--Y[de])(O=new E).g=de,O.value=he[se++],W(C,je+qe,J,Ue,O),qe=z(qe,de)}for(de=T+1,J=2;15>=de;++de,J<<=1){if(De+=st<<=1,0>(st-=Y[de]))return 0;for(;0<Y[de];--Y[de]){if(O=new E,(qe&Se)!=Ae){for(je+=Ue,xe=1<<(Ae=de)-T;15>Ae&&!(0>=(xe-=Y[Ae]));)++Ae,xe<<=1;be+=Ue=1<<(xe=Ae-T),C[N+(Ae=qe&Se)].g=xe+T,C[N+Ae].value=je-N-Ae}O.g=de-T,O.value=he[se++],W(C,je+(qe>>T),J,Ue,O),qe=z(qe,de)}}return De!=2*ee[15]-1?0:be}(o,h,p,b,_,L)}function E(){this.value=this.g=0}function V(){this.value=this.g=0}function U(){this.G=a(5,E),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Pr,V)}function X(o,h,p,b){e(o!=null),e(h!=null),e(2147483648>b),o.Ca=254,o.I=0,o.b=-8,o.Ka=0,o.oa=h,o.pa=p,o.Jd=h,o.Yc=p+b,o.Zc=4<=b?p+b-4+1:p,fe(o)}function ie(o,h){for(var p=0;0<h--;)p|=pe(o,128)<<h;return p}function le(o,h){var p=ie(o,h);return me(o)?-p:p}function Q(o,h,p,b){var _,L=0;for(e(o!=null),e(h!=null),e(4294967288>b),o.Sb=b,o.Ra=0,o.u=0,o.h=0,4<b&&(b=4),_=0;_<b;++_)L+=h[p+_]<<8*_;o.Ra=L,o.bb=b,o.oa=h,o.pa=p}function ce(o){for(;8<=o.u&&o.bb<o.Sb;)o.Ra>>>=8,o.Ra+=o.oa[o.pa+o.bb]<<Xs-8>>>0,++o.bb,o.u-=8;q(o)&&(o.h=1,o.u=0)}function ve(o,h){if(e(0<=h),!o.h&&h<=Zs){var p=D(o)&Ys[h];return o.u+=h,ce(o),p}return o.h=1,o.u=0}function Oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(o){return o.Ra>>>(o.u&Xs-1)>>>0}function q(o){return e(o.bb<=o.Sb),o.h||o.bb==o.Sb&&o.u>Xs}function H(o,h){o.u=h,o.h=q(o)}function ne(o){o.u>=Za&&(e(o.u>=Za),ce(o))}function fe(o){e(o!=null&&o.oa!=null),o.pa<o.Zc?(o.I=(o.oa[o.pa++]|o.I<<8)>>>0,o.b+=8):(e(o!=null&&o.oa!=null),o.pa<o.Yc?(o.b+=8,o.I=o.oa[o.pa++]|o.I<<8):o.Ka?o.b=0:(o.I<<=8,o.b+=8,o.Ka=1))}function me(o){return ie(o,1)}function pe(o,h){var p=o.Ca;0>o.b&&fe(o);var b=o.b,_=p*h>>>8,L=(o.I>>>b>_)+0;for(L?(p-=_,o.I-=_+1<<b>>>0):p=_+1,b=p,_=0;256<=b;)_+=8,b>>=8;return b=7^_+Xr[b],o.b-=b,o.Ca=(p<<b)-1,L}function _e(o,h,p){o[h+0]=p>>24&255,o[h+1]=p>>16&255,o[h+2]=p>>8&255,o[h+3]=p>>0&255}function Le(o,h){return o[h+0]<<0|o[h+1]<<8}function Te(o,h){return Le(o,h)|o[h+2]<<16}function Ee(o,h){return Le(o,h)|Le(o,h+2)<<16}function Xe(o,h){var p=1<<h;return e(o!=null),e(0<h),o.X=s(p),o.X==null?0:(o.Mb=32-h,o.Xa=h,1)}function ye(o,h){e(o!=null),e(h!=null),e(o.Xa==h.Xa),r(h.X,0,o.X,0,1<<h.Xa)}function $(){this.X=[],this.Xa=this.Mb=0}function it(o,h,p,b){e(p!=null),e(b!=null);var _=p[0],L=b[0];return _==0&&(_=(o*L+h/2)/h),L==0&&(L=(h*_+o/2)/o),0>=_||0>=L?0:(p[0]=_,b[0]=L,1)}function ze(o,h){return o+(1<<h)-1>>>h}function ke(o,h){return((4278255360&o)+(4278255360&h)>>>0&4278255360)+((16711935&o)+(16711935&h)>>>0&16711935)>>>0}function Re(o,h){M[h]=function(p,b,_,L,C,N,T){var O;for(O=0;O<C;++O){var J=M[o](N[T+O-1],_,L+O);N[T+O]=ke(p[b+O],J)}}}function Me(){this.ud=this.hd=this.jd=0}function Fe(o,h){return((4278124286&(o^h))>>>1)+(o&h)>>>0}function Je(o){return 0<=o&&256>o?o:0>o?0:255<o?255:void 0}function Pe(o,h){return Je(o+(o-h+.5>>1))}function Be(o,h,p){return Math.abs(h-p)-Math.abs(o-p)}function Ne(o,h,p,b,_,L,C){for(b=L[C-1],p=0;p<_;++p)L[C+p]=b=ke(o[h+p],b)}function We(o,h,p,b,_){var L;for(L=0;L<p;++L){var C=o[h+L],N=C>>8&255,T=16711935&(T=(T=16711935&C)+((N<<16)+N));b[_+L]=(4278255360&C)+T>>>0}}function Qe(o,h){h.jd=o>>0&255,h.hd=o>>8&255,h.ud=o>>16&255}function Ve(o,h,p,b,_,L){var C;for(C=0;C<b;++C){var N=h[p+C],T=N>>>8,O=N,J=255&(J=(J=N>>>16)+((o.jd<<24>>24)*(T<<24>>24)>>>5));O=255&(O=(O=O+((o.hd<<24>>24)*(T<<24>>24)>>>5))+((o.ud<<24>>24)*(J<<24>>24)>>>5)),_[L+C]=(4278255360&N)+(J<<16)+O}}function et(o,h,p,b,_){M[h]=function(L,C,N,T,O,J,he,de,se){for(T=he;T<de;++T)for(he=0;he<se;++he)O[J++]=_(N[b(L[C++])])},M[o]=function(L,C,N,T,O,J,he){var de=8>>L.b,se=L.Ea,je=L.K[0],be=L.w;if(8>de)for(L=(1<<L.b)-1,be=(1<<de)-1;C<N;++C){var Y,ee=0;for(Y=0;Y<se;++Y)Y&L||(ee=b(T[O++])),J[he++]=_(je[ee&be]),ee>>=de}else M["VP8LMapColor"+p](T,O,je,be,J,he,C,N,se)}}function Ie(o,h,p,b,_){for(p=h+p;h<p;){var L=o[h++];b[_++]=L>>16&255,b[_++]=L>>8&255,b[_++]=L>>0&255}}function Zt(o,h,p,b,_){for(p=h+p;h<p;){var L=o[h++];b[_++]=L>>16&255,b[_++]=L>>8&255,b[_++]=L>>0&255,b[_++]=L>>24&255}}function mt(o,h,p,b,_){for(p=h+p;h<p;){var L=(C=o[h++])>>16&240|C>>12&15,C=C>>0&240|C>>28&15;b[_++]=L,b[_++]=C}}function hr(o,h,p,b,_){for(p=h+p;h<p;){var L=(C=o[h++])>>16&248|C>>13&7,C=C>>5&224|C>>3&31;b[_++]=L,b[_++]=C}}function vt(o,h,p,b,_){for(p=h+p;h<p;){var L=o[h++];b[_++]=L>>0&255,b[_++]=L>>8&255,b[_++]=L>>16&255}}function Ct(o,h,p,b,_,L){if(L==0)for(p=h+p;h<p;)_e(b,((L=o[h++])[0]>>24|L[1]>>8&65280|L[2]<<8&16711680|L[3]<<24)>>>0),_+=32;else r(b,_,o,h,p)}function Hr(o,h){M[h][0]=M[o+"0"],M[h][1]=M[o+"1"],M[h][2]=M[o+"2"],M[h][3]=M[o+"3"],M[h][4]=M[o+"4"],M[h][5]=M[o+"5"],M[h][6]=M[o+"6"],M[h][7]=M[o+"7"],M[h][8]=M[o+"8"],M[h][9]=M[o+"9"],M[h][10]=M[o+"10"],M[h][11]=M[o+"11"],M[h][12]=M[o+"12"],M[h][13]=M[o+"13"],M[h][14]=M[o+"0"],M[h][15]=M[o+"0"]}function jt(o){return o==pc||o==gc||o==rl||o==mc}function Hn(){this.eb=[],this.size=this.A=this.fb=0}function Ht(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function kr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Hn,this.f.kb=new Ht,this.sd=null}function on(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function $t(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ct(o){return alert("todo:WebPSamplerProcessPlane"),o.T}function At(o,h){var p=o.T,b=h.ba.f.RGBA,_=b.eb,L=b.fb+o.ka*b.A,C=Cn[h.ba.S],N=o.y,T=o.O,O=o.f,J=o.N,he=o.ea,de=o.W,se=h.cc,je=h.dc,be=h.Mc,Y=h.Nc,ee=o.ka,xe=o.ka+o.T,Ae=o.U,Se=Ae+1>>1;for(ee==0?C(N,T,null,null,O,J,he,de,O,J,he,de,_,L,null,null,Ae):(C(h.ec,h.fc,N,T,se,je,be,Y,O,J,he,de,_,L-b.A,_,L,Ae),++p);ee+2<xe;ee+=2)se=O,je=J,be=he,Y=de,J+=o.Rc,de+=o.Rc,L+=2*b.A,C(N,(T+=2*o.fa)-o.fa,N,T,se,je,be,Y,O,J,he,de,_,L-b.A,_,L,Ae);return T+=o.fa,o.j+xe<o.o?(r(h.ec,h.fc,N,T,Ae),r(h.cc,h.dc,O,J,Se),r(h.Mc,h.Nc,he,de,Se),p--):1&xe||C(N,T,null,null,O,J,he,de,O,J,he,de,_,L+b.A,null,null,Ae),p}function Gn(o,h,p){var b=o.F,_=[o.J];if(b!=null){var L=o.U,C=h.ba.S,N=C==tl||C==rl;h=h.ba.f.RGBA;var T=[0],O=o.ka;T[0]=o.T,o.Kb&&(O==0?--T[0]:(--O,_[0]-=o.width),o.j+o.ka+o.T==o.o&&(T[0]=o.o-o.j-O));var J=h.eb;O=h.fb+O*h.A,o=Bt(b,_[0],o.width,L,T,J,O+(N?0:3),h.A),e(p==T),o&&jt(C)&&kn(J,O,N,L,T,h.A)}return 0}function dr(o){var h=o.ma,p=h.ba.S,b=11>p,_=p==Qo||p==el||p==tl||p==fc||p==12||jt(p);if(h.memory=null,h.Ib=null,h.Jb=null,h.Nd=null,!Ja(h.Oa,o,_?11:12))return 0;if(_&&jt(p)&&Ce(),o.da)alert("todo:use_scaling");else{if(b){if(h.Ib=ct,o.Kb){if(p=o.U+1>>1,h.memory=s(o.U+2*p),h.memory==null)return 0;h.ec=h.memory,h.fc=0,h.cc=h.ec,h.dc=h.fc+o.U,h.Mc=h.cc,h.Nc=h.dc+p,h.Ib=At,Ce()}}else alert("todo:EmitYUV");_&&(h.Jb=Gn,b&&oe())}if(b&&!Bh){for(o=0;256>o;++o)N1[o]=89858*(o-128)+il>>nl,R1[o]=-22014*(o-128)+il,T1[o]=-45773*(o-128),E1[o]=113618*(o-128)+il>>nl;for(o=io;o<yc;++o)h=76283*(o-16)+il>>nl,O1[o-io]=pn(h,255),F1[o-io]=pn(h+8>>4,15);Bh=1}return 1}function ln(o){var h=o.ma,p=o.U,b=o.T;return e(!(1&o.ka)),0>=p||0>=b?0:(p=h.Ib(o,h),h.Jb!=null&&h.Jb(o,h,p),h.Dc+=p,1)}function cn(o){o.ma.memory=null}function nt(o,h,p,b){return ve(o,8)!=47?0:(h[0]=ve(o,14)+1,p[0]=ve(o,14)+1,b[0]=ve(o,1),ve(o,3)!=0?0:!o.h)}function Gr(o,h){if(4>o)return o+1;var p=o-2>>1;return(2+(1&o)<<p)+ve(h,p)+1}function un(o,h){return 120<h?h-120:1<=(p=((p=v1[h-1])>>4)*o+(8-(15&p)))?p:1;var p}function Lr(o,h,p){var b=D(p),_=o[h+=255&b].g-8;return 0<_&&(H(p,p.u+8),b=D(p),h+=o[h].value,h+=b&(1<<_)-1),H(p,p.u+o[h].g),o[h].value}function Xt(o,h,p){return p.g+=o.g,p.value+=o.value<<h>>>0,e(8>=p.g),o.g}function Kt(o,h,p){var b=o.xc;return e((h=b==0?0:o.vc[o.md*(p>>b)+(h>>b)])<o.Wb),o.Ya[h]}function Er(o,h,p,b){var _=o.ab,L=o.c*h,C=o.C;h=C+h;var N=p,T=b;for(b=o.Ta,p=o.Ua;0<_--;){var O=o.gc[_],J=C,he=h,de=N,se=T,je=(T=b,N=p,O.Ea);switch(e(J<he),e(he<=O.nc),O.hc){case 2:Ho(de,se,(he-J)*je,T,N);break;case 0:var be=J,Y=he,ee=T,xe=N,Ae=(Ue=O).Ea;be==0&&(hc(de,se,null,null,1,ee,xe),Ne(de,se+1,0,0,Ae-1,ee,xe+1),se+=Ae,xe+=Ae,++be);for(var Se=1<<Ue.b,qe=Se-1,De=ze(Ae,Ue.b),st=Ue.K,Ue=Ue.w+(be>>Ue.b)*De;be<Y;){var It=st,Nt=Ue,kt=1;for(Xa(de,se,ee,xe-Ae,1,ee,xe);kt<Ae;){var yt=(kt&~qe)+Se;yt>Ae&&(yt=Ae),(0,Ti[It[Nt++]>>8&15])(de,se+ +kt,ee,xe+kt-Ae,yt-kt,ee,xe+kt),kt=yt}se+=Ae,xe+=Ae,++be&qe||(Ue+=De)}he!=O.nc&&r(T,N-je,T,N+(he-J-1)*je,je);break;case 1:for(je=de,Y=se,Ae=(de=O.Ea)-(xe=de&~(ee=(se=1<<O.b)-1)),be=ze(de,O.b),Se=O.K,O=O.w+(J>>O.b)*be;J<he;){for(qe=Se,De=O,st=new Me,Ue=Y+xe,It=Y+de;Y<Ue;)Qe(qe[De++],st),vs(st,je,Y,se,T,N),Y+=se,N+=se;Y<It&&(Qe(qe[De++],st),vs(st,je,Y,Ae,T,N),Y+=Ae,N+=Ae),++J&ee||(O+=be)}break;case 3:if(de==T&&se==N&&0<O.b){for(Y=T,de=je=N+(he-J)*je-(xe=(he-J)*ze(O.Ea,O.b)),se=T,ee=N,be=[],xe=(Ae=xe)-1;0<=xe;--xe)be[xe]=se[ee+xe];for(xe=Ae-1;0<=xe;--xe)Y[de+xe]=be[xe];Sn(O,J,he,T,je,T,N)}else Sn(O,J,he,de,se,T,N)}N=b,T=p}T!=p&&r(b,p,N,T,L)}function ci(o,h){var p=o.V,b=o.Ba+o.c*o.C,_=h-o.C;if(e(h<=o.l.o),e(16>=_),0<_){var L=o.l,C=o.Ta,N=o.Ua,T=L.width;if(Er(o,_,p,b),_=N=[N],e((p=o.C)<(b=h)),e(L.v<L.va),b>L.o&&(b=L.o),p<L.j){var O=L.j-p;p=L.j,_[0]+=O*T}if(p>=b?p=0:(_[0]+=4*L.v,L.ka=p-L.j,L.U=L.va-L.v,L.T=b-p,p=1),p){if(N=N[0],11>(p=o.ca).S){var J=p.f.RGBA,he=(b=p.S,_=L.U,L=L.T,O=J.eb,J.A),de=L;for(J=J.fb+o.Ma*J.A;0<de--;){var se=C,je=N,be=_,Y=O,ee=J;switch(b){case Xo:Qr(se,je,be,Y,ee);break;case Qo:qr(se,je,be,Y,ee);break;case pc:qr(se,je,be,Y,ee),kn(Y,ee,0,be,1,0);break;case Ih:gi(se,je,be,Y,ee);break;case el:Ct(se,je,be,Y,ee,1);break;case gc:Ct(se,je,be,Y,ee,1),kn(Y,ee,0,be,1,0);break;case tl:Ct(se,je,be,Y,ee,0);break;case rl:Ct(se,je,be,Y,ee,0),kn(Y,ee,1,be,1,0);break;case fc:Ri(se,je,be,Y,ee);break;case mc:Ri(se,je,be,Y,ee),Mt(Y,ee,be,1,0);break;case Nh:pi(se,je,be,Y,ee);break;default:e(0)}N+=T,J+=he}o.Ma+=L}else alert("todo:EmitRescaledRowsYUVA");e(o.Ma<=p.height)}}o.C=h,e(o.C<=o.i)}function _n(o){var h;if(0<o.ua)return 0;for(h=0;h<o.Wb;++h){var p=o.Ya[h].G,b=o.Ya[h].H;if(0<p[1][b[1]+0].g||0<p[2][b[2]+0].g||0<p[3][b[3]+0].g)return 0}return 1}function Kr(o,h,p,b,_,L){if(o.Z!=0){var C=o.qd,N=o.rd;for(e(Mi[o.Z]!=null);h<p;++h)Mi[o.Z](C,N,b,_,b,_,L),C=b,N=_,_+=L;o.qd=C,o.rd=N}}function Jr(o,h){var p=o.l.ma,b=p.Z==0||p.Z==1?o.l.j:o.C;if(b=o.C<b?b:o.C,e(h<=o.l.o),h>b){var _=o.l.width,L=p.ca,C=p.tb+_*b,N=o.V,T=o.Ba+o.c*b,O=o.gc;e(o.ab==1),e(O[0].hc==3),Go(O[0],b,h,N,T,L,C),Kr(p,b,h,L,C,_)}o.C=o.Ma=h}function Yr(o,h,p,b,_,L,C){var N=o.$/b,T=o.$%b,O=o.m,J=o.s,he=p+o.$,de=he;_=p+b*_;var se=p+b*L,je=280+J.ua,be=o.Pb?N:16777216,Y=0<J.ua?J.Wa:null,ee=J.wc,xe=he<se?Kt(J,T,N):null;e(o.C<L),e(se<=_);var Ae=!1;e:for(;;){for(;Ae||he<se;){var Se=0;if(N>=be){var qe=he-p;e((be=o).Pb),be.wd=be.m,be.xd=qe,0<be.s.ua&&ye(be.s.Wa,be.s.vb),be=N+y1}if(T&ee||(xe=Kt(J,T,N)),e(xe!=null),xe.Qb&&(h[he]=xe.qb,Ae=!0),!Ae)if(ne(O),xe.jc){Se=O,qe=h;var De=he,st=xe.pd[D(Se)&Pr-1];e(xe.jc),256>st.g?(H(Se,Se.u+st.g),qe[De]=st.value,Se=0):(H(Se,Se.u+st.g-256),e(256<=st.value),Se=st.value),Se==0&&(Ae=!0)}else Se=Lr(xe.G[0],xe.H[0],O);if(O.h)break;if(Ae||256>Se){if(!Ae)if(xe.nd)h[he]=(xe.qb|Se<<8)>>>0;else{if(ne(O),Ae=Lr(xe.G[1],xe.H[1],O),ne(O),qe=Lr(xe.G[2],xe.H[2],O),De=Lr(xe.G[3],xe.H[3],O),O.h)break;h[he]=(De<<24|Ae<<16|Se<<8|qe)>>>0}if(Ae=!1,++he,++T>=b&&(T=0,++N,C!=null&&N<=L&&!(N%16)&&C(o,N),Y!=null))for(;de<he;)Se=h[de++],Y.X[(506832829*Se&4294967295)>>>Y.Mb]=Se}else if(280>Se){if(Se=Gr(Se-256,O),qe=Lr(xe.G[4],xe.H[4],O),ne(O),qe=un(b,qe=Gr(qe,O)),O.h)break;if(he-p<qe||_-he<Se)break e;for(De=0;De<Se;++De)h[he+De]=h[he+De-qe];for(he+=Se,T+=Se;T>=b;)T-=b,++N,C!=null&&N<=L&&!(N%16)&&C(o,N);if(e(he<=_),T&ee&&(xe=Kt(J,T,N)),Y!=null)for(;de<he;)Se=h[de++],Y.X[(506832829*Se&4294967295)>>>Y.Mb]=Se}else{if(!(Se<je))break e;for(Ae=Se-280,e(Y!=null);de<he;)Se=h[de++],Y.X[(506832829*Se&4294967295)>>>Y.Mb]=Se;Se=he,e(!(Ae>>>(qe=Y).Xa)),h[Se]=qe.X[Ae],Ae=!0}Ae||e(O.h==q(O))}if(o.Pb&&O.h&&he<_)e(o.m.h),o.a=5,o.m=o.wd,o.$=o.xd,0<o.s.ua&&ye(o.s.vb,o.s.Wa);else{if(O.h)break e;C!=null&&C(o,N>L?L:N),o.a=0,o.$=he-p}return 1}return o.a=3,0}function hn(o){e(o!=null),o.vc=null,o.yc=null,o.Ya=null;var h=o.Wa;h!=null&&(h.X=null),o.vb=null,e(o!=null)}function $r(){var o=new uc;return o==null?null:(o.a=0,o.xb=Rh,Hr("Predictor","VP8LPredictors"),Hr("Predictor","VP8LPredictors_C"),Hr("PredictorAdd","VP8LPredictorsAdd"),Hr("PredictorAdd","VP8LPredictorsAdd_C"),Ho=We,vs=Ve,Qr=Ie,qr=Zt,Ri=mt,pi=hr,gi=vt,M.VP8LMapColor32b=Qs,M.VP8LMapColor8b=Ko,o)}function dn(o,h,p,b,_){var L=1,C=[o],N=[h],T=b.m,O=b.s,J=null,he=0;e:for(;;){if(p)for(;L&&ve(T,1);){var de=C,se=N,je=b,be=1,Y=je.m,ee=je.gc[je.ab],xe=ve(Y,2);if(je.Oc&1<<xe)L=0;else{switch(je.Oc|=1<<xe,ee.hc=xe,ee.Ea=de[0],ee.nc=se[0],ee.K=[null],++je.ab,e(4>=je.ab),xe){case 0:case 1:ee.b=ve(Y,3)+2,be=dn(ze(ee.Ea,ee.b),ze(ee.nc,ee.b),0,je,ee.K),ee.K=ee.K[0];break;case 3:var Ae,Se=ve(Y,8)+1,qe=16<Se?0:4<Se?1:2<Se?2:3;if(de[0]=ze(ee.Ea,qe),ee.b=qe,Ae=be=dn(Se,1,0,je,ee.K)){var De,st=Se,Ue=ee,It=1<<(8>>Ue.b),Nt=s(It);if(Nt==null)Ae=0;else{var kt=Ue.K[0],yt=Ue.w;for(Nt[0]=Ue.K[0][0],De=1;De<1*st;++De)Nt[De]=ke(kt[yt+De],Nt[De-1]);for(;De<4*It;++De)Nt[De]=0;Ue.K[0]=null,Ue.K[0]=Nt,Ae=1}}be=Ae;break;case 2:break;default:e(0)}L=be}}if(C=C[0],N=N[0],L&&ve(T,1)&&!(L=1<=(he=ve(T,4))&&11>=he)){b.a=3;break e}var Ot;if(Ot=L)t:{var Tt,pt,pr,en=b,gr=C,tn=N,Et=he,mn=p,vn=en.m,_r=en.s,Ir=[null],Wr=1,Pn=0,Zn=b1[Et];r:for(;;){if(mn&&ve(vn,1)){var Sr=ve(vn,3)+2,yi=ze(gr,Sr),_s=ze(tn,Sr),ia=yi*_s;if(!dn(yi,_s,0,en,Ir))break r;for(Ir=Ir[0],_r.xc=Sr,Tt=0;Tt<ia;++Tt){var Bi=Ir[Tt]>>8&65535;Ir[Tt]=Bi,Bi>=Wr&&(Wr=Bi+1)}}if(vn.h)break r;for(pt=0;5>pt;++pt){var er=Eh[pt];!pt&&0<Et&&(er+=1<<Et),Pn<er&&(Pn=er)}var wc=a(Wr*Zn,E),qh=Wr,zh=a(qh,U);if(zh==null)var al=null;else e(65536>=qh),al=zh;var so=s(Pn);if(al==null||so==null||wc==null){en.a=1;break r}var ol=wc;for(Tt=pr=0;Tt<Wr;++Tt){var Mn=al[Tt],sa=Mn.G,aa=Mn.H,Wh=0,ll=1,Vh=0;for(pt=0;5>pt;++pt){er=Eh[pt],sa[pt]=ol,aa[pt]=pr,!pt&&0<Et&&(er+=1<<Et);i:{var cl,xc=er,ul=en,ao=so,B1=ol,U1=pr,_c=0,Ui=ul.m,$1=ve(Ui,1);if(i(ao,0,0,xc),$1){var q1=ve(Ui,1)+1,z1=ve(Ui,1),Hh=ve(Ui,z1==0?1:8);ao[Hh]=1,q1==2&&(ao[Hh=ve(Ui,8)]=1);var hl=1}else{var Gh=s(19),Kh=ve(Ui,4)+4;if(19<Kh){ul.a=3;var dl=0;break i}for(cl=0;cl<Kh;++cl)Gh[m1[cl]]=ve(Ui,3);var Sc=void 0,oo=void 0,Jh=ul,W1=Gh,fl=xc,Yh=ao,jc=0,$i=Jh.m,Zh=8,Xh=a(128,E);n:for(;j(Xh,0,7,W1,19);){if(ve($i,1)){var V1=2+2*ve($i,3);if((Sc=2+ve($i,V1))>fl)break n}else Sc=fl;for(oo=0;oo<fl&&Sc--;){ne($i);var Qh=Xh[0+(127&D($i))];H($i,$i.u+Qh.g);var oa=Qh.value;if(16>oa)Yh[oo++]=oa,oa!=0&&(Zh=oa);else{var H1=oa==16,ed=oa-16,G1=p1[ed],td=ve($i,f1[ed])+G1;if(oo+td>fl)break n;for(var K1=H1?Zh:0;0<td--;)Yh[oo++]=K1}}jc=1;break n}jc||(Jh.a=3),hl=jc}(hl=hl&&!Ui.h)&&(_c=j(B1,U1,8,ao,xc)),hl&&_c!=0?dl=_c:(ul.a=3,dl=0)}if(dl==0)break r;if(ll&&g1[pt]==1&&(ll=ol[pr].g==0),Wh+=ol[pr].g,pr+=dl,3>=pt){var lo,Ac=so[0];for(lo=1;lo<er;++lo)so[lo]>Ac&&(Ac=so[lo]);Vh+=Ac}}if(Mn.nd=ll,Mn.Qb=0,ll&&(Mn.qb=(sa[3][aa[3]+0].value<<24|sa[1][aa[1]+0].value<<16|sa[2][aa[2]+0].value)>>>0,Wh==0&&256>sa[0][aa[0]+0].value&&(Mn.Qb=1,Mn.qb+=sa[0][aa[0]+0].value<<8)),Mn.jc=!Mn.Qb&&6>Vh,Mn.jc){var pl,wi=Mn;for(pl=0;pl<Pr;++pl){var qi=pl,zi=wi.pd[qi],gl=wi.G[0][wi.H[0]+qi];256<=gl.value?(zi.g=gl.g+256,zi.value=gl.value):(zi.g=0,zi.value=0,qi>>=Xt(gl,8,zi),qi>>=Xt(wi.G[1][wi.H[1]+qi],16,zi),qi>>=Xt(wi.G[2][wi.H[2]+qi],0,zi),Xt(wi.G[3][wi.H[3]+qi],24,zi))}}}_r.vc=Ir,_r.Wb=Wr,_r.Ya=al,_r.yc=wc,Ot=1;break t}Ot=0}if(!(L=Ot)){b.a=3;break e}if(0<he){if(O.ua=1<<he,!Xe(O.Wa,he)){b.a=1,L=0;break e}}else O.ua=0;var kc=b,rd=C,J1=N,Lc=kc.s,Cc=Lc.xc;if(kc.c=rd,kc.i=J1,Lc.md=ze(rd,Cc),Lc.wc=Cc==0?-1:(1<<Cc)-1,p){b.xb=k1;break e}if((J=s(C*N))==null){b.a=1,L=0;break e}L=(L=Yr(b,J,0,C,N,N,null))&&!T.h;break e}return L?(_!=null?_[0]=J:(e(J==null),e(p)),b.$=0,p||hn(O)):hn(O),L}function ui(o,h){var p=o.c*o.i,b=p+h+16*h;return e(o.c<=h),o.V=s(b),o.V==null?(o.Ta=null,o.Ua=0,o.a=1,0):(o.Ta=o.V,o.Ua=o.Ba+p+h,1)}function ki(o,h){var p=o.C,b=h-p,_=o.V,L=o.Ba+o.c*p;for(e(h<=o.l.o);0<b;){var C=16<b?16:b,N=o.l.ma,T=o.l.width,O=T*C,J=N.ca,he=N.tb+T*p,de=o.Ta,se=o.Ua;Er(o,C,_,L),ar(de,se,J,he,O),Kr(N,p,p+C,J,he,T),b-=C,_+=C*o.c,p+=C}e(p==h),o.C=o.Ma=h}function fn(){this.ub=this.yd=this.td=this.Rb=0}function Zr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Tn(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Fs(){this.Yb=function(){var o=[];return function h(p,b,_){for(var L=_[b],C=0;C<L&&(p.push(_.length>b+1?[]:0),!(_.length<b+1));C++)h(p[C],b+1,_)}(o,0,[3,11]),o}()}function os(){this.jb=s(3),this.Wc=u([4,8],Fs),this.Xc=u([4,17],Fs)}function Ra(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Li(){this.ld=this.La=this.dd=this.tc=0}function Ds(){this.Na=this.la=0}function Oa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ls(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function cs(){this.uc=this.M=this.Nb=0,this.wa=Array(new Li),this.Y=0,this.ya=Array(new ls),this.aa=0,this.l=new Pi}function Ci(){this.y=s(16),this.f=s(8),this.ea=s(8)}function us(){this.cb=this.a=0,this.sc="",this.m=new Oe,this.Od=new fn,this.Kc=new Zr,this.ed=new Ra,this.Qa=new Tn,this.Ic=this.$c=this.Aa=0,this.D=new cs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Oe),this.ia=0,this.pb=a(4,Oa),this.Pa=new os,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ci),this.Hd=0,this.rb=Array(new Ds),this.sb=0,this.wa=Array(new Li),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ls),this.L=this.aa=0,this.gd=u([4,2],Li),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Pi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fa(){var o=new us;return o!=null&&(o.a=0,o.sc="OK",o.cb=0,o.Xb=0,no||(no=Bs)),o}function Jt(o,h,p){return o.a==0&&(o.a=h,o.sc=p,o.cb=0),0}function Ms(o,h,p){return 3<=p&&o[h+0]==157&&o[h+1]==1&&o[h+2]==42}function hs(o,h){if(o==null)return 0;if(o.a=0,o.sc="OK",h==null)return Jt(o,2,"null VP8Io passed to VP8GetHeaders()");var p=h.data,b=h.w,_=h.ha;if(4>_)return Jt(o,7,"Truncated header.");var L=p[b+0]|p[b+1]<<8|p[b+2]<<16,C=o.Od;if(C.Rb=!(1&L),C.td=L>>1&7,C.yd=L>>4&1,C.ub=L>>5,3<C.td)return Jt(o,3,"Incorrect keyframe parameters.");if(!C.yd)return Jt(o,4,"Frame not displayable.");b+=3,_-=3;var N=o.Kc;if(C.Rb){if(7>_)return Jt(o,7,"cannot parse picture header");if(!Ms(p,b,_))return Jt(o,3,"Bad code word");N.c=16383&(p[b+4]<<8|p[b+3]),N.Td=p[b+4]>>6,N.i=16383&(p[b+6]<<8|p[b+5]),N.Ud=p[b+6]>>6,b+=7,_-=7,o.za=N.c+15>>4,o.Ub=N.i+15>>4,h.width=N.c,h.height=N.i,h.Da=0,h.j=0,h.v=0,h.va=h.width,h.o=h.height,h.da=0,h.ib=h.width,h.hb=h.height,h.U=h.width,h.T=h.height,i((L=o.Pa).jb,0,255,L.jb.length),e((L=o.Qa)!=null),L.Cb=0,L.Bb=0,L.Fb=1,i(L.Zb,0,0,L.Zb.length),i(L.Lb,0,0,L.Lb)}if(C.ub>_)return Jt(o,7,"bad partition length");X(L=o.m,p,b,C.ub),b+=C.ub,_-=C.ub,C.Rb&&(N.Ld=me(L),N.Kd=me(L)),N=o.Qa;var T,O=o.Pa;if(e(L!=null),e(N!=null),N.Cb=me(L),N.Cb){if(N.Bb=me(L),me(L)){for(N.Fb=me(L),T=0;4>T;++T)N.Zb[T]=me(L)?le(L,7):0;for(T=0;4>T;++T)N.Lb[T]=me(L)?le(L,6):0}if(N.Bb)for(T=0;3>T;++T)O.jb[T]=me(L)?ie(L,8):255}else N.Bb=0;if(L.Ka)return Jt(o,3,"cannot parse segment header");if((N=o.ed).zd=me(L),N.Tb=ie(L,6),N.wb=ie(L,3),N.Pc=me(L),N.Pc&&me(L)){for(O=0;4>O;++O)me(L)&&(N.vd[O]=le(L,6));for(O=0;4>O;++O)me(L)&&(N.od[O]=le(L,6))}if(o.L=N.Tb==0?0:N.zd?1:2,L.Ka)return Jt(o,3,"cannot parse filter header");var J=_;if(_=T=b,b=T+J,N=J,o.Xb=(1<<ie(o.m,2))-1,J<3*(O=o.Xb))p=7;else{for(T+=3*O,N-=3*O,J=0;J<O;++J){var he=p[_+0]|p[_+1]<<8|p[_+2]<<16;he>N&&(he=N),X(o.Jc[+J],p,T,he),T+=he,N-=he,_+=3}X(o.Jc[+O],p,T,N),p=T<b?0:5}if(p!=0)return Jt(o,p,"cannot parse partitions");for(p=ie(T=o.m,7),_=me(T)?le(T,4):0,b=me(T)?le(T,4):0,N=me(T)?le(T,4):0,O=me(T)?le(T,4):0,T=me(T)?le(T,4):0,J=o.Qa,he=0;4>he;++he){if(J.Cb){var de=J.Zb[he];J.Fb||(de+=p)}else{if(0<he){o.pb[he]=o.pb[0];continue}de=p}var se=o.pb[he];se.Sc[0]=vc[pn(de+_,127)],se.Sc[1]=bc[pn(de+0,127)],se.Eb[0]=2*vc[pn(de+b,127)],se.Eb[1]=101581*bc[pn(de+N,127)]>>16,8>se.Eb[1]&&(se.Eb[1]=8),se.Qc[0]=vc[pn(de+O,117)],se.Qc[1]=bc[pn(de+T,127)],se.lc=de+T}if(!C.Rb)return Jt(o,4,"Not a key frame.");for(me(L),C=o.Pa,p=0;4>p;++p){for(_=0;8>_;++_)for(b=0;3>b;++b)for(N=0;11>N;++N)O=pe(L,j1[p][_][b][N])?ie(L,8):_1[p][_][b][N],C.Wc[p][_].Yb[b][N]=O;for(_=0;17>_;++_)C.Xc[p][_]=C.Wc[p][A1[_]]}return o.kc=me(L),o.kc&&(o.Bd=ie(L,8)),o.cb=1}function Bs(o,h,p,b,_,L,C){var N=h[_].Yb[p];for(p=0;16>_;++_){if(!pe(o,N[p+0]))return _;for(;!pe(o,N[p+1]);)if(N=h[++_].Yb[0],p=0,_==16)return 16;var T=h[_+1].Yb;if(pe(o,N[p+2])){var O=o,J=0;if(pe(O,(de=N)[(he=p)+3]))if(pe(O,de[he+6])){for(N=0,he=2*(J=pe(O,de[he+8]))+(de=pe(O,de[he+9+J])),J=0,de=w1[he];de[N];++N)J+=J+pe(O,de[N]);J+=3+(8<<he)}else pe(O,de[he+7])?(J=7+2*pe(O,165),J+=pe(O,145)):J=5+pe(O,159);else J=pe(O,de[he+4])?3+pe(O,de[he+5]):2;N=T[2]}else J=1,N=T[1];T=C+x1[_],0>(O=o).b&&fe(O);var he,de=O.b,se=(he=O.Ca>>1)-(O.I>>de)>>31;--O.b,O.Ca+=se,O.Ca|=1,O.I-=(he+1&se)<<de,L[T]=((J^se)-se)*b[(0<_)+0]}return 16}function ds(o){var h=o.rb[o.sb-1];h.la=0,h.Na=0,i(o.zc,0,0,o.zc.length),o.ja=0}function Us(o,h){if(o==null)return 0;if(h==null)return Jt(o,2,"NULL VP8Io parameter in VP8Decode().");if(!o.cb&&!hs(o,h))return 0;if(e(o.cb),h.ac==null||h.ac(h)){h.ob&&(o.L=0);var p=sl[o.L];if(o.L==2?(o.yb=0,o.zb=0):(o.yb=h.v-p>>4,o.zb=h.j-p>>4,0>o.yb&&(o.yb=0),0>o.zb&&(o.zb=0)),o.Va=h.o+15+p>>4,o.Hb=h.va+15+p>>4,o.Hb>o.za&&(o.Hb=o.za),o.Va>o.Ub&&(o.Va=o.Ub),0<o.L){var b=o.ed;for(p=0;4>p;++p){var _;if(o.Qa.Cb){var L=o.Qa.Lb[p];o.Qa.Fb||(L+=b.Tb)}else L=b.Tb;for(_=0;1>=_;++_){var C=o.gd[p][_],N=L;if(b.Pc&&(N+=b.vd[0],_&&(N+=b.od[0])),0<(N=0>N?0:63<N?63:N)){var T=N;0<b.wb&&(T=4<b.wb?T>>2:T>>1)>9-b.wb&&(T=9-b.wb),1>T&&(T=1),C.dd=T,C.tc=2*N+T,C.ld=40<=N?2:15<=N?1:0}else C.tc=0;C.La=_}}}p=0}else Jt(o,6,"Frame setup failed"),p=o.a;if(p=p==0){if(p){o.$c=0,0<o.Aa||(o.Ic=M1);e:{p=o.Ic,b=4*(T=o.za);var O=32*T,J=T+1,he=0<o.L?T*(0<o.Aa?2:1):0,de=(o.Aa==2?2:1)*T;if((C=b+832+(_=3*(16*p+sl[o.L])/2*O)+(L=o.Fa!=null&&0<o.Fa.length?o.Kc.c*o.Kc.i:0))!=C)p=0;else{if(C>o.Vb){if(o.Vb=0,o.Ec=s(C),o.Fc=0,o.Ec==null){p=Jt(o,1,"no memory during frame initialization.");break e}o.Vb=C}C=o.Ec,N=o.Fc,o.Ac=C,o.Bc=N,N+=b,o.Gd=a(O,Ci),o.Hd=0,o.rb=a(J+1,Ds),o.sb=1,o.wa=he?a(he,Li):null,o.Y=0,o.D.Nb=0,o.D.wa=o.wa,o.D.Y=o.Y,0<o.Aa&&(o.D.Y+=T),e(!0),o.oc=C,o.pc=N,N+=832,o.ya=a(de,ls),o.aa=0,o.D.ya=o.ya,o.D.aa=o.aa,o.Aa==2&&(o.D.aa+=T),o.R=16*T,o.B=8*T,T=(O=sl[o.L])*o.R,O=O/2*o.B,o.sa=C,o.ta=N+T,o.qa=o.sa,o.ra=o.ta+16*p*o.R+O,o.Ha=o.qa,o.Ia=o.ra+8*p*o.B+O,o.$c=0,N+=_,o.mb=L?C:null,o.nb=L?N:null,e(N+L<=o.Fc+o.Vb),ds(o),i(o.Ac,o.Bc,0,b),p=1}}if(p){if(h.ka=0,h.y=o.sa,h.O=o.ta,h.f=o.qa,h.N=o.ra,h.ea=o.Ha,h.Vd=o.Ia,h.fa=o.R,h.Rc=o.B,h.F=null,h.J=0,!Yo){for(p=-255;255>=p;++p)br[255+p]=0>p?-p:p;for(p=-1020;1020>=p;++p)vi[1020+p]=-128>p?-128:127<p?127:p;for(p=-112;112>=p;++p)ro[112+p]=-16>p?-16:15<p?15:p;for(p=-255;510>=p;++p)na[255+p]=0>p?0:255<p?255:p;Yo=1}ea=Pt,mi=lt,Qa=ir,zr=qt,jn=wt,sr=Cr,ta=Ua,Jo=gs,eo=cc,bs=$a,ys=lc,Oi=Vs,ws=qa,ra=zo,xs=qo,Fi=Jn,to=fi,An=oc,Dn[0]=Kn,Dn[1]=hi,Dn[2]=tc,Dn[3]=rc,Dn[4]=Do,Dn[5]=zs,Dn[6]=Mo,Dn[7]=Da,Dn[8]=ic,Dn[9]=nc,Di[0]=Oo,Di[1]=Ql,Di[2]=di,Di[3]=$s,Di[4]=Tr,Di[5]=ec,Di[6]=Fo,bi[0]=Ii,bi[1]=Xl,bi[2]=sc,bi[3]=Ma,bi[4]=ps,bi[5]=ac,bi[6]=Ba,p=1}else p=0}p&&(p=function(se,je){for(se.M=0;se.M<se.Va;++se.M){var be,Y=se.Jc[se.M&se.Xb],ee=se.m,xe=se;for(be=0;be<xe.za;++be){var Ae=ee,Se=xe,qe=Se.Ac,De=Se.Bc+4*be,st=Se.zc,Ue=Se.ya[Se.aa+be];if(Se.Qa.Bb?Ue.$b=pe(Ae,Se.Pa.jb[0])?2+pe(Ae,Se.Pa.jb[2]):pe(Ae,Se.Pa.jb[1]):Ue.$b=0,Se.kc&&(Ue.Ad=pe(Ae,Se.Bd)),Ue.Za=!pe(Ae,145)+0,Ue.Za){var It=Ue.Ob,Nt=0;for(Se=0;4>Se;++Se){var kt,yt=st[0+Se];for(kt=0;4>kt;++kt){yt=S1[qe[De+kt]][yt];for(var Ot=Th[pe(Ae,yt[0])];0<Ot;)Ot=Th[2*Ot+pe(Ae,yt[Ot])];yt=-Ot,qe[De+kt]=yt}r(It,Nt,qe,De,4),Nt+=4,st[0+Se]=yt}}else yt=pe(Ae,156)?pe(Ae,128)?1:3:pe(Ae,163)?2:0,Ue.Ob[0]=yt,i(qe,De,yt,4),i(st,0,yt,4);Ue.Dd=pe(Ae,142)?pe(Ae,114)?pe(Ae,183)?1:3:2:0}if(xe.m.Ka)return Jt(se,7,"Premature end-of-partition0 encountered.");for(;se.ja<se.za;++se.ja){if(xe=Y,Ae=(ee=se).rb[ee.sb-1],qe=ee.rb[ee.sb+ee.ja],be=ee.ya[ee.aa+ee.ja],De=ee.kc?be.Ad:0)Ae.la=qe.la=0,be.Za||(Ae.Na=qe.Na=0),be.Hc=0,be.Gc=0,be.ia=0;else{var Tt,pt;if(Ae=qe,qe=xe,De=ee.Pa.Xc,st=ee.ya[ee.aa+ee.ja],Ue=ee.pb[st.$b],Se=st.ad,It=0,Nt=ee.rb[ee.sb-1],yt=kt=0,i(Se,It,0,384),st.Za)var pr=0,en=De[3];else{Ot=s(16);var gr=Ae.Na+Nt.Na;if(gr=no(qe,De[1],gr,Ue.Eb,0,Ot,0),Ae.Na=Nt.Na=(0<gr)+0,1<gr)ea(Ot,0,Se,It);else{var tn=Ot[0]+3>>3;for(Ot=0;256>Ot;Ot+=16)Se[It+Ot]=tn}pr=1,en=De[0]}var Et=15&Ae.la,mn=15&Nt.la;for(Ot=0;4>Ot;++Ot){var vn=1&mn;for(tn=pt=0;4>tn;++tn)Et=Et>>1|(vn=(gr=no(qe,en,gr=vn+(1&Et),Ue.Sc,pr,Se,It))>pr)<<7,pt=pt<<2|(3<gr?3:1<gr?2:Se[It+0]!=0),It+=16;Et>>=4,mn=mn>>1|vn<<7,kt=(kt<<8|pt)>>>0}for(en=Et,pr=mn>>4,Tt=0;4>Tt;Tt+=2){for(pt=0,Et=Ae.la>>4+Tt,mn=Nt.la>>4+Tt,Ot=0;2>Ot;++Ot){for(vn=1&mn,tn=0;2>tn;++tn)gr=vn+(1&Et),Et=Et>>1|(vn=0<(gr=no(qe,De[2],gr,Ue.Qc,0,Se,It)))<<3,pt=pt<<2|(3<gr?3:1<gr?2:Se[It+0]!=0),It+=16;Et>>=2,mn=mn>>1|vn<<5}yt|=pt<<4*Tt,en|=Et<<4<<Tt,pr|=(240&mn)<<Tt}Ae.la=en,Nt.la=pr,st.Hc=kt,st.Gc=yt,st.ia=43690&yt?0:Ue.ia,De=!(kt|yt)}if(0<ee.L&&(ee.wa[ee.Y+ee.ja]=ee.gd[be.$b][be.Za],ee.wa[ee.Y+ee.ja].La|=!De),xe.Ka)return Jt(se,7,"Premature end-of-file encountered.")}if(ds(se),ee=je,xe=1,be=(Y=se).D,Ae=0<Y.L&&Y.M>=Y.zb&&Y.M<=Y.Va,Y.Aa==0)e:{if(be.M=Y.M,be.uc=Ae,Ka(Y,be),xe=1,be=(pt=Y.D).Nb,Ae=(yt=sl[Y.L])*Y.R,qe=yt/2*Y.B,Ot=16*be*Y.R,tn=8*be*Y.B,De=Y.sa,st=Y.ta-Ae+Ot,Ue=Y.qa,Se=Y.ra-qe+tn,It=Y.Ha,Nt=Y.Ia-qe+tn,mn=(Et=pt.M)==0,kt=Et>=Y.Va-1,Y.Aa==2&&Ka(Y,pt),pt.uc)for(vn=(gr=Y).D.M,e(gr.D.uc),pt=gr.yb;pt<gr.Hb;++pt){pr=pt,en=vn;var _r=(Ir=(er=gr).D).Nb;Tt=er.R;var Ir=Ir.wa[Ir.Y+pr],Wr=er.sa,Pn=er.ta+16*_r*Tt+16*pr,Zn=Ir.dd,Sr=Ir.tc;if(Sr!=0)if(e(3<=Sr),er.L==1)0<pr&&Fi(Wr,Pn,Tt,Sr+4),Ir.La&&An(Wr,Pn,Tt,Sr),0<en&&xs(Wr,Pn,Tt,Sr+4),Ir.La&&to(Wr,Pn,Tt,Sr);else{var yi=er.B,_s=er.qa,ia=er.ra+8*_r*yi+8*pr,Bi=er.Ha,er=er.Ia+8*_r*yi+8*pr;_r=Ir.ld,0<pr&&(Jo(Wr,Pn,Tt,Sr+4,Zn,_r),bs(_s,ia,Bi,er,yi,Sr+4,Zn,_r)),Ir.La&&(Oi(Wr,Pn,Tt,Sr,Zn,_r),ra(_s,ia,Bi,er,yi,Sr,Zn,_r)),0<en&&(ta(Wr,Pn,Tt,Sr+4,Zn,_r),eo(_s,ia,Bi,er,yi,Sr+4,Zn,_r)),Ir.La&&(ys(Wr,Pn,Tt,Sr,Zn,_r),ws(_s,ia,Bi,er,yi,Sr,Zn,_r))}}if(Y.ia&&alert("todo:DitherRow"),ee.put!=null){if(pt=16*Et,Et=16*(Et+1),mn?(ee.y=Y.sa,ee.O=Y.ta+Ot,ee.f=Y.qa,ee.N=Y.ra+tn,ee.ea=Y.Ha,ee.W=Y.Ia+tn):(pt-=yt,ee.y=De,ee.O=st,ee.f=Ue,ee.N=Se,ee.ea=It,ee.W=Nt),kt||(Et-=yt),Et>ee.o&&(Et=ee.o),ee.F=null,ee.J=null,Y.Fa!=null&&0<Y.Fa.length&&pt<Et&&(ee.J=Ha(Y,ee,pt,Et-pt),ee.F=Y.mb,ee.F==null&&ee.F.length==0)){xe=Jt(Y,3,"Could not decode alpha data.");break e}pt<ee.j&&(yt=ee.j-pt,pt=ee.j,e(!(1&yt)),ee.O+=Y.R*yt,ee.N+=Y.B*(yt>>1),ee.W+=Y.B*(yt>>1),ee.F!=null&&(ee.J+=ee.width*yt)),pt<Et&&(ee.O+=ee.v,ee.N+=ee.v>>1,ee.W+=ee.v>>1,ee.F!=null&&(ee.J+=ee.v),ee.ka=pt-ee.j,ee.U=ee.va-ee.v,ee.T=Et-pt,xe=ee.put(ee))}be+1!=Y.Ic||kt||(r(Y.sa,Y.ta-Ae,De,st+16*Y.R,Ae),r(Y.qa,Y.ra-qe,Ue,Se+8*Y.B,qe),r(Y.Ha,Y.Ia-qe,It,Nt+8*Y.B,qe))}if(!xe)return Jt(se,6,"Output aborted.")}return 1}(o,h)),h.bc!=null&&h.bc(h),p&=1}return p?(o.cb=0,p):0}function ue(o,h,p,b,_){_=o[h+p+32*b]+(_>>3),o[h+p+32*b]=-256&_?0>_?0:255:_}function Ye(o,h,p,b,_,L){ue(o,h,0,p,b+_),ue(o,h,1,p,b+L),ue(o,h,2,p,b-L),ue(o,h,3,p,b-_)}function Ke(o){return(20091*o>>16)+o}function rt(o,h,p,b){var _,L=0,C=s(16);for(_=0;4>_;++_){var N=o[h+0]+o[h+8],T=o[h+0]-o[h+8],O=(35468*o[h+4]>>16)-Ke(o[h+12]),J=Ke(o[h+4])+(35468*o[h+12]>>16);C[L+0]=N+J,C[L+1]=T+O,C[L+2]=T-O,C[L+3]=N-J,L+=4,h++}for(_=L=0;4>_;++_)N=(o=C[L+0]+4)+C[L+8],T=o-C[L+8],O=(35468*C[L+4]>>16)-Ke(C[L+12]),ue(p,b,0,0,N+(J=Ke(C[L+4])+(35468*C[L+12]>>16))),ue(p,b,1,0,T+O),ue(p,b,2,0,T-O),ue(p,b,3,0,N-J),L++,b+=32}function Cr(o,h,p,b){var _=o[h+0]+4,L=35468*o[h+4]>>16,C=Ke(o[h+4]),N=35468*o[h+1]>>16;Ye(p,b,0,_+C,o=Ke(o[h+1]),N),Ye(p,b,1,_+L,o,N),Ye(p,b,2,_-L,o,N),Ye(p,b,3,_-C,o,N)}function lt(o,h,p,b,_){rt(o,h,p,b),_&&rt(o,h+16,p,b+4)}function ir(o,h,p,b){mi(o,h+0,p,b,1),mi(o,h+32,p,b+128,1)}function qt(o,h,p,b){var _;for(o=o[h+0]+4,_=0;4>_;++_)for(h=0;4>h;++h)ue(p,b,h,_,o)}function wt(o,h,p,b){o[h+0]&&zr(o,h+0,p,b),o[h+16]&&zr(o,h+16,p,b+4),o[h+32]&&zr(o,h+32,p,b+128),o[h+48]&&zr(o,h+48,p,b+128+4)}function Pt(o,h,p,b){var _,L=s(16);for(_=0;4>_;++_){var C=o[h+0+_]+o[h+12+_],N=o[h+4+_]+o[h+8+_],T=o[h+4+_]-o[h+8+_],O=o[h+0+_]-o[h+12+_];L[0+_]=C+N,L[8+_]=C-N,L[4+_]=O+T,L[12+_]=O-T}for(_=0;4>_;++_)C=(o=L[0+4*_]+3)+L[3+4*_],N=L[1+4*_]+L[2+4*_],T=L[1+4*_]-L[2+4*_],O=o-L[3+4*_],p[b+0]=C+N>>3,p[b+16]=O+T>>3,p[b+32]=C-N>>3,p[b+48]=O-T>>3,b+=64}function Rn(o,h,p){var b,_=h-32,L=gn,C=255-o[_-1];for(b=0;b<p;++b){var N,T=L,O=C+o[h-1];for(N=0;N<p;++N)o[h+N]=T[O+o[_+N]];h+=32}}function hi(o,h){Rn(o,h,4)}function Xl(o,h){Rn(o,h,8)}function Ql(o,h){Rn(o,h,16)}function di(o,h){var p;for(p=0;16>p;++p)r(o,h+32*p,o,h-32,16)}function $s(o,h){var p;for(p=16;0<p;--p)i(o,h,o[h-1],16),h+=32}function qs(o,h,p){var b;for(b=0;16>b;++b)i(h,p+32*b,o,16)}function Oo(o,h){var p,b=16;for(p=0;16>p;++p)b+=o[h-1+32*p]+o[h+p-32];qs(b>>5,o,h)}function Tr(o,h){var p,b=8;for(p=0;16>p;++p)b+=o[h-1+32*p];qs(b>>4,o,h)}function ec(o,h){var p,b=8;for(p=0;16>p;++p)b+=o[h+p-32];qs(b>>4,o,h)}function Fo(o,h){qs(128,o,h)}function ut(o,h,p){return o+2*h+p+2>>2}function tc(o,h){var p,b=h-32;for(b=new Uint8Array([ut(o[b-1],o[b+0],o[b+1]),ut(o[b+0],o[b+1],o[b+2]),ut(o[b+1],o[b+2],o[b+3]),ut(o[b+2],o[b+3],o[b+4])]),p=0;4>p;++p)r(o,h+32*p,b,0,b.length)}function rc(o,h){var p=o[h-1],b=o[h-1+32],_=o[h-1+64],L=o[h-1+96];_e(o,h+0,16843009*ut(o[h-1-32],p,b)),_e(o,h+32,16843009*ut(p,b,_)),_e(o,h+64,16843009*ut(b,_,L)),_e(o,h+96,16843009*ut(_,L,L))}function Kn(o,h){var p,b=4;for(p=0;4>p;++p)b+=o[h+p-32]+o[h-1+32*p];for(b>>=3,p=0;4>p;++p)i(o,h+32*p,b,4)}function Do(o,h){var p=o[h-1+0],b=o[h-1+32],_=o[h-1+64],L=o[h-1-32],C=o[h+0-32],N=o[h+1-32],T=o[h+2-32],O=o[h+3-32];o[h+0+96]=ut(b,_,o[h-1+96]),o[h+1+96]=o[h+0+64]=ut(p,b,_),o[h+2+96]=o[h+1+64]=o[h+0+32]=ut(L,p,b),o[h+3+96]=o[h+2+64]=o[h+1+32]=o[h+0+0]=ut(C,L,p),o[h+3+64]=o[h+2+32]=o[h+1+0]=ut(N,C,L),o[h+3+32]=o[h+2+0]=ut(T,N,C),o[h+3+0]=ut(O,T,N)}function Mo(o,h){var p=o[h+1-32],b=o[h+2-32],_=o[h+3-32],L=o[h+4-32],C=o[h+5-32],N=o[h+6-32],T=o[h+7-32];o[h+0+0]=ut(o[h+0-32],p,b),o[h+1+0]=o[h+0+32]=ut(p,b,_),o[h+2+0]=o[h+1+32]=o[h+0+64]=ut(b,_,L),o[h+3+0]=o[h+2+32]=o[h+1+64]=o[h+0+96]=ut(_,L,C),o[h+3+32]=o[h+2+64]=o[h+1+96]=ut(L,C,N),o[h+3+64]=o[h+2+96]=ut(C,N,T),o[h+3+96]=ut(N,T,T)}function zs(o,h){var p=o[h-1+0],b=o[h-1+32],_=o[h-1+64],L=o[h-1-32],C=o[h+0-32],N=o[h+1-32],T=o[h+2-32],O=o[h+3-32];o[h+0+0]=o[h+1+64]=L+C+1>>1,o[h+1+0]=o[h+2+64]=C+N+1>>1,o[h+2+0]=o[h+3+64]=N+T+1>>1,o[h+3+0]=T+O+1>>1,o[h+0+96]=ut(_,b,p),o[h+0+64]=ut(b,p,L),o[h+0+32]=o[h+1+96]=ut(p,L,C),o[h+1+32]=o[h+2+96]=ut(L,C,N),o[h+2+32]=o[h+3+96]=ut(C,N,T),o[h+3+32]=ut(N,T,O)}function Da(o,h){var p=o[h+0-32],b=o[h+1-32],_=o[h+2-32],L=o[h+3-32],C=o[h+4-32],N=o[h+5-32],T=o[h+6-32],O=o[h+7-32];o[h+0+0]=p+b+1>>1,o[h+1+0]=o[h+0+64]=b+_+1>>1,o[h+2+0]=o[h+1+64]=_+L+1>>1,o[h+3+0]=o[h+2+64]=L+C+1>>1,o[h+0+32]=ut(p,b,_),o[h+1+32]=o[h+0+96]=ut(b,_,L),o[h+2+32]=o[h+1+96]=ut(_,L,C),o[h+3+32]=o[h+2+96]=ut(L,C,N),o[h+3+64]=ut(C,N,T),o[h+3+96]=ut(N,T,O)}function nc(o,h){var p=o[h-1+0],b=o[h-1+32],_=o[h-1+64],L=o[h-1+96];o[h+0+0]=p+b+1>>1,o[h+2+0]=o[h+0+32]=b+_+1>>1,o[h+2+32]=o[h+0+64]=_+L+1>>1,o[h+1+0]=ut(p,b,_),o[h+3+0]=o[h+1+32]=ut(b,_,L),o[h+3+32]=o[h+1+64]=ut(_,L,L),o[h+3+64]=o[h+2+64]=o[h+0+96]=o[h+1+96]=o[h+2+96]=o[h+3+96]=L}function ic(o,h){var p=o[h-1+0],b=o[h-1+32],_=o[h-1+64],L=o[h-1+96],C=o[h-1-32],N=o[h+0-32],T=o[h+1-32],O=o[h+2-32];o[h+0+0]=o[h+2+32]=p+C+1>>1,o[h+0+32]=o[h+2+64]=b+p+1>>1,o[h+0+64]=o[h+2+96]=_+b+1>>1,o[h+0+96]=L+_+1>>1,o[h+3+0]=ut(N,T,O),o[h+2+0]=ut(C,N,T),o[h+1+0]=o[h+3+32]=ut(p,C,N),o[h+1+32]=o[h+3+64]=ut(b,p,C),o[h+1+64]=o[h+3+96]=ut(_,b,p),o[h+1+96]=ut(L,_,b)}function sc(o,h){var p;for(p=0;8>p;++p)r(o,h+32*p,o,h-32,8)}function Ma(o,h){var p;for(p=0;8>p;++p)i(o,h,o[h-1],8),h+=32}function fs(o,h,p){var b;for(b=0;8>b;++b)i(h,p+32*b,o,8)}function Ii(o,h){var p,b=8;for(p=0;8>p;++p)b+=o[h+p-32]+o[h-1+32*p];fs(b>>4,o,h)}function ac(o,h){var p,b=4;for(p=0;8>p;++p)b+=o[h+p-32];fs(b>>3,o,h)}function ps(o,h){var p,b=4;for(p=0;8>p;++p)b+=o[h-1+32*p];fs(b>>3,o,h)}function Ba(o,h){fs(128,o,h)}function Ws(o,h,p){var b=o[h-p],_=o[h+0],L=3*(_-b)+dc[1020+o[h-2*p]-o[h+p]],C=Zo[112+(L+4>>3)];o[h-p]=gn[255+b+Zo[112+(L+3>>3)]],o[h+0]=gn[255+_-C]}function Bo(o,h,p,b){var _=o[h+0],L=o[h+p];return Ln[255+o[h-2*p]-o[h-p]]>b||Ln[255+L-_]>b}function Uo(o,h,p,b){return 4*Ln[255+o[h-p]-o[h+0]]+Ln[255+o[h-2*p]-o[h+p]]<=b}function $o(o,h,p,b,_){var L=o[h-3*p],C=o[h-2*p],N=o[h-p],T=o[h+0],O=o[h+p],J=o[h+2*p],he=o[h+3*p];return 4*Ln[255+N-T]+Ln[255+C-O]>b?0:Ln[255+o[h-4*p]-L]<=_&&Ln[255+L-C]<=_&&Ln[255+C-N]<=_&&Ln[255+he-J]<=_&&Ln[255+J-O]<=_&&Ln[255+O-T]<=_}function qo(o,h,p,b){var _=2*b+1;for(b=0;16>b;++b)Uo(o,h+b,p,_)&&Ws(o,h+b,p)}function Jn(o,h,p,b){var _=2*b+1;for(b=0;16>b;++b)Uo(o,h+b*p,1,_)&&Ws(o,h+b*p,1)}function fi(o,h,p,b){var _;for(_=3;0<_;--_)qo(o,h+=4*p,p,b)}function oc(o,h,p,b){var _;for(_=3;0<_;--_)Jn(o,h+=4,p,b)}function Ni(o,h,p,b,_,L,C,N){for(L=2*L+1;0<_--;){if($o(o,h,p,L,C))if(Bo(o,h,p,N))Ws(o,h,p);else{var T=o,O=h,J=p,he=T[O-2*J],de=T[O-J],se=T[O+0],je=T[O+J],be=T[O+2*J],Y=27*(xe=dc[1020+3*(se-de)+dc[1020+he-je]])+63>>7,ee=18*xe+63>>7,xe=9*xe+63>>7;T[O-3*J]=gn[255+T[O-3*J]+xe],T[O-2*J]=gn[255+he+ee],T[O-J]=gn[255+de+Y],T[O+0]=gn[255+se-Y],T[O+J]=gn[255+je-ee],T[O+2*J]=gn[255+be-xe]}h+=b}}function On(o,h,p,b,_,L,C,N){for(L=2*L+1;0<_--;){if($o(o,h,p,L,C))if(Bo(o,h,p,N))Ws(o,h,p);else{var T=o,O=h,J=p,he=T[O-J],de=T[O+0],se=T[O+J],je=Zo[112+((be=3*(de-he))+4>>3)],be=Zo[112+(be+3>>3)],Y=je+1>>1;T[O-2*J]=gn[255+T[O-2*J]+Y],T[O-J]=gn[255+he+be],T[O+0]=gn[255+de-je],T[O+J]=gn[255+se-Y]}h+=b}}function Ua(o,h,p,b,_,L){Ni(o,h,p,1,16,b,_,L)}function gs(o,h,p,b,_,L){Ni(o,h,1,p,16,b,_,L)}function lc(o,h,p,b,_,L){var C;for(C=3;0<C;--C)On(o,h+=4*p,p,1,16,b,_,L)}function Vs(o,h,p,b,_,L){var C;for(C=3;0<C;--C)On(o,h+=4,1,p,16,b,_,L)}function cc(o,h,p,b,_,L,C,N){Ni(o,h,_,1,8,L,C,N),Ni(p,b,_,1,8,L,C,N)}function $a(o,h,p,b,_,L,C,N){Ni(o,h,1,_,8,L,C,N),Ni(p,b,1,_,8,L,C,N)}function qa(o,h,p,b,_,L,C,N){On(o,h+4*_,_,1,8,L,C,N),On(p,b+4*_,_,1,8,L,C,N)}function zo(o,h,p,b,_,L,C,N){On(o,h+4,1,_,8,L,C,N),On(p,b+4,1,_,8,L,C,N)}function Hs(){this.ba=new kr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new $t,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function za(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Wo(){this.ua=0,this.Wa=new $,this.vb=new $,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new U,this.yc=new E}function uc(){this.xb=this.a=0,this.l=new Pi,this.ca=new kr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Wo,this.ab=0,this.gc=a(4,Wa),this.Oc=0}function Gs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Pi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ms(o,h,p,b,_,L,C){for(o=o==null?0:o[h+0],h=0;h<C;++h)_[L+h]=o+p[b+h]&255,o=_[L+h]}function Va(o,h,p,b,_,L,C){var N;if(o==null)ms(null,null,p,b,_,L,C);else for(N=0;N<C;++N)_[L+N]=o[h+N]+p[b+N]&255}function Ei(o,h,p,b,_,L,C){if(o==null)ms(null,null,p,b,_,L,C);else{var N,T=o[h+0],O=T,J=T;for(N=0;N<C;++N)O=J+(T=o[h+N])-O,J=p[b+N]+(-256&O?0>O?0:255:O)&255,O=T,_[L+N]=J}}function Ha(o,h,p,b){var _=h.width,L=h.o;if(e(o!=null&&h!=null),0>p||0>=b||p+b>L)return null;if(!o.Cc){if(o.ga==null){var C;if(o.ga=new Gs,(C=o.ga==null)||(C=h.width*h.o,e(o.Gb.length==0),o.Gb=s(C),o.Uc=0,o.Gb==null?C=0:(o.mb=o.Gb,o.nb=o.Uc,o.rc=null,C=1),C=!C),!C){C=o.ga;var N=o.Fa,T=o.P,O=o.qc,J=o.mb,he=o.nb,de=T+1,se=O-1,je=C.l;if(e(N!=null&&J!=null&&h!=null),Mi[0]=null,Mi[1]=ms,Mi[2]=Va,Mi[3]=Ei,C.ca=J,C.tb=he,C.c=h.width,C.i=h.height,e(0<C.c&&0<C.i),1>=O)h=0;else if(C.$a=N[T+0]>>0&3,C.Z=N[T+0]>>2&3,C.Lc=N[T+0]>>4&3,T=N[T+0]>>6&3,0>C.$a||1<C.$a||4<=C.Z||1<C.Lc||T)h=0;else if(je.put=ln,je.ac=dr,je.bc=cn,je.ma=C,je.width=h.width,je.height=h.height,je.Da=h.Da,je.v=h.v,je.va=h.va,je.j=h.j,je.o=h.o,C.$a)e:{e(C.$a==1),h=$r();t:for(;;){if(h==null){h=0;break e}if(e(C!=null),C.mc=h,h.c=C.c,h.i=C.i,h.l=C.l,h.l.ma=C,h.l.width=C.c,h.l.height=C.i,h.a=0,Q(h.m,N,de,se),!dn(C.c,C.i,1,h,null)||(h.ab==1&&h.gc[0].hc==3&&_n(h.s)?(C.ic=1,N=h.c*h.i,h.Ta=null,h.Ua=0,h.V=s(N),h.Ba=0,h.V==null?(h.a=1,h=0):h=1):(C.ic=0,h=ui(h,C.c)),!h))break t;h=1;break e}C.mc=null,h=0}else h=se>=C.c*C.i;C=!h}if(C)return null;o.ga.Lc!=1?o.Ga=0:b=L-p}e(o.ga!=null),e(p+b<=L);e:{if(h=(N=o.ga).c,L=N.l.o,N.$a==0){if(de=o.rc,se=o.Vc,je=o.Fa,T=o.P+1+p*h,O=o.mb,J=o.nb+p*h,e(T<=o.P+o.qc),N.Z!=0)for(e(Mi[N.Z]!=null),C=0;C<b;++C)Mi[N.Z](de,se,je,T,O,J,h),de=O,se=J,J+=h,T+=h;else for(C=0;C<b;++C)r(O,J,je,T,h),de=O,se=J,J+=h,T+=h;o.rc=de,o.Vc=se}else{if(e(N.mc!=null),h=p+b,e((C=N.mc)!=null),e(h<=C.i),C.C>=h)h=1;else if(N.ic||oe(),N.ic){N=C.V,de=C.Ba,se=C.c;var be=C.i,Y=(je=1,T=C.$/se,O=C.$%se,J=C.m,he=C.s,C.$),ee=se*be,xe=se*h,Ae=he.wc,Se=Y<xe?Kt(he,O,T):null;e(Y<=ee),e(h<=be),e(_n(he));t:for(;;){for(;!J.h&&Y<xe;){if(O&Ae||(Se=Kt(he,O,T)),e(Se!=null),ne(J),256>(be=Lr(Se.G[0],Se.H[0],J)))N[de+Y]=be,++Y,++O>=se&&(O=0,++T<=h&&!(T%16)&&Jr(C,T));else{if(!(280>be)){je=0;break t}be=Gr(be-256,J);var qe,De=Lr(Se.G[4],Se.H[4],J);if(ne(J),!(Y>=(De=un(se,De=Gr(De,J)))&&ee-Y>=be)){je=0;break t}for(qe=0;qe<be;++qe)N[de+Y+qe]=N[de+Y+qe-De];for(Y+=be,O+=be;O>=se;)O-=se,++T<=h&&!(T%16)&&Jr(C,T);Y<xe&&O&Ae&&(Se=Kt(he,O,T))}e(J.h==q(J))}Jr(C,T>h?h:T);break t}!je||J.h&&Y<ee?(je=0,C.a=J.h?5:3):C.$=Y,h=je}else h=Yr(C,C.V,C.Ba,C.c,C.i,h,ki);if(!h){b=0;break e}}p+b>=L&&(o.Cc=1),b=1}if(!b)return null;if(o.Cc&&((b=o.ga)!=null&&(b.mc=null),o.ga=null,0<o.Ga))return alert("todo:WebPDequantizeLevels"),null}return o.nb+p*_}function d(o,h,p,b,_,L){for(;0<_--;){var C,N=o,T=h+(p?1:0),O=o,J=h+(p?0:3);for(C=0;C<b;++C){var he=O[J+4*C];he!=255&&(he*=32897,N[T+4*C+0]=N[T+4*C+0]*he>>23,N[T+4*C+1]=N[T+4*C+1]*he>>23,N[T+4*C+2]=N[T+4*C+2]*he>>23)}h+=L}}function S(o,h,p,b,_){for(;0<b--;){var L;for(L=0;L<p;++L){var C=o[h+2*L+0],N=15&(O=o[h+2*L+1]),T=4369*N,O=(240&O|O>>4)*T>>16;o[h+2*L+0]=(240&C|C>>4)*T>>16&240|(15&C|C<<4)*T>>16>>4&15,o[h+2*L+1]=240&O|N}h+=_}}function B(o,h,p,b,_,L,C,N){var T,O,J=255;for(O=0;O<_;++O){for(T=0;T<b;++T){var he=o[h+T];L[C+4*T]=he,J&=he}h+=p,C+=N}return J!=255}function K(o,h,p,b,_){var L;for(L=0;L<_;++L)p[b+L]=o[h+L]>>8}function oe(){kn=d,Mt=S,Bt=B,ar=K}function we(o,h,p){M[o]=function(b,_,L,C,N,T,O,J,he,de,se,je,be,Y,ee,xe,Ae){var Se,qe=Ae-1>>1,De=N[T+0]|O[J+0]<<16,st=he[de+0]|se[je+0]<<16;e(b!=null);var Ue=3*De+st+131074>>2;for(h(b[_+0],255&Ue,Ue>>16,be,Y),L!=null&&(Ue=3*st+De+131074>>2,h(L[C+0],255&Ue,Ue>>16,ee,xe)),Se=1;Se<=qe;++Se){var It=N[T+Se]|O[J+Se]<<16,Nt=he[de+Se]|se[je+Se]<<16,kt=De+It+st+Nt+524296,yt=kt+2*(It+st)>>3;Ue=yt+De>>1,De=(kt=kt+2*(De+Nt)>>3)+It>>1,h(b[_+2*Se-1],255&Ue,Ue>>16,be,Y+(2*Se-1)*p),h(b[_+2*Se-0],255&De,De>>16,be,Y+(2*Se-0)*p),L!=null&&(Ue=kt+st>>1,De=yt+Nt>>1,h(L[C+2*Se-1],255&Ue,Ue>>16,ee,xe+(2*Se-1)*p),h(L[C+2*Se+0],255&De,De>>16,ee,xe+(2*Se+0)*p)),De=It,st=Nt}1&Ae||(Ue=3*De+st+131074>>2,h(b[_+Ae-1],255&Ue,Ue>>16,be,Y+(Ae-1)*p),L!=null&&(Ue=3*st+De+131074>>2,h(L[C+Ae-1],255&Ue,Ue>>16,ee,xe+(Ae-1)*p)))}}function Ce(){Cn[Xo]=L1,Cn[Qo]=Oh,Cn[Ih]=C1,Cn[el]=Fh,Cn[tl]=Dh,Cn[fc]=Mh,Cn[Nh]=P1,Cn[pc]=Oh,Cn[gc]=Fh,Cn[rl]=Dh,Cn[mc]=Mh}function $e(o){return o&-16384?0>o?0:255:o>>I1}function tt(o,h){return $e((19077*o>>8)+(26149*h>>8)-14234)}function ft(o,h,p){return $e((19077*o>>8)-(6419*h>>8)-(13320*p>>8)+8708)}function ht(o,h){return $e((19077*o>>8)+(33050*h>>8)-17685)}function xt(o,h,p,b,_){b[_+0]=tt(o,p),b[_+1]=ft(o,h,p),b[_+2]=ht(o,h)}function Yt(o,h,p,b,_){b[_+0]=ht(o,h),b[_+1]=ft(o,h,p),b[_+2]=tt(o,p)}function Qt(o,h,p,b,_){var L=ft(o,h,p);h=L<<3&224|ht(o,h)>>3,b[_+0]=248&tt(o,p)|L>>5,b[_+1]=h}function fr(o,h,p,b,_){var L=240&ht(o,h)|15;b[_+0]=240&tt(o,p)|ft(o,h,p)>>4,b[_+1]=L}function Rr(o,h,p,b,_){b[_+0]=255,xt(o,h,p,b,_+1)}function xr(o,h,p,b,_){Yt(o,h,p,b,_),b[_+3]=255}function Fn(o,h,p,b,_){xt(o,h,p,b,_),b[_+3]=255}function pn(o,h){return 0>o?0:o>h?h:o}function Yn(o,h,p){M[o]=function(b,_,L,C,N,T,O,J,he){for(var de=J+(-2&he)*p;J!=de;)h(b[_+0],L[C+0],N[T+0],O,J),h(b[_+1],L[C+0],N[T+0],O,J+p),_+=2,++C,++T,J+=2*p;1&he&&h(b[_+0],L[C+0],N[T+0],O,J)}}function Vo(o,h,p){return p==0?o==0?h==0?6:5:h==0?4:0:p}function Ga(o,h,p,b,_){switch(o>>>30){case 3:mi(h,p,b,_,0);break;case 2:sr(h,p,b,_);break;case 1:zr(h,p,b,_)}}function Ka(o,h){var p,b,_=h.M,L=h.Nb,C=o.oc,N=o.pc+40,T=o.oc,O=o.pc+584,J=o.oc,he=o.pc+600;for(p=0;16>p;++p)C[N+32*p-1]=129;for(p=0;8>p;++p)T[O+32*p-1]=129,J[he+32*p-1]=129;for(0<_?C[N-1-32]=T[O-1-32]=J[he-1-32]=129:(i(C,N-32-1,127,21),i(T,O-32-1,127,9),i(J,he-32-1,127,9)),b=0;b<o.za;++b){var de=h.ya[h.aa+b];if(0<b){for(p=-1;16>p;++p)r(C,N+32*p-4,C,N+32*p+12,4);for(p=-1;8>p;++p)r(T,O+32*p-4,T,O+32*p+4,4),r(J,he+32*p-4,J,he+32*p+4,4)}var se=o.Gd,je=o.Hd+b,be=de.ad,Y=de.Hc;if(0<_&&(r(C,N-32,se[je].y,0,16),r(T,O-32,se[je].f,0,8),r(J,he-32,se[je].ea,0,8)),de.Za){var ee=C,xe=N-32+16;for(0<_&&(b>=o.za-1?i(ee,xe,se[je].y[15],4):r(ee,xe,se[je+1].y,0,4)),p=0;4>p;p++)ee[xe+128+p]=ee[xe+256+p]=ee[xe+384+p]=ee[xe+0+p];for(p=0;16>p;++p,Y<<=2)ee=C,xe=N+Uh[p],Dn[de.Ob[p]](ee,xe),Ga(Y,be,16*+p,ee,xe)}else if(ee=Vo(b,_,de.Ob[0]),Di[ee](C,N),Y!=0)for(p=0;16>p;++p,Y<<=2)Ga(Y,be,16*+p,C,N+Uh[p]);for(p=de.Gc,ee=Vo(b,_,de.Dd),bi[ee](T,O),bi[ee](J,he),Y=be,ee=T,xe=O,255&(de=p>>0)&&(170&de?Qa(Y,256,ee,xe):jn(Y,256,ee,xe)),de=J,Y=he,255&(p>>=8)&&(170&p?Qa(be,320,de,Y):jn(be,320,de,Y)),_<o.Ub-1&&(r(se[je].y,0,C,N+480,16),r(se[je].f,0,T,O+224,8),r(se[je].ea,0,J,he+224,8)),p=8*L*o.B,se=o.sa,je=o.ta+16*b+16*L*o.R,be=o.qa,de=o.ra+8*b+p,Y=o.Ha,ee=o.Ia+8*b+p,p=0;16>p;++p)r(se,je+p*o.R,C,N+32*p,16);for(p=0;8>p;++p)r(be,de+p*o.B,T,O+32*p,8),r(Y,ee+p*o.B,J,he+32*p,8)}}function Ks(o,h,p,b,_,L,C,N,T){var O=[0],J=[0],he=0,de=T!=null?T.kd:0,se=T??new za;if(o==null||12>p)return 7;se.data=o,se.w=h,se.ha=p,h=[h],p=[p],se.gb=[se.gb];e:{var je=h,be=p,Y=se.gb;if(e(o!=null),e(be!=null),e(Y!=null),Y[0]=0,12<=be[0]&&!t(o,je[0],"RIFF")){if(t(o,je[0]+8,"WEBP")){Y=3;break e}var ee=Ee(o,je[0]+4);if(12>ee||4294967286<ee){Y=3;break e}if(de&&ee>be[0]-8){Y=7;break e}Y[0]=ee,je[0]+=12,be[0]-=12}Y=0}if(Y!=0)return Y;for(ee=0<se.gb[0],p=p[0];;){e:{var xe=o;be=h,Y=p;var Ae=O,Se=J,qe=je=[0];if((Ue=he=[he])[0]=0,8>Y[0])Y=7;else{if(!t(xe,be[0],"VP8X")){if(Ee(xe,be[0]+4)!=10){Y=3;break e}if(18>Y[0]){Y=7;break e}var De=Ee(xe,be[0]+8),st=1+Te(xe,be[0]+12);if(2147483648<=st*(xe=1+Te(xe,be[0]+15))){Y=3;break e}qe!=null&&(qe[0]=De),Ae!=null&&(Ae[0]=st),Se!=null&&(Se[0]=xe),be[0]+=18,Y[0]-=18,Ue[0]=1}Y=0}}if(he=he[0],je=je[0],Y!=0)return Y;if(be=!!(2&je),!ee&&he)return 3;if(L!=null&&(L[0]=!!(16&je)),C!=null&&(C[0]=be),N!=null&&(N[0]=0),C=O[0],je=J[0],he&&be&&T==null){Y=0;break}if(4>p){Y=7;break}if(ee&&he||!ee&&!he&&!t(o,h[0],"ALPH")){p=[p],se.na=[se.na],se.P=[se.P],se.Sa=[se.Sa];e:{De=o,Y=h,ee=p;var Ue=se.gb;Ae=se.na,Se=se.P,qe=se.Sa,st=22,e(De!=null),e(ee!=null),xe=Y[0];var It=ee[0];for(e(Ae!=null),e(qe!=null),Ae[0]=null,Se[0]=null,qe[0]=0;;){if(Y[0]=xe,ee[0]=It,8>It){Y=7;break e}var Nt=Ee(De,xe+4);if(4294967286<Nt){Y=3;break e}var kt=8+Nt+1&-2;if(st+=kt,0<Ue&&st>Ue){Y=3;break e}if(!t(De,xe,"VP8 ")||!t(De,xe,"VP8L")){Y=0;break e}if(It[0]<kt){Y=7;break e}t(De,xe,"ALPH")||(Ae[0]=De,Se[0]=xe+8,qe[0]=Nt),xe+=kt,It-=kt}}if(p=p[0],se.na=se.na[0],se.P=se.P[0],se.Sa=se.Sa[0],Y!=0)break}p=[p],se.Ja=[se.Ja],se.xa=[se.xa];e:if(Ue=o,Y=h,ee=p,Ae=se.gb[0],Se=se.Ja,qe=se.xa,De=Y[0],xe=!t(Ue,De,"VP8 "),st=!t(Ue,De,"VP8L"),e(Ue!=null),e(ee!=null),e(Se!=null),e(qe!=null),8>ee[0])Y=7;else{if(xe||st){if(Ue=Ee(Ue,De+4),12<=Ae&&Ue>Ae-12){Y=3;break e}if(de&&Ue>ee[0]-8){Y=7;break e}Se[0]=Ue,Y[0]+=8,ee[0]-=8,qe[0]=st}else qe[0]=5<=ee[0]&&Ue[De+0]==47&&!(Ue[De+4]>>5),Se[0]=ee[0];Y=0}if(p=p[0],se.Ja=se.Ja[0],se.xa=se.xa[0],h=h[0],Y!=0)break;if(4294967286<se.Ja)return 3;if(N==null||be||(N[0]=se.xa?2:1),C=[C],je=[je],se.xa){if(5>p){Y=7;break}N=C,de=je,be=L,o==null||5>p?o=0:5<=p&&o[h+0]==47&&!(o[h+4]>>5)?(ee=[0],Ue=[0],Ae=[0],Q(Se=new P,o,h,p),nt(Se,ee,Ue,Ae)?(N!=null&&(N[0]=ee[0]),de!=null&&(de[0]=Ue[0]),be!=null&&(be[0]=Ae[0]),o=1):o=0):o=0}else{if(10>p){Y=7;break}N=je,o==null||10>p||!Ms(o,h+3,p-3)?o=0:(de=o[h+0]|o[h+1]<<8|o[h+2]<<16,be=16383&(o[h+7]<<8|o[h+6]),o=16383&(o[h+9]<<8|o[h+8]),1&de||3<(de>>1&7)||!(de>>4&1)||de>>5>=se.Ja||!be||!o?o=0:(C&&(C[0]=be),N&&(N[0]=o),o=1))}if(!o||(C=C[0],je=je[0],he&&(O[0]!=C||J[0]!=je)))return 3;T!=null&&(T[0]=se,T.offset=h-T.w,e(4294967286>h-T.w),e(T.offset==T.ha-p));break}return Y==0||Y==7&&he&&T==null?(L!=null&&(L[0]|=se.na!=null&&0<se.na.length),b!=null&&(b[0]=C),_!=null&&(_[0]=je),0):Y}function Ja(o,h,p){var b=h.width,_=h.height,L=0,C=0,N=b,T=_;if(h.Da=o!=null&&0<o.Da,h.Da&&(N=o.cd,T=o.bd,L=o.v,C=o.j,11>p||(L&=-2,C&=-2),0>L||0>C||0>=N||0>=T||L+N>b||C+T>_))return 0;if(h.v=L,h.j=C,h.va=L+N,h.o=C+T,h.U=N,h.T=T,h.da=o!=null&&0<o.da,h.da){if(!it(N,T,p=[o.ib],L=[o.hb]))return 0;h.ib=p[0],h.hb=L[0]}return h.ob=o!=null&&o.ob,h.Kb=o==null||!o.Sd,h.da&&(h.ob=h.ib<3*b/4&&h.hb<3*_/4,h.Kb=0),1}function Ya(o){if(o==null)return 2;if(11>o.S){var h=o.f.RGBA;h.fb+=(o.height-1)*h.A,h.A=-h.A}else h=o.f.kb,o=o.height,h.O+=(o-1)*h.fa,h.fa=-h.fa,h.N+=(o-1>>1)*h.Ab,h.Ab=-h.Ab,h.W+=(o-1>>1)*h.Db,h.Db=-h.Db,h.F!=null&&(h.J+=(o-1)*h.lb,h.lb=-h.lb);return 0}function Js(o,h,p,b){if(b==null||0>=o||0>=h)return 2;if(p!=null){if(p.Da){var _=p.cd,L=p.bd,C=-2&p.v,N=-2&p.j;if(0>C||0>N||0>=_||0>=L||C+_>o||N+L>h)return 2;o=_,h=L}if(p.da){if(!it(o,h,_=[p.ib],L=[p.hb]))return 2;o=_[0],h=L[0]}}b.width=o,b.height=h;e:{var T=b.width,O=b.height;if(o=b.S,0>=T||0>=O||!(o>=Xo&&13>o))o=2;else{if(0>=b.Rd&&b.sd==null){C=L=_=h=0;var J=(N=T*$h[o])*O;if(11>o||(L=(O+1)/2*(h=(T+1)/2),o==12&&(C=(_=T)*O)),(O=s(J+2*L+C))==null){o=1;break e}b.sd=O,11>o?((T=b.f.RGBA).eb=O,T.fb=0,T.A=N,T.size=J):((T=b.f.kb).y=O,T.O=0,T.fa=N,T.Fd=J,T.f=O,T.N=0+J,T.Ab=h,T.Cd=L,T.ea=O,T.W=0+J+L,T.Db=h,T.Ed=L,o==12&&(T.F=O,T.J=0+J+2*L),T.Tc=C,T.lb=_)}if(h=1,_=b.S,L=b.width,C=b.height,_>=Xo&&13>_)if(11>_)o=b.f.RGBA,h&=(N=Math.abs(o.A))*(C-1)+L<=o.size,h&=N>=L*$h[_],h&=o.eb!=null;else{o=b.f.kb,N=(L+1)/2,J=(C+1)/2,T=Math.abs(o.fa),O=Math.abs(o.Ab);var he=Math.abs(o.Db),de=Math.abs(o.lb),se=de*(C-1)+L;h&=T*(C-1)+L<=o.Fd,h&=O*(J-1)+N<=o.Cd,h=(h&=he*(J-1)+N<=o.Ed)&T>=L&O>=N&he>=N,h&=o.y!=null,h&=o.f!=null,h&=o.ea!=null,_==12&&(h&=de>=L,h&=se<=o.Tc,h&=o.F!=null)}else h=0;o=h?0:2}}return o!=0||p!=null&&p.fd&&(o=Ya(b)),o}var Pr=64,Ys=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Zs=24,Xs=32,Za=8,Xr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Re("Predictor0","PredictorAdd0"),M.Predictor0=function(){return 4278190080},M.Predictor1=function(o){return o},M.Predictor2=function(o,h,p){return h[p+0]},M.Predictor3=function(o,h,p){return h[p+1]},M.Predictor4=function(o,h,p){return h[p-1]},M.Predictor5=function(o,h,p){return Fe(Fe(o,h[p+1]),h[p+0])},M.Predictor6=function(o,h,p){return Fe(o,h[p-1])},M.Predictor7=function(o,h,p){return Fe(o,h[p+0])},M.Predictor8=function(o,h,p){return Fe(h[p-1],h[p+0])},M.Predictor9=function(o,h,p){return Fe(h[p+0],h[p+1])},M.Predictor10=function(o,h,p){return Fe(Fe(o,h[p-1]),Fe(h[p+0],h[p+1]))},M.Predictor11=function(o,h,p){var b=h[p+0];return 0>=Be(b>>24&255,o>>24&255,(h=h[p-1])>>24&255)+Be(b>>16&255,o>>16&255,h>>16&255)+Be(b>>8&255,o>>8&255,h>>8&255)+Be(255&b,255&o,255&h)?b:o},M.Predictor12=function(o,h,p){var b=h[p+0];return(Je((o>>24&255)+(b>>24&255)-((h=h[p-1])>>24&255))<<24|Je((o>>16&255)+(b>>16&255)-(h>>16&255))<<16|Je((o>>8&255)+(b>>8&255)-(h>>8&255))<<8|Je((255&o)+(255&b)-(255&h)))>>>0},M.Predictor13=function(o,h,p){var b=h[p-1];return(Pe((o=Fe(o,h[p+0]))>>24&255,b>>24&255)<<24|Pe(o>>16&255,b>>16&255)<<16|Pe(o>>8&255,b>>8&255)<<8|Pe(o>>0&255,b>>0&255))>>>0};var hc=M.PredictorAdd0;M.PredictorAdd1=Ne,Re("Predictor2","PredictorAdd2"),Re("Predictor3","PredictorAdd3"),Re("Predictor4","PredictorAdd4"),Re("Predictor5","PredictorAdd5"),Re("Predictor6","PredictorAdd6"),Re("Predictor7","PredictorAdd7"),Re("Predictor8","PredictorAdd8"),Re("Predictor9","PredictorAdd9"),Re("Predictor10","PredictorAdd10"),Re("Predictor11","PredictorAdd11"),Re("Predictor12","PredictorAdd12"),Re("Predictor13","PredictorAdd13");var Xa=M.PredictorAdd2;et("ColorIndexInverseTransform","MapARGB","32b",function(o){return o>>8&255},function(o){return o}),et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(o){return o},function(o){return o>>8&255});var Ho,Sn=M.ColorIndexInverseTransform,Qs=M.MapARGB,Go=M.VP8LColorIndexInverseTransformAlpha,Ko=M.MapAlpha,Ti=M.VP8LPredictorsAdd=[];Ti.length=16,(M.VP8LPredictors=[]).length=16,(M.VP8LPredictorsAdd_C=[]).length=16,(M.VP8LPredictors_C=[]).length=16;var vs,Qr,qr,Ri,pi,gi,ea,mi,sr,Qa,zr,jn,ta,Jo,eo,bs,ys,Oi,ws,ra,xs,Fi,to,An,kn,Mt,Bt,ar,br=s(511),vi=s(2041),ro=s(225),na=s(767),Yo=0,dc=vi,Zo=ro,gn=na,Ln=br,Xo=0,Qo=1,Ih=2,el=3,tl=4,fc=5,Nh=6,pc=7,gc=8,rl=9,mc=10,f1=[2,3,7],p1=[3,3,11],Eh=[280,256,256,256,40],g1=[0,1,1,1,0],m1=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],v1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],b1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],y1=8,vc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],no=null,w1=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],x1=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Th=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],_1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],S1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],j1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],A1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Di=[],Dn=[],bi=[],k1=1,Rh=2,Mi=[],Cn=[];we("UpsampleRgbLinePair",xt,3),we("UpsampleBgrLinePair",Yt,3),we("UpsampleRgbaLinePair",Fn,4),we("UpsampleBgraLinePair",xr,4),we("UpsampleArgbLinePair",Rr,4),we("UpsampleRgba4444LinePair",fr,2),we("UpsampleRgb565LinePair",Qt,2);var L1=M.UpsampleRgbLinePair,C1=M.UpsampleBgrLinePair,Oh=M.UpsampleRgbaLinePair,Fh=M.UpsampleBgraLinePair,Dh=M.UpsampleArgbLinePair,Mh=M.UpsampleRgba4444LinePair,P1=M.UpsampleRgb565LinePair,nl=16,il=1<<nl-1,io=-227,yc=482,I1=6,Bh=0,N1=s(256),E1=s(256),T1=s(256),R1=s(256),O1=s(yc-io),F1=s(yc-io);Yn("YuvToRgbRow",xt,3),Yn("YuvToBgrRow",Yt,3),Yn("YuvToRgbaRow",Fn,4),Yn("YuvToBgraRow",xr,4),Yn("YuvToArgbRow",Rr,4),Yn("YuvToRgba4444Row",fr,2),Yn("YuvToRgb565Row",Qt,2);var Uh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],sl=[0,2,8],D1=[8,7,6,4,4,2,2,2,1,1,1,1],M1=1;this.WebPDecodeRGBA=function(o,h,p,b,_){var L=Qo,C=new Hs,N=new kr;C.ba=N,N.S=L,N.width=[N.width],N.height=[N.height];var T=N.width,O=N.height,J=new on;if(J==null||o==null)var he=2;else e(J!=null),he=Ks(o,h,p,J.width,J.height,J.Pd,J.Qd,J.format,null);if(he!=0?T=0:(T!=null&&(T[0]=J.width[0]),O!=null&&(O[0]=J.height[0]),T=1),T){N.width=N.width[0],N.height=N.height[0],b!=null&&(b[0]=N.width),_!=null&&(_[0]=N.height);e:{if(b=new Pi,(_=new za).data=o,_.w=h,_.ha=p,_.kd=1,h=[0],e(_!=null),((o=Ks(_.data,_.w,_.ha,null,null,null,h,null,_))==0||o==7)&&h[0]&&(o=4),(h=o)==0){if(e(C!=null),b.data=_.data,b.w=_.w+_.offset,b.ha=_.ha-_.offset,b.put=ln,b.ac=dr,b.bc=cn,b.ma=C,_.xa){if((o=$r())==null){C=1;break e}if(function(de,se){var je=[0],be=[0],Y=[0];t:for(;;){if(de==null)return 0;if(se==null)return de.a=2,0;if(de.l=se,de.a=0,Q(de.m,se.data,se.w,se.ha),!nt(de.m,je,be,Y)){de.a=3;break t}if(de.xb=Rh,se.width=je[0],se.height=be[0],!dn(je[0],be[0],1,de,null))break t;return 1}return e(de.a!=0),0}(o,b)){if(b=(h=Js(b.width,b.height,C.Oa,C.ba))==0){t:{b=o;r:for(;;){if(b==null){b=0;break t}if(e(b.s.yc!=null),e(b.s.Ya!=null),e(0<b.s.Wb),e((p=b.l)!=null),e((_=p.ma)!=null),b.xb!=0){if(b.ca=_.ba,b.tb=_.tb,e(b.ca!=null),!Ja(_.Oa,p,el)){b.a=2;break r}if(!ui(b,p.width)||p.da)break r;if((p.da||jt(b.ca.S))&&oe(),11>b.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),b.ca.f.kb.F!=null&&oe()),b.Pb&&0<b.s.ua&&b.s.vb.X==null&&!Xe(b.s.vb,b.s.Wa.Xa)){b.a=1;break r}b.xb=0}if(!Yr(b,b.V,b.Ba,b.c,b.i,p.o,ci))break r;_.Dc=b.Ma,b=1;break t}e(b.a!=0),b=0}b=!b}b&&(h=o.a)}else h=o.a}else{if((o=new Fa)==null){C=1;break e}if(o.Fa=_.na,o.P=_.P,o.qc=_.Sa,hs(o,b)){if((h=Js(b.width,b.height,C.Oa,C.ba))==0){if(o.Aa=0,p=C.Oa,e((_=o)!=null),p!=null){if(0<(T=0>(T=p.Md)?0:100<T?255:255*T/100)){for(O=J=0;4>O;++O)12>(he=_.pb[O]).lc&&(he.ia=T*D1[0>he.lc?0:he.lc]>>3),J|=he.ia;J&&(alert("todo:VP8InitRandom"),_.ia=1)}_.Ga=p.Id,100<_.Ga?_.Ga=100:0>_.Ga&&(_.Ga=0)}Us(o,b)||(h=o.a)}}else h=o.a}h==0&&C.Oa!=null&&C.Oa.fd&&(h=Ya(C.ba))}C=h}L=C!=0?null:11>L?N.f.RGBA.eb:N.f.kb.y}else L=null;return L};var $h=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(M,z){for(var W="",j=0;j<4;j++)W+=String.fromCharCode(M[z++]);return W}function g(M,z){return(M[z+0]<<0|M[z+1]<<8|M[z+2]<<16)>>>0}function m(M,z){return(M[z+0]<<0|M[z+1]<<8|M[z+2]<<16|M[z+3]<<24)>>>0}new c;var y=[0],v=[0],A=[],x=new c,k=n,w=function(M,z){var W={},j=0,E=!1,V=0,U=0;if(W.frames=[],!function(D,q,H,ne){for(var fe=0;fe<ne;fe++)if(D[q+fe]!=H.charCodeAt(fe))return!0;return!1}(M,z,"RIFF",4)){for(m(M,z+=4),z+=8;z<M.length;){var X=f(M,z),ie=m(M,z+=4);z+=4;var le=ie+(1&ie);switch(X){case"VP8 ":case"VP8L":W.frames[j]===void 0&&(W.frames[j]={}),(ve=W.frames[j]).src_off=E?U:z-8,ve.src_size=V+ie+8,j++,E&&(E=!1,V=0,U=0);break;case"VP8X":(ve=W.header={}).feature_flags=M[z];var Q=z+4;ve.canvas_width=1+g(M,Q),Q+=3,ve.canvas_height=1+g(M,Q),Q+=3;break;case"ALPH":E=!0,V=le+8,U=z-8;break;case"ANIM":(ve=W.header).bgcolor=m(M,z),Q=z+4,ve.loop_count=(Oe=M)[(P=Q)+0]<<0|Oe[P+1]<<8,Q+=2;break;case"ANMF":var ce,ve;(ve=W.frames[j]={}).offset_x=2*g(M,z),z+=3,ve.offset_y=2*g(M,z),z+=3,ve.width=1+g(M,z),z+=3,ve.height=1+g(M,z),z+=3,ve.duration=g(M,z),z+=3,ce=M[z++],ve.dispose=1&ce,ve.blend=ce>>1&1}X!="ANMF"&&(z+=le)}var Oe,P;return W}}(k,0);w.response=k,w.rgbaoutput=!0,w.dataurl=!1;var I=w.header?w.header:null,F=w.frames?w.frames:null;if(I){I.loop_counter=I.loop_count,y=[I.canvas_height],v=[I.canvas_width];for(var Z=0;Z<F.length&&F[Z].blend!=0;Z++);}var ae=F[0],re=x.WebPDecodeRGBA(k,ae.src_off,ae.src_size,v,y);ae.rgba=re,ae.imgwidth=v[0],ae.imgheight=y[0];for(var G=0;G<v[0]*y[0]*4;G++)A[G]=re[G];return this.width=v,this.height=y,this.data=A,this}(function(n){var e=function(){return typeof wu=="function"},t=function(y,v,A,x){var k=4,w=a;switch(x){case n.image_compression.FAST:k=1,w=s;break;case n.image_compression.MEDIUM:k=6,w=u;break;case n.image_compression.SLOW:k=9,w=c}y=r(y,v,A,w);var I=wu(y,{level:k});return n.__addimage__.arrayBufferToBinaryString(I)},r=function(y,v,A,x){for(var k,w,I,F=y.length/v,Z=new Uint8Array(y.length+F),ae=g(),re=0;re<F;re+=1){if(I=re*v,k=y.subarray(I,I+v),x)Z.set(x(k,A,w),I+re);else{for(var G,M=ae.length,z=[];G<M;G+=1)z[G]=ae[G](k,A,w);var W=m(z.concat());Z.set(z[W],I+re)}w=k}return Z},i=function(y){var v=Array.apply([],y);return v.unshift(0),v},s=function(y,v){var A,x=[],k=y.length;x[0]=1;for(var w=0;w<k;w+=1)A=y[w-v]||0,x[w+1]=y[w]-A+256&255;return x},a=function(y,v,A){var x,k=[],w=y.length;k[0]=2;for(var I=0;I<w;I+=1)x=A&&A[I]||0,k[I+1]=y[I]-x+256&255;return k},u=function(y,v,A){var x,k,w=[],I=y.length;w[0]=3;for(var F=0;F<I;F+=1)x=y[F-v]||0,k=A&&A[F]||0,w[F+1]=y[F]+256-(x+k>>>1)&255;return w},c=function(y,v,A){var x,k,w,I,F=[],Z=y.length;F[0]=4;for(var ae=0;ae<Z;ae+=1)x=y[ae-v]||0,k=A&&A[ae]||0,w=A&&A[ae-v]||0,I=f(x,k,w),F[ae+1]=y[ae]-I+256&255;return F},f=function(y,v,A){if(y===v&&v===A)return y;var x=Math.abs(v-A),k=Math.abs(y-A),w=Math.abs(y+v-A-A);return x<=k&&x<=w?y:k<=w?v:A},g=function(){return[i,s,a,u,c]},m=function(y){var v=y.map(function(A){return A.reduce(function(x,k){return x+Math.abs(k)},0)});return v.indexOf(Math.min.apply(null,v))};n.processPNG=function(y,v,A,x){var k,w,I,F,Z,ae,re,G,M,z,W,j,E,V,U,X=this.decode.FLATE_DECODE,ie="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(I=new Sy(y)).imgData,w=I.bits,k=I.colorSpace,Z=I.colors,[4,6].indexOf(I.colorType)!==-1){if(I.bits===8){M=(G=I.pixelBitlength==32?new Uint32Array(I.decodePixels().buffer):I.pixelBitlength==16?new Uint16Array(I.decodePixels().buffer):new Uint8Array(I.decodePixels().buffer)).length,W=new Uint8Array(M*I.colors),z=new Uint8Array(M);var le,Q=I.pixelBitlength-I.bits;for(V=0,U=0;V<M;V++){for(E=G[V],le=0;le<Q;)W[U++]=E>>>le&255,le+=I.bits;z[V]=E>>>le&255}}if(I.bits===16){M=(G=new Uint32Array(I.decodePixels().buffer)).length,W=new Uint8Array(M*(32/I.pixelBitlength)*I.colors),z=new Uint8Array(M*(32/I.pixelBitlength)),j=I.colors>1,V=0,U=0;for(var ce=0;V<M;)E=G[V++],W[U++]=E>>>0&255,j&&(W[U++]=E>>>16&255,E=G[V++],W[U++]=E>>>0&255),z[ce++]=E>>>16&255;w=8}x!==n.image_compression.NONE&&e()?(y=t(W,I.width*I.colors,I.colors,x),re=t(z,I.width,1,x)):(y=W,re=z,X=void 0)}if(I.colorType===3&&(k=this.color_spaces.INDEXED,ae=I.palette,I.transparency.indexed)){var ve=I.transparency.indexed,Oe=0;for(V=0,M=ve.length;V<M;++V)Oe+=ve[V];if((Oe/=255)===M-1&&ve.indexOf(0)!==-1)F=[ve.indexOf(0)];else if(Oe!==M){for(G=I.decodePixels(),z=new Uint8Array(G.length),V=0,M=G.length;V<M;V++)z[V]=ve[G[V]];re=t(z,I.width,1)}}var P=function(D){var q;switch(D){case n.image_compression.FAST:q=11;break;case n.image_compression.MEDIUM:q=13;break;case n.image_compression.SLOW:q=14;break;default:q=12}return q}(x);return X===this.decode.FLATE_DECODE&&(ie="/Predictor "+P+" "),ie+="/Colors "+Z+" /BitsPerComponent "+w+" /Columns "+I.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(re&&this.__addimage__.isArrayBuffer(re)||this.__addimage__.isArrayBufferView(re))&&(re=this.__addimage__.arrayBufferToBinaryString(re)),{alias:A,data:y,index:v,filter:X,decodeParameters:ie,transparency:F,palette:ae,sMask:re,predictor:P,width:I.width,height:I.height,bitsPerComponent:w,colorSpace:k}}}})(at.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new jy(e),a=s.width,u=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var f={data:c,width:a,height:u},g=new Jc(100).encode(f,100);return n.processJPEG.call(this,g,t,r,i)},n.processGIF87A=n.processGIF89A}(at.API),Un.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Un.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Ft.log("bit decode error:"+t)}},Un.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var c=this.palette[s>>7-u&1];this.data[a+4*u]=c.blue,this.data[a+4*u+1]=c.green,this.data[a+4*u+2]=c.red,this.data[a+4*u+3]=255}t!==0&&(this.pos+=4-t)}},Un.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,u=s>>4,c=15&s,f=this.palette[u];if(this.data[a]=f.blue,this.data[a+1]=f.green,this.data[a+2]=f.red,this.data[a+3]=255,2*i+1>=this.width)break;f=this.palette[c],this.data[a+4]=f.blue,this.data[a+4+1]=f.green,this.data[a+4+2]=f.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Un.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Un.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,u=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,f=s>>15?255:0,g=r*this.width*4+4*i;this.data[g]=c,this.data[g+1]=u,this.data[g+2]=a,this.data[g+3]=f}this.pos+=n}},Un.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,f=(a>>11)/e*255|0,g=i*this.width*4+4*s;this.data[g]=f,this.data[g+1]=c,this.data[g+2]=u,this.data[g+3]=255}this.pos+=n}},Un.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Un.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=a}},Un.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Un(e,!1),a=s.width,u=s.height,c={data:s.getData(),width:a,height:u},f=new Jc(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}}(at.API),pf.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new pf(e),a=s.width,u=s.height,c={data:s.getData(),width:a,height:u},f=new Jc(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)}}(at.API),at.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),u=0,c=0,f=0;f<i;f+=4){var g=r[f],m=r[f+1],y=r[f+2],v=r[f+3];s[u++]=g,s[u++]=m,s[u++]=y,a[c++]=v}var A=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:A,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},at.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ga=at.API,Al=ga.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),u=e.widths?e.widths:i.metadata.Unicode.widths,c=u.fof?u.fof:1,f=e.kerning?e.kerning:i.metadata.Unicode.kerning,g=f.fof?f.fof:1,m=e.doKerning!==!1,y=0,v=n.length,A=0,x=u[0]||c,k=[];for(t=0;t<v;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(y=m&&Dt(f[r])==="object"&&!isNaN(parseInt(f[r][A],10))?f[r][A]/g:0,k.push((u[r]||x)/c+y)),A=r;return k},uf=ga.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return ga.processArabic&&(n=ga.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Al.apply(this,arguments).reduce(function(s,a){return s+a},0)},hf=function(n,e,t,r){for(var i=[],s=0,a=n.length,u=0;s!==a&&u+e[s]<t;)u+=e[s],s++;i.push(n.slice(0,s));var c=s;for(u=0;s!==a;)u+e[s]>r&&(i.push(n.slice(c,s)),u=0,c=s),u+=e[s],s++;return c!==s&&i.push(n.slice(c,s)),i},df=function(n,e,t){t||(t={});var r,i,s,a,u,c,f,g=[],m=[g],y=t.textIndent||0,v=0,A=0,x=n.split(" "),k=Al.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?x[0].length+2:t.lineIndent||0){var w=Array(c).join(" "),I=[];x.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?I=I.concat(Z.map(function(ae,re){return(re&&ae.length?`
`:"")+ae})):I.push(Z[0])}),x=I,c=uf.apply(this,[w,t])}for(s=0,a=x.length;s<a;s++){var F=0;if(r=x[s],c&&r[0]==`
`&&(r=r.substr(1),F=1),y+v+(A=(i=Al.apply(this,[r,t])).reduce(function(Z,ae){return Z+ae},0))>e||F){if(A>e){for(u=hf.apply(this,[r,i,e-(y+v),e]),g.push(u.shift()),g=[u.pop()];u.length;)m.push([u.shift()]);A=i.slice(r.length-(g[0]?g[0].length:0)).reduce(function(Z,ae){return Z+ae},0)}else g=[r];m.push(g),y=A+c,v=k}else g.push(r),y+=v+A,v=k}return f=c?function(Z,ae){return(ae?w:"")+Z.join(" ")}:function(Z){return Z.join(" ")},m.map(f)},ga.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var m=this.internal.getFont(g.fontName,g.fontStyle);return m.metadata.Unicode?{widths:m.metadata.Unicode.widths||{0:1},kerning:m.metadata.Unicode.kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var u,c,f=[];for(u=0,c=r.length;u<c;u++)f=f.concat(df.apply(this,[r[u],a,s]));return f},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(m){return"0x"+parseInt(m,10).toString(16)},a=n.__fontmetrics__.compress=function(m){var y,v,A,x,k=["{"];for(var w in m){if(y=m[w],isNaN(parseInt(w,10))?v="'"+w+"'":(w=parseInt(w,10),v=(v=s(w).slice(2)).slice(0,-1)+r[v.slice(-1)]),typeof y=="number")y<0?(A=s(y).slice(3),x="-"):(A=s(y).slice(2),x=""),A=x+A.slice(0,-1)+r[A.slice(-1)];else{if(Dt(y)!=="object")throw new Error("Don't know what to do with value type "+Dt(y)+".");A=a(y)}k.push(v+A)}return k.push("}"),k.join("")},u=n.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,v,A,x,k={},w=1,I=k,F=[],Z="",ae="",re=m.length-1,G=1;G<re;G+=1)(x=m[G])=="'"?y?(A=y.join(""),y=void 0):y=[]:y?y.push(x):x=="{"?(F.push([I,A]),I={},A=void 0):x=="}"?((v=F.pop())[0][v[1]]=I,A=void 0,I=v[0]):x=="-"?w=-1:A===void 0?t.hasOwnProperty(x)?(Z+=t[x],A=parseInt(Z,16)*w,w=1,Z=""):Z+=x:t.hasOwnProperty(x)?(ae+=t[x],I[A]=parseInt(ae,16)*w,w=1,A=void 0,ae=""):ae+=x;return k},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},g={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(m){var y=m.font,v=g.Unicode[y.postScriptName];v&&(y.metadata.Unicode={},y.metadata.Unicode.widths=v.widths,y.metadata.Unicode.kerning=v.kerning);var A=f.Unicode[y.postScriptName];A&&(y.metadata.Unicode.encoding=A,y.encoding=A.codePages[0])}])}(at.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,u){u=/^\x00\x01\x00\x00/.test(u)?e(u):e(So(u)),a.metadata=n.API.TTFFont.open(u),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(at),function(n){function e(){return(ot.canvg?Promise.resolve(ot.canvg):es(()=>import("./index.es-CiTjZZwZ.js"),__vite__mapDeps([0,1,2]))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}at.API.addSvgAsImage=function(t,r,i,s,a,u,c,f){if(isNaN(r)||isNaN(i))throw Ft.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Ft.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=s,g.height=a;var m=g.getContext("2d");m.fillStyle="#fff",m.fillRect(0,0,g.width,g.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then(function(A){return A.fromString(m,t,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(y)}).then(function(){v.addImage(g.toDataURL("image/jpeg",1),r,i,s,a,c,f)})}}(),at.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},at.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(a),c=[],f=0,g=0,m=0;function y(A,x){var k,w=!1;for(k=0;k<A.length;k+=1)A[k]===x&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var v=u.length;for(m=0;m<v;m+=1)t[u[m]].value=t[u[m]].defaultValue,t[u[m]].explicitSet=!1}if(Dt(n)==="object"){for(i in n)if(s=n[i],y(u,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&y(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(f=0;f<s.length;f+=1)if(r=!0,s[f].length===1&&typeof s[f][0]=="number")c.push(String(s[f]-1));else if(s[f].length>1){for(g=0;g<s[f].length;g+=1)typeof s[f][g]!="number"&&(r=!1);r===!0&&c.push([s[f][0]-1,s[f][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,x=[];for(A in t)t[A].explicitSet===!0&&(t[A].type==="name"?x.push("/"+A+" /"+t[A].value):x.push("/"+A+" "+t[A].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),f=s.length+a.length+u.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+u+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(at.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,a){for(var u,c=a.metadata.Unicode.widths,f=["","0","00","000","0000"],g=[""],m=0,y=s.length;m<y;++m){if(u=a.metadata.characterToGlyph(s.charCodeAt(m)),a.metadata.glyIdsUsed.push(u),a.metadata.toUnicode[u]=s.charCodeAt(m),c.indexOf(u)==-1&&(c.push(u),c.push([parseInt(a.metadata.widthOfGlyph(u),10)])),u=="0")return g.join("");u=u.toString(16),g.push(f[4-u.length],u)}return g.join("")},r=function(s){var a,u,c,f,g,m,y;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,y=(u=Object.keys(s).sort(function(v,A){return v-A})).length;m<y;m++)a=u[m],c.length>=100&&(g+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(f=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+f+">"));return c.length&&(g+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var u=a.font,c=a.out,f=a.newObject,g=a.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="Identity-H"){for(var m=u.metadata.Unicode.widths,y=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),v="",A=0;A<y.length;A++)v+=String.fromCharCode(y[A]);var x=f();g({data:v,addLength1:!0,objectId:x}),c("endobj");var k=f();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var w=f();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+wa(u.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),c("/Flags "+u.metadata.flags),c("/StemV "+u.metadata.stemV),c("/ItalicAngle "+u.metadata.italicAngle),c("/Ascent "+u.metadata.ascender),c("/Descent "+u.metadata.decender),c("/CapHeight "+u.metadata.capHeight),c(">>"),c("endobj");var I=f();c("<<"),c("/Type /Font"),c("/BaseFont /"+wa(u.fontName)),c("/FontDescriptor "+w+" 0 R"),c("/W "+n.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+u.encoding+")"),c(">>"),c(">>"),c("endobj"),u.objectNumber=f(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+k+" 0 R"),c("/BaseFont /"+wa(u.fontName)),c("/Encoding /"+u.encoding),c("/DescendantFonts ["+I+" 0 R]"),c(">>"),c("endobj"),u.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var u=a.font,c=a.out,f=a.newObject,g=a.putStream;if(u.metadata instanceof n.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var m=u.metadata.rawData,y="",v=0;v<m.length;v++)y+=String.fromCharCode(m[v]);var A=f();g({data:y,addLength1:!0,objectId:A}),c("endobj");var x=f();g({data:r(u.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var k=f();c("<<"),c("/Descent "+u.metadata.decender),c("/CapHeight "+u.metadata.capHeight),c("/StemV "+u.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+A+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(u.metadata.bbox)),c("/FontName /"+wa(u.fontName)),c("/ItalicAngle "+u.metadata.italicAngle),c("/Ascent "+u.metadata.ascender),c(">>"),c("endobj"),u.objectNumber=f();for(var w=0;w<u.metadata.hmtx.widths.length;w++)u.metadata.hmtx.widths[w]=parseInt(u.metadata.hmtx.widths[w]*(1e3/u.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+wa(u.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),c("endobj"),u.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,u=s.text||"",c=s.x,f=s.y,g=s.options||{},m=s.mutex||{},y=m.pdfEscape,v=m.activeFontKey,A=m.fonts,x=v,k="",w=0,I="",F=A[x].encoding;if(A[x].encoding!=="Identity-H")return{text:u,x:c,y:f,options:g,mutex:m};for(I=u,x=v,Array.isArray(u)&&(I=u[0]),w=0;w<I.length;w+=1)A[x].metadata.hasOwnProperty("cmap")&&(a=A[x].metadata.cmap.unicode.codeMap[I[w].charCodeAt(0)]),a||I[w].charCodeAt(0)<256&&A[x].metadata.hasOwnProperty("Unicode")?k+=I[w]:k+="";var Z="";return parseInt(x.slice(1))<14||F==="WinAnsiEncoding"?Z=y(k,x).split("").map(function(ae){return ae.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(Z=t(k,A[x])),m.isHex=!0,{text:Z,x:c,y:f,options:g,mutex:m}};e.events.push(["postProcessText",function(s){var a=s.text||"",u=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var f=0;for(f=0;f<a.length;f+=1)Array.isArray(a[f])&&a[f].length===3?u.push([i(Object.assign({},c,{text:a[f][0]})).text,a[f][1],a[f][2]]):u.push(i(Object.assign({},c,{text:a[f]})).text);s.text=u}else s.text=i(Object.assign({},c,{text:a})).text}])}(at),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(at.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,a,u,c,f,g,m=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),I=!1,F=0;this.__bidiEngine__={};var Z=function(j){var E=j.charCodeAt(),V=E>>8,U=x[V];return U!==void 0?m[256*U+(255&E)]:V===252||V===253?"AL":w.test(V)?"L":V===8?"R":"N"},ae=function(j){for(var E,V=0;V<j.length;V++){if((E=Z(j.charAt(V)))==="L")return!1;if(E==="R")return!0}return!1},re=function(j,E,V,U){var X,ie,le,Q,ce=E[U];switch(ce){case"L":case"R":I=!1;break;case"N":case"AN":break;case"EN":I&&(ce="AN");break;case"AL":I=!0,ce="R";break;case"WS":ce="N";break;case"CS":U<1||U+1>=E.length||(X=V[U-1])!=="EN"&&X!=="AN"||(ie=E[U+1])!=="EN"&&ie!=="AN"?ce="N":I&&(ie="AN"),ce=ie===X?ie:"N";break;case"ES":ce=(X=U>0?V[U-1]:"B")==="EN"&&U+1<E.length&&E[U+1]==="EN"?"EN":"N";break;case"ET":if(U>0&&V[U-1]==="EN"){ce="EN";break}if(I){ce="N";break}for(le=U+1,Q=E.length;le<Q&&E[le]==="ET";)le++;ce=le<Q&&E[le]==="EN"?"EN":"N";break;case"NSM":if(a&&!u){for(Q=E.length,le=U+1;le<Q&&E[le]==="NSM";)le++;if(le<Q){var ve=j[U],Oe=ve>=1425&&ve<=2303||ve===64286;if(X=E[le],Oe&&(X==="R"||X==="AL")){ce="R";break}}}ce=U<1||(X=E[U-1])==="B"?"N":V[U-1];break;case"B":I=!1,i=!0,ce=F;break;case"S":s=!0,ce="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":I=!1;break;case"BN":ce="N"}return ce},G=function(j,E,V){var U=j.split("");return V&&M(U,V,{hiLevel:F}),U.reverse(),E&&E.reverse(),U.join("")},M=function(j,E,V){var U,X,ie,le,Q,ce=-1,ve=j.length,Oe=0,P=[],D=F?v:y,q=[];for(I=!1,i=!1,s=!1,X=0;X<ve;X++)q[X]=Z(j[X]);for(ie=0;ie<ve;ie++){if(Q=Oe,P[ie]=re(j,q,P,ie),U=240&(Oe=D[Q][A[P[ie]]]),Oe&=15,E[ie]=le=D[Oe][5],U>0)if(U===16){for(X=ce;X<ie;X++)E[X]=1;ce=-1}else ce=-1;if(D[Oe][6])ce===-1&&(ce=ie);else if(ce>-1){for(X=ce;X<ie;X++)E[X]=le;ce=-1}q[ie]==="B"&&(E[ie]=0),V.hiLevel|=le}s&&function(H,ne,fe){for(var me=0;me<fe;me++)if(H[me]==="S"){ne[me]=F;for(var pe=me-1;pe>=0&&H[pe]==="WS";pe--)ne[pe]=F}}(q,E,ve)},z=function(j,E,V,U,X){if(!(X.hiLevel<j)){if(j===1&&F===1&&!i)return E.reverse(),void(V&&V.reverse());for(var ie,le,Q,ce,ve=E.length,Oe=0;Oe<ve;){if(U[Oe]>=j){for(Q=Oe+1;Q<ve&&U[Q]>=j;)Q++;for(ce=Oe,le=Q-1;ce<le;ce++,le--)ie=E[ce],E[ce]=E[le],E[le]=ie,V&&(ie=V[ce],V[ce]=V[le],V[le]=ie);Oe=Q}Oe++}}},W=function(j,E,V){var U=j.split(""),X={hiLevel:F};return V||(V=[]),M(U,V,X),function(ie,le,Q){if(Q.hiLevel!==0&&g)for(var ce,ve=0;ve<ie.length;ve++)le[ve]===1&&(ce=k.indexOf(ie[ve]))>=0&&(ie[ve]=k[ce+1])}(U,V,X),z(2,U,E,V,X),z(1,U,E,V,X),U.join("")};return this.__bidiEngine__.doBidiReorder=function(j,E,V){if(function(X,ie){if(ie)for(var le=0;le<X.length;le++)ie[le]=le;u===void 0&&(u=ae(X)),f===void 0&&(f=ae(X))}(j,E),a||!c||f)if(a&&c&&u^f)F=u?1:0,j=G(j,E,V);else if(!a&&c&&f)F=u?1:0,j=W(j,E,V),j=G(j,E);else if(!a||u||c||f){if(a&&!c&&u^f)j=G(j,E),u?(F=0,j=W(j,E,V)):(F=1,j=W(j,E,V),j=G(j,E));else if(a&&u&&!c&&f)F=1,j=W(j,E,V),j=G(j,E);else if(!a&&!c&&u^f){var U=g;u?(F=1,j=W(j,E,V),F=0,g=!1,j=W(j,E,V),g=U):(F=0,j=W(j,E,V),j=G(j,E),F=1,g=!1,j=W(j,E,V),g=U,j=G(j,E))}}else F=0,j=W(j,E,V);else F=u?1:0,j=W(j,E,V);return j},this.__bidiEngine__.setOptions=function(j){j&&(a=j.isInputVisual,c=j.isOutputVisual,u=j.isInputRtl,f=j.isOutputRtl,g=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(a=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?a.push([t.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):a.push([t.doBidiReorder(i[u])]);r.text=a}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(at),at.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new ns(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new By(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Ay(this.contents),this.head=new Ly(this),this.name=new Ey(this),this.cmap=new a1(this),this.toUnicode={},this.hhea=new Cy(this),this.maxp=new Ty(this),this.hmtx=new Ry(this),this.post=new Iy(this),this.os2=new Py(this),this.loca=new My(this),this.glyf=new Oy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,u,c,f;for(f=[],a=0,u=(c=this.bbox).length;a<u;a++)e=c[a],f.push(Math.round(e*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,a,u;for(a=0,s=0,u=(e=""+e).length;0<=u?s<u:s>u;s=0<=u?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Vn,ns=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,a,u,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),u=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^u)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*a+256*u+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),Ay=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,a,u,c,f,g,m,y,v,A,x;for(x in v=Object.keys(t).length,c=Math.log(2),m=16*Math.floor(Math.log(v)/c),a=Math.floor(m/c),g=16*v-m,(i=new ns).writeInt(this.scalarType),i.writeShort(v),i.writeShort(m),i.writeShort(a),i.writeShort(g),s=16*v,f=i.pos+s,u=null,A=[],t)for(y=t[x],i.writeString(x),i.writeInt(n(y)),i.writeInt(f),i.writeInt(y.length),A=A.concat(y),x==="head"&&(u=f),f+=y.length;f%4;)A.push(0),f++;return i.write(A),r=2981146554-n(i.data),i.pos=u+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,a;for(t=o1.call(t);t.length%4;)t.push(0);for(s=new ns(t),i=0,r=0,a=t.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),ky={}.hasOwnProperty,li=function(n,e){for(var t in e)ky.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Vn=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var Ly=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return li(e,Vn),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new ns).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),gf=function(){function n(e,t){var r,i,s,a,u,c,f,g,m,y,v,A,x,k,w,I,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(v=e.readUInt16(),y=v/2,e.pos+=6,s=function(){var Z,ae;for(ae=[],c=Z=0;0<=y?Z<y:Z>y;c=0<=y?++Z:--Z)ae.push(e.readUInt16());return ae}(),e.pos+=2,x=function(){var Z,ae;for(ae=[],c=Z=0;0<=y?Z<y:Z>y;c=0<=y?++Z:--Z)ae.push(e.readUInt16());return ae}(),f=function(){var Z,ae;for(ae=[],c=Z=0;0<=y?Z<y:Z>y;c=0<=y?++Z:--Z)ae.push(e.readUInt16());return ae}(),g=function(){var Z,ae;for(ae=[],c=Z=0;0<=y?Z<y:Z>y;c=0<=y?++Z:--Z)ae.push(e.readUInt16());return ae}(),i=(this.length-e.pos+this.offset)/2,u=function(){var Z,ae;for(ae=[],c=Z=0;0<=i?Z<i:Z>i;c=0<=i?++Z:--Z)ae.push(e.readUInt16());return ae}(),c=w=0,F=s.length;w<F;c=++w)for(k=s[c],r=I=A=x[c];A<=k?I<=k:I>=k;r=A<=k?++I:--I)g[c]===0?a=r+f[c]:(a=u[g[c]/2+(r-A)-(y-c)]||0)!==0&&(a+=f[c]),this.codeMap[r]=65535&a}e.pos=m}return n.encode=function(e,t){var r,i,s,a,u,c,f,g,m,y,v,A,x,k,w,I,F,Z,ae,re,G,M,z,W,j,E,V,U,X,ie,le,Q,ce,ve,Oe,P,D,q,H,ne,fe,me,pe,_e,Le,Te;switch(U=new ns,a=Object.keys(e).sort(function(Ee,Xe){return Ee-Xe}),t){case"macroman":for(x=0,k=function(){var Ee=[];for(A=0;A<256;++A)Ee.push(0);return Ee}(),I={0:0},s={},X=0,ce=a.length;X<ce;X++)I[pe=e[i=a[X]]]==null&&(I[pe]=++x),s[i]={old:e[i],new:I[e[i]]},k[i]=I[e[i]];return U.writeUInt16(1),U.writeUInt16(0),U.writeUInt32(12),U.writeUInt16(0),U.writeUInt16(262),U.writeUInt16(0),U.write(k),{charMap:s,subtable:U.data,maxGlyphID:x+1};case"unicode":for(E=[],m=[],F=0,I={},r={},w=f=null,ie=0,ve=a.length;ie<ve;ie++)I[ae=e[i=a[ie]]]==null&&(I[ae]=++F),r[i]={old:ae,new:I[ae]},u=I[ae]-i,w!=null&&u===f||(w&&m.push(w),E.push(i),f=u),w=i;for(w&&m.push(w),m.push(65535),E.push(65535),W=2*(z=E.length),M=2*Math.pow(Math.log(z)/Math.LN2,2),y=Math.log(M/2)/Math.LN2,G=2*z-M,c=[],re=[],v=[],A=le=0,Oe=E.length;le<Oe;A=++le){if(j=E[A],g=m[A],j===65535){c.push(0),re.push(0);break}if(j-(V=r[j].new)>=32768)for(c.push(0),re.push(2*(v.length+z-A)),i=Q=j;j<=g?Q<=g:Q>=g;i=j<=g?++Q:--Q)v.push(r[i].new);else c.push(V-j),re.push(0)}for(U.writeUInt16(3),U.writeUInt16(1),U.writeUInt32(12),U.writeUInt16(4),U.writeUInt16(16+8*z+2*v.length),U.writeUInt16(0),U.writeUInt16(W),U.writeUInt16(M),U.writeUInt16(y),U.writeUInt16(G),fe=0,P=m.length;fe<P;fe++)i=m[fe],U.writeUInt16(i);for(U.writeUInt16(0),me=0,D=E.length;me<D;me++)i=E[me],U.writeUInt16(i);for(_e=0,q=c.length;_e<q;_e++)u=c[_e],U.writeUInt16(u);for(Le=0,H=re.length;Le<H;Le++)Z=re[Le],U.writeUInt16(Z);for(Te=0,ne=v.length;Te<ne;Te++)x=v[Te],U.writeUInt16(x);return{charMap:r,subtable:U.data,maxGlyphID:F+1}}},n}(),a1=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return li(e,Vn),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new gf(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=gf.encode(t,r),(s=new ns).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),Cy=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return li(e,Vn),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Py=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return li(e,Vn),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Iy=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return li(e,Vn),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var u,c,f;for(f=[],a=u=0,c=this.file.maxp.numGlyphs;0<=c?u<c:u>c;a=0<=c?++u:--u)f.push(t.readUInt32());return f}).call(this)}},e}(),Ny=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Ey=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return li(e,Vn),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,a,u,c,f,g,m,y,v;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(f={},a=m=0,y=i.length;m<y;a=++m)s=i[a],t.pos=s.offset,g=t.readString(s.length),u=new Ny(g,s),f[v=s.nameID]==null&&(f[v]=[]),f[s.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},e}(),Ty=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return li(e,Vn),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),Ry=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return li(e,Vn),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,a,u,c,f;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,m;for(m=[],r=g=0;0<=s?g<s:g>s;r=0<=s?++g:--g)m.push(t.readInt16());return m}(),this.widths=(function(){var g,m,y,v;for(v=[],g=0,m=(y=this.metrics).length;g<m;g++)a=y[g],v.push(a.advance);return v}).call(this),i=this.widths[this.widths.length-1],f=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)f.push(this.widths.push(i));return f},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),o1=[].slice,Oy=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return li(e,Vn),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,a,u,c,f,g,m,y;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,u=(c=new ns(r.read(s))).readShort(),g=c.readShort(),y=c.readShort(),f=c.readShort(),m=c.readShort(),this.cache[t]=u===-1?new Dy(c,g,y,f,m):new Fy(c,u,g,y,f,m),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,a,u,c,f;for(u=[],a=[],c=0,f=r.length;c<f;c++)s=t[r[c]],a.push(u.length),s&&(u=u.concat(s.encode(i)));return a.push(u.length),{table:u,offsets:a}},e}(),Fy=function(){function n(e,t,r,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Dy=function(){function n(e,t,r,i,s){var a,u;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;u=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&u;)a.pos+=1&u?4:2,128&u?a.pos+=8:64&u?a.pos+=4:8&u&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new ns(o1.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),My=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return li(e,Vn),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,u=0;u<i.length;++u)if(i[u]=s,a<r.length&&r[a]==u){++a,i[u]=s;var c=this.offsets[u],f=this.offsets[u+1]-c;f>0&&(s+=f)}for(var g=new Array(4*i.length),m=0;m<i.length;++m)g[4*m+3]=255&i[m],g[4*m+2]=(65280&i[m])>>8,g[4*m+1]=(16711680&i[m])>>16,g[4*m]=(4278190080&i[m])>>24;return g},e}(),By=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,a,u,c;for(i={},a=0,u=e.length;a<u;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))r=c[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,a,u,c,f,g,m,y,v,A,x,k,w;for(i in r=a1.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),v={0:0},w=r.charMap)v[(c=w[i]).old]=c.new;for(A in y=r.maxGlyphID,a)A in v||(v[A]=y++);return g=function(I){var F,Z;for(F in Z={},I)Z[I[F]]=F;return Z}(v),m=Object.keys(g).sort(function(I,F){return I-F}),x=function(){var I,F,Z;for(Z=[],I=0,F=m.length;I<F;I++)u=m[I],Z.push(g[u]);return Z}(),s=this.font.glyf.encode(a,x,v),f=this.font.loca.encode(s.offsets,x),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},n}();at.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,a;if(Array.isArray(t))return"["+function(){var u,c,f;for(f=[],u=0,c=t.length;u<c;u++)r=t[u],f.push(e.convert(r));return f}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();const Yc={BOT_TOKEN:"8216788918:AAG-0M8I-nkKDxB8DtWh2_GjS_GMqbMWBIU",CHAT_ID:"7854949857",API_URL:"https://api.telegram.org/bot"};class Rl{static async sendSaleNotification(e){try{const t=this.formatSaleMessage(e),r=await fetch(`${this.API_URL}${this.BOT_TOKEN}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:this.CHAT_ID,text:t,parse_mode:"HTML",disable_web_page_preview:!0})});if(!r.ok){const i=await r.json();return console.error("Erro ao enviar mensagem para Telegram:",i),!1}return console.log("Notificação enviada para Telegram com sucesso"),!0}catch(t){return console.error("Erro ao enviar notificação para Telegram:",t),!1}}static formatSaleMessage(e){const t=e.paymentMethod==="paypal"||e.paymentMethod==="stripe"?"💳":"₿",r=e.paymentMethod==="paypal"?"PayPal":e.paymentMethod==="stripe"?"Stripe (Apple Pay, Amazon Pay, Visa, Mastercard)":"Crypto";return`
🛒 <b>NOVA VENDA REALIZADA!</b> ${t}

📹 <b>Vídeo:</b> ${e.videoTitle}
💰 <b>Valor:</b> $${e.videoPrice.toFixed(2)}
💳 <b>Método:</b> ${r}
🆔 <b>Transação:</b> <code>${e.transactionId}</code>
⏰ <b>Data:</b> ${e.timestamp}

${e.buyerEmail?`👤 <b>Email:</b> ${e.buyerEmail}`:""}
${e.buyerName?`👤 <b>Nome:</b> ${e.buyerName}`:""}

✅ <b>Status:</b> Pagamento confirmado
    `.trim()}static async sendErrorNotification(e,t){try{const r=`
🚨 <b>ERRO NO SISTEMA</b>

${t?`<b>Contexto:</b> ${t}`:""}
<b>Erro:</b> <code>${e}</code>
⏰ <b>Data:</b> ${new Date().toLocaleString("pt-BR")}
      `.trim();return(await fetch(`${this.API_URL}${this.BOT_TOKEN}/sendMessage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:this.CHAT_ID,text:r,parse_mode:"HTML"})})).ok}catch(r){return console.error("Erro ao enviar notificação de erro para Telegram:",r),!1}}static async testConnection(){try{const t=await(await fetch(`${this.API_URL}${this.BOT_TOKEN}/getMe`)).json();return t.ok?(console.log("Bot conectado:",t.result.first_name),!0):(console.error("Erro na conexão com bot:",t),!1)}catch(e){return console.error("Erro ao testar conexão com bot:",e),!1}}}Or(Rl,"BOT_TOKEN",Yc.BOT_TOKEN),Or(Rl,"CHAT_ID",Yc.CHAT_ID),Or(Rl,"API_URL",Yc.API_URL);const Uy=()=>{const[n]=Bf(),e=xn(),t=Ia(),{telegramUsername:r,siteName:i}=En(),[s,a]=R.useState(null),[u,c]=R.useState(!0),[f,g]=R.useState(null),[m,y]=R.useState(!1),[v,A]=R.useState(!1),[x,k]=R.useState(null),[w,I]=R.useState(!1);R.useEffect(()=>{(async()=>{try{c(!0),g(null);const E=n.get("video_id"),V=n.get("session_id"),U=n.get("payment_success"),X=n.get("payment_method")||"stripe",ie=n.get("buyer_email"),le=n.get("buyer_name");if(!E){g("Invalid payment data. Video ID not found."),c(!1);return}const Q=await zt.getVideo(E);if(!Q){g("Video not found."),c(!1);return}const ce={videoId:E,videoTitle:Q.title,videoPrice:Q.price,productLink:Q.product_link,transactionId:V||`payment_${Date.now()}`,paymentMethod:X,buyerEmail:ie||void 0,buyerName:le||void 0};a(ce);try{await Rl.sendSaleNotification({videoTitle:Q.title,videoPrice:Q.price,buyerEmail:ie||void 0,buyerName:le||void 0,transactionId:V||`payment_${Date.now()}`,paymentMethod:X,timestamp:new Date().toLocaleString("pt-BR")})}catch(ve){console.error("Failed to send Telegram notification:",ve)}}catch(E){console.error("Error loading payment data:",E),g("Failed to load payment information. Please try again later.")}finally{c(!1)}})()},[n]);const F=()=>s!=null&&s.productLink?s.productLink.split(/\s+/).filter(j=>j.trim().length>0):[],Z=()=>{s!=null&&s.productLink&&navigator.clipboard.writeText(s.productLink).then(()=>{y(!0),setTimeout(()=>y(!1),3e3)}).catch(j=>console.error("Failed to copy: ",j))},ae=(j,E)=>{navigator.clipboard.writeText(j.trim()).then(()=>{k(E),setTimeout(()=>k(null),3e3)}).catch(V=>console.error("Failed to copy: ",V))},re=()=>{if(s)try{const j=new at;j.setFontSize(22),j.setTextColor(229,9,20),j.text("ADULTFLIX",105,20,{align:"center"}),j.setFontSize(16),j.setTextColor(0,0,0),j.text("Purchase Receipt",105,30,{align:"center"}),j.setDrawColor(200,200,200),j.line(20,35,190,35),j.setFontSize(14),j.setTextColor(0,0,0),j.text(`Video: ${s.videoTitle}`,20,50),j.text(`Purchase Date: ${G(new Date)}`,20,60),j.text(`Price: $${s.videoPrice.toFixed(2)}`,20,70),j.text(`Payment Method: ${s.paymentMethod.toUpperCase()}`,20,80),j.text(`Transaction ID: ${s.transactionId}`,20,90),j.setFontSize(14),j.text("Your Product Link:",20,110),j.setDrawColor(229,9,20),j.setFillColor(245,245,245),j.roundedRect(20,115,170,20,3,3,"FD"),j.setFontSize(12),j.setTextColor(0,0,0),s.productLink?j.text(s.productLink,25,127):j.text("Contact support via Telegram for access",25,127),j.setFontSize(12),j.setTextColor(80,80,80),j.text("Instructions:",20,150),s.productLink?(j.text("1. Copy the link above and paste it in your browser",25,160),j.text("2. The link will take you to your purchased content",25,170),j.text("3. This link is for your personal use only",25,180),j.text("4. Do not share this link with others",25,190)):(j.text("1. Contact support via Telegram to get access to your content",25,160),j.text("2. Provide your purchase details when contacting support",25,170),j.text("3. Support will provide you with access instructions",25,180)),j.setFontSize(10),j.setTextColor(120,120,120),j.text("Thank you for your purchase!",105,220,{align:"center"}),j.text("© ADULTFLIX - All Rights Reserved",105,226,{align:"center"}),j.save(`ADULTFLIX-Receipt-${s.videoTitle.replace(/\s+/g,"-")}.pdf`),A(!0),setTimeout(()=>A(!1),3e3)}catch(j){console.error("Error generating PDF:",j)}},G=j=>new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(j),M=(()=>{if(!s)return"https://t.me/share/url";const j=`🎬 **${s.videoTitle}**

💰 **Price:** $${s.videoPrice.toFixed(2)}
💳 **Payment Method:** ${s.paymentMethod.toUpperCase()}
🆔 **Transaction ID:** ${s.transactionId}
📅 **Purchase Date:** ${G(new Date)}

📝 **Description:**
I just completed my purchase and need access to the content.

Please provide me with the access details.`,E=encodeURIComponent(j);return r?`https://t.me/${r.replace("@","")}?text=${E}`:`https://t.me/share/url?text=${E}`})(),z=()=>{e("/videos")},W=()=>{e("/")};return u?l.jsx(yn,{maxWidth:"md",sx:{py:4},children:l.jsx(te,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},children:l.jsx(sn,{size:60})})}):f?l.jsxs(yn,{maxWidth:"md",sx:{py:4},children:[l.jsxs(te,{sx:{display:"flex",gap:2,mb:2},children:[l.jsx(He,{startIcon:l.jsx(ni,{}),onClick:z,variant:"outlined",children:"Back to Videos"}),l.jsx(He,{startIcon:l.jsx(Pl,{}),onClick:W,variant:"contained",children:"Home"})]}),l.jsx(Vt,{severity:"error",sx:{mb:3},children:f})]}):s?l.jsxs(yn,{maxWidth:"md",sx:{py:4},children:[l.jsxs(te,{sx:{display:"flex",gap:2,mb:3},children:[l.jsx(He,{startIcon:l.jsx(ni,{}),onClick:z,variant:"outlined",children:"Back to Videos"}),l.jsx(He,{startIcon:l.jsx(Pl,{}),onClick:W,variant:"contained",children:"Home"})]}),l.jsxs(Nr,{elevation:3,sx:{p:4},children:[l.jsxs(te,{sx:{textAlign:"center",mb:4},children:[l.jsx(xa,{sx:{fontSize:80,color:"success.main",mb:2}}),l.jsx(ge,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Payment Successful!"}),l.jsx(ge,{variant:"h6",color:"text.secondary",children:"Thank you for your purchase"})]}),l.jsxs(te,{sx:{mb:4},children:[l.jsx(ge,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Purchase Details"}),l.jsxs(te,{sx:{backgroundColor:t.palette.mode==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",p:2,borderRadius:1,mb:2},children:[l.jsxs(ge,{variant:"body1",sx:{mb:1},children:[l.jsx("strong",{children:"Video:"})," ",s.videoTitle]}),l.jsxs(ge,{variant:"body1",sx:{mb:1},children:[l.jsx("strong",{children:"Price:"})," $",s.videoPrice.toFixed(2)]}),l.jsxs(ge,{variant:"body1",sx:{mb:1},children:[l.jsx("strong",{children:"Payment Method:"})," ",s.paymentMethod.toUpperCase()]}),l.jsxs(ge,{variant:"body1",sx:{mb:1},children:[l.jsx("strong",{children:"Transaction ID:"})," ",s.transactionId]}),l.jsxs(ge,{variant:"body1",children:[l.jsx("strong",{children:"Purchase Date:"})," ",G(new Date)]})]})]}),l.jsxs(te,{sx:{mb:4},children:[l.jsx(ge,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"Your Product Access"}),s.productLink?l.jsxs(te,{children:[F().map((j,E)=>l.jsxs(te,{sx:{mb:2},children:[l.jsxs(ge,{variant:"body2",sx:{mb:1,fontWeight:"bold"},children:["Link ",E+1,":"]}),l.jsxs(te,{sx:{display:"flex",alignItems:"center",gap:1},children:[l.jsx(Lt,{fullWidth:!0,variant:"outlined",value:j.trim(),InputProps:{readOnly:!0,sx:{color:t.palette.mode==="dark"?"white":t.palette.text.primary,bgcolor:t.palette.mode==="dark"?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"}}}),l.jsx(He,{variant:"contained",color:x===E?"success":"primary",onClick:()=>ae(j,E),startIcon:x===E?l.jsx(xa,{}):l.jsx(Bl,{}),sx:{whiteSpace:"nowrap"},children:x===E?"Copied!":"Copy"})]})]},E)),F().length>1&&l.jsx(te,{sx:{mb:2},children:l.jsx(He,{variant:"outlined",fullWidth:!0,onClick:Z,startIcon:m?l.jsx(xa,{}):l.jsx(Bl,{}),sx:{borderColor:"#E50914",color:"#E50914","&:hover":{borderColor:"#E50914",color:"#fff",background:"#E50914"}},children:m?"All Links Copied!":"Copy All Links"})})]}):l.jsx(Vt,{severity:"info",sx:{mb:3},children:"Your purchase was successful! The admin will need to update the product link. Please contact support through Telegram for immediate access."})]}),l.jsxs(te,{sx:{display:"flex",flexDirection:"column",gap:2},children:[s.productLink&&l.jsx(He,{variant:"contained",color:v?"success":"secondary",fullWidth:!0,startIcon:v?l.jsx(xa,{}):l.jsx(Up,{}),onClick:re,sx:{py:1.5},children:v?"PDF Downloaded!":"Download Receipt PDF"}),r&&l.jsx(He,{variant:"outlined",fullWidth:!0,startIcon:l.jsx(ts,{}),href:M,target:"_blank",rel:"noopener noreferrer",sx:{borderColor:"#229ED9",color:"#229ED9",py:1.5,"&:hover":{borderColor:"#229ED9",color:"#fff",background:"#229ED9"}},children:"Contact Support on Telegram"})]}),l.jsx(te,{sx:{mt:4,p:2,backgroundColor:t.palette.mode==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)",borderRadius:1},children:l.jsx(ge,{variant:"body2",sx:{color:t.palette.mode==="dark"?"#aaa":t.palette.text.secondary,textAlign:"center"},children:s.productLink?"Please save your product link and download the receipt PDF. If any link does not work, please contact us via Telegram for immediate assistance.":"Your purchase has been recorded. Please contact support for access to your content."})})]})]}):l.jsxs(yn,{maxWidth:"md",sx:{py:4},children:[l.jsxs(te,{sx:{display:"flex",gap:2,mb:2},children:[l.jsx(He,{startIcon:l.jsx(ni,{}),onClick:z,variant:"outlined",children:"Back to Videos"}),l.jsx(He,{startIcon:l.jsx(Pl,{}),onClick:W,variant:"contained",children:"Home"})]}),l.jsx(Vt,{severity:"error",children:"No payment data found."})]})};Eu`
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
`;Eu`
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1.1);
  }
`;Eu`
  0% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
`;var Ph={},$y=_t;Object.defineProperty(Ph,"__esModule",{value:!0});var l1=Ph.default=void 0,qy=$y(St()),zy=l;l1=Ph.default=(0,qy.default)((0,zy.jsx)("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"}),"Payment");const Wy=[{cc:"GB",name:"UK"},{cc:"CA",name:"Canada"},{cc:"AU",name:"Australia"},{cc:"DE",name:"Germany"},{cc:"FR",name:"France"}];function c1(n){return n[Math.floor(Math.random()*n.length)]}function Vy(){if(Math.random()<.8)return{countryLabel:"USA",countryEmoji:"🇺🇸"};const e=c1(Wy),t={GB:"🇬🇧",CA:"🇨🇦",AU:"🇦🇺",DE:"🇩🇪",FR:"🇫🇷"};return{countryLabel:e.name,countryEmoji:t[e.cc]}}function Hy(n){try{return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n)}catch{return`$${n.toFixed(2)}`}}const Gy=n=>n==="Stripe"?l.jsx(nh,{fontSize:"small"}):l.jsx(l1,{fontSize:"small"}),Ky=({visible:n,country:e,countryEmoji:t,provider:r,product:i,price:s})=>l.jsx(Ca,{in:n,timeout:{enter:400,exit:400},children:l.jsx(Nr,{elevation:6,sx:{p:1.5,borderRadius:2,minWidth:280,maxWidth:360},children:l.jsxs(b0,{direction:"row",spacing:1.25,alignItems:"center",children:[l.jsx(y0,{sx:{width:32,height:32},children:t}),l.jsxs(te,{sx:{flexGrow:1,minWidth:0},children:[l.jsxs(ge,{variant:"body2",noWrap:!0,children:["Someone purchased • ",e]}),l.jsxs(ge,{variant:"caption",color:"text.secondary",noWrap:!0,children:[Gy(r),l.jsxs(te,{component:"span",sx:{ml:.5},children:["completed via ",r]})]}),l.jsxs(ge,{variant:"body2",noWrap:!0,children:[i," • ",Hy(s)]})]})]})})}),Jy=()=>{const[n,e]=R.useState([]),[t,r]=R.useState(!1),[i,s]=R.useState(null),a=R.useRef(null);R.useEffect(()=>{let c=!1;return(async()=>{try{const f=await zt.getAllVideos(ji.NEWEST);c||e(f)}catch{}})(),()=>{c=!0}},[]);const u=()=>4e4;return R.useEffect(()=>{function c(f=!1){const g=f?5e3:u(),m=window.setTimeout(()=>{if(n.length===0){c(!1);return}const y=c1(n),v=Vy(),A=Math.random()<.6?"Stripe":"PayPal";s({country:v.countryLabel,countryEmoji:v.countryEmoji,provider:A,product:y.title,price:Number(y.price)||0}),r(!0),window.setTimeout(()=>r(!1),4200),c(!1)},g);a.current=m}return c(!0),()=>{a.current&&window.clearTimeout(a.current)}},[n]),i?l.jsx(te,{sx:{position:"fixed",left:16,top:16,zIndex:c=>c.zIndex.snackbar},children:l.jsx(Ky,{visible:t,country:i.country,countryEmoji:i.countryEmoji,provider:i.provider,product:i.product,price:i.price})}):null},mf="privacy_notice_ack",Yy=()=>{const[n,e]=R.useState(!1);R.useEffect(()=>{localStorage.getItem(mf)||e(!0)},[]);const t=()=>{e(!1),localStorage.setItem(mf,"1")};return l.jsx(Af,{open:n,onClose:t,autoHideDuration:8e3,anchorOrigin:{vertical:"top",horizontal:"center"},children:l.jsx(Vt,{onClose:t,severity:"info",variant:"filled",sx:{width:"100%"},children:"We do not share or store your data. It is 100% secure."})})},Zy=()=>{const{pathname:n}=oi();return R.useEffect(()=>{try{window.scrollTo({top:0,left:0,behavior:"instant"})}catch{window.scrollTo(0,0)}},[n]),null};var vf={},Xy="@vercel/analytics",Qy="1.5.0",ew=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function u1(){return typeof window<"u"}function h1(){try{const n="production"}catch{}return"production"}function tw(n="auto"){if(n==="auto"){window.vam=h1();return}window.vam=n}function rw(){return(u1()?window.vam:h1())||"production"}function Lu(){return rw()==="development"}function nw(n){return n.scriptSrc?n.scriptSrc:Lu()?"https://va.vercel-scripts.com/v1/script.debug.js":n.basePath?`${n.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function iw(n={debug:!0}){var e;if(!u1())return;tw(n.mode),ew(),n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend));const t=nw(n);if(document.head.querySelector(`script[src*="${t}"]`))return;const r=document.createElement("script");r.src=t,r.defer=!0,r.dataset.sdkn=Xy+(n.framework?`/${n.framework}`:""),r.dataset.sdkv=Qy,n.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),n.endpoint?r.dataset.endpoint=n.endpoint:n.basePath&&(r.dataset.endpoint=`${n.basePath}/insights`),n.dsn&&(r.dataset.dsn=n.dsn),r.onerror=()=>{const i=Lu()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${t}. ${i}`)},Lu()&&n.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function sw({route:n,path:e}){var t;(t=window.va)==null||t.call(window,"pageview",{route:n,path:e})}function aw(){if(!(typeof process>"u"||typeof vf>"u"))return vf.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function ow(n){return R.useEffect(()=>{var e;n.beforeSend&&((e=window.va)==null||e.call(window,"beforeSend",n.beforeSend))},[n.beforeSend]),R.useEffect(()=>{iw({framework:n.framework||"react",basePath:n.basePath??aw(),...n.route!==void 0&&{disableAutoTrack:!0},...n})},[]),R.useEffect(()=>{n.route&&n.path&&sw({route:n.route,path:n.path})},[n.route,n.path]),null}const d1=()=>l.jsx(ow,{}),lw=({open:n,onClose:e})=>{const t=Ia(),r=bf(t.breakpoints.down("sm")),[i,s]=R.useState(12);return R.useEffect(()=>{if(!n)return;const a=setInterval(()=>{s(u=>u<=1?(e(),0):u-1)},1e3);return()=>clearInterval(a)},[n,e]),R.useEffect(()=>{n&&s(4)},[n]),l.jsx(Pu,{open:n,onClose:()=>{},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",position:"relative",overflow:"hidden"}},children:l.jsxs(Nu,{sx:{p:4,textAlign:"center",position:"relative"},children:[l.jsx(te,{sx:{position:"absolute",top:-50,right:-50,width:100,height:100,borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",zIndex:0}}),l.jsx(te,{sx:{position:"absolute",bottom:-30,left:-30,width:80,height:80,borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",zIndex:0}}),l.jsxs(te,{sx:{position:"relative",zIndex:1},children:[l.jsx(te,{sx:{mb:3},children:l.jsx(sn,{size:r?40:50,thickness:4,sx:{color:"white"}})}),l.jsx(Iu,{sx:{p:0,mb:2},children:l.jsx(ge,{variant:r?"h5":"h4",component:"h1",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #fff 30%, #f0f0f0 90%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Loading Site..."})}),l.jsxs(ge,{variant:"h6",sx:{mb:3,fontWeight:"bold",color:"#ffeb3b",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:["Please wait ",i," seconds"]}),l.jsx(La,{sx:{mb:3,borderColor:"rgba(255,255,255,0.3)"}}),l.jsxs(te,{sx:{mb:3},children:[l.jsx(ge,{variant:r?"h6":"h5",sx:{mb:2,fontWeight:"bold",color:"#ffeb3b",textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"🎉 Special Offers Available! 🎉"}),l.jsxs(te,{sx:{mb:2,p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:[l.jsxs(te,{sx:{display:"flex",alignItems:"center",mb:1},children:[l.jsx(w0,{sx:{mr:1,color:"#4caf50"}}),l.jsx(ge,{variant:"h6",sx:{fontWeight:"bold"},children:"Crypto Payment Special"})]}),l.jsx(ge,{variant:"body1",sx:{mb:1},children:"Pay with cryptocurrency above $40 and get"}),l.jsx(Gt,{label:"2 FREE Contents",sx:{background:"linear-gradient(45deg, #4caf50 30%, #8bc34a 90%)",color:"white",fontWeight:"bold",fontSize:"0.9rem"}})]}),l.jsxs(te,{sx:{p:2,borderRadius:2,background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)"},children:[l.jsxs(te,{sx:{display:"flex",alignItems:"center",mb:1},children:[l.jsx(x0,{sx:{mr:1,color:"#fff"}}),l.jsx(ge,{variant:"h6",sx:{fontWeight:"bold"},children:"Apple Pay & Other Methods"})]}),l.jsx(ge,{variant:"body1",sx:{mb:1},children:"Pay with Apple Pay, PayPal, or other methods and get"}),l.jsx(Gt,{label:"1 FREE Content",sx:{background:"linear-gradient(45deg, #2196f3 30%, #21cbf3 90%)",color:"white",fontWeight:"bold",fontSize:"0.9rem"}})]})]}),l.jsx(ge,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)",fontStyle:"italic"},children:"Site is loading all metadata for the best experience..."})]})]})})},cw=()=>{const{siteName:n,loading:e}=En(),[t,r]=R.useState(!1),[i,s]=R.useState(!0),a=oi(),u=!1;R.useEffect(()=>{n&&(document.title=`${n} - Adult Content`)},[n,a]),R.useEffect(()=>{},[a.pathname,u]);const c=()=>{s(!1)};return R.useEffect(()=>{s(!0)},[]),l.jsxs(te,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[l.jsx(lw,{open:i,onClose:c}),u,l.jsx(Yy,{}),l.jsx(Jy,{}),l.jsx(d1,{}),l.jsx(d5,{}),l.jsxs(te,{component:"main",sx:{flexGrow:1},children:[l.jsx(Zy,{}),l.jsxs(g2,{children:[l.jsx(Gi,{path:"/",element:l.jsx(Fb,{})}),l.jsx(Gi,{path:"/videos",element:l.jsx(dv,{})}),l.jsx(Gi,{path:"/video/:id",element:l.jsx(eb,{})}),l.jsx(Gi,{path:"/video/legacy/:id",element:l.jsx(wv,{})}),l.jsx(Gi,{path:"/login",element:l.jsx(S5,{})}),l.jsx(Gi,{path:"/payment-success",element:l.jsx(Uy,{})}),l.jsx(Gi,{path:"/admin",element:l.jsx(j5,{children:l.jsx(kb,{})})})]})]}),l.jsx(_5,{})]})},uw=()=>l.jsx(L2,{children:l.jsx(S2,{children:l.jsx(C2,{children:l.jsx(Jm,{children:l.jsx(cw,{})})})})});Cf(document.getElementById("root")).render(l.jsxs(R.StrictMode,{children:[l.jsx(uw,{}),l.jsx(d1,{})]}));
